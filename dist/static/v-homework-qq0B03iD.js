import{r as a,aV as J,o,c as r,d as t,K as w,aq as V,B as U,a as Q,h as c,F as j,at as E,f as C,w as D,e as F,aW as X,y as x,b as Y,j as T,n as y,k as Z,l as N,N as ee,I as te,L as P,aK as W,P as le,T as oe}from"./index-0IF6hlqL.js";import{_ as M,a as se}from"./v-files-handler-CLM_TsCW.js";const Ne="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='39.5'%20y='0.5'%20width='39'%20height='39'%20rx='19.5'%20transform='rotate(90%2039.5%200.5)'%20fill='%23F3F4F6'/%3e%3crect%20x='39.5'%20y='0.5'%20width='39'%20height='39'%20rx='19.5'%20transform='rotate(90%2039.5%200.5)'%20stroke='%23F3F4F6'/%3e%3cpath%20d='M15.7578%2020.0001H24.2427M24.2427%2020.0001L20.0003%2015.7577M24.2427%2020.0001L20.0003%2024.2425'%20stroke='%23717680'%20stroke-width='1.85556'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Pe="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='40'%20width='40'%20height='40'%20rx='20'%20transform='rotate(90%2040%200)'%20fill='white'%20fill-opacity='0.08'/%3e%3cpath%20d='M15.7573%2020.0001H24.2422M24.2422%2020.0001L19.9998%2015.7577M24.2422%2020.0001L19.9998%2024.2425'%20stroke='%23E9EAEB'%20stroke-width='1.85556'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ae={class:"input-field"},ne=["placeholder"],ie={key:0,class:"add-field__field"},re={class:"add-field__block"},de=["placeholder"],We={__name:"v-add-field",props:{placeholder:{type:String,default:"Введите значение"}},emits:["submit"],setup(d,{emit:u}){const f=u,n=a(!1),v=a(""),p=a(null),b=()=>{n.value=!n.value,n.value&&E(()=>{const k=document.querySelector(".add-field__input");k&&k.focus()})},m=k=>{n.value=!1},h=()=>{v.value.trim()&&(f("submit",v.value.trim()),v.value="",n.value=!1)};return(k,s)=>{const _=J("click-outside");return o(),r(j,null,[t("form",{onSubmit:U(h,["prevent"])},[t("div",ae,[w(t("input",{class:"input-field__input",type:"text",placeholder:d.placeholder,"onUpdate:modelValue":s[0]||(s[0]=g=>v.value=g)},null,8,ne),[[V,v.value]]),s[2]||(s[2]=t("button",{type:"submit",class:"input-field__submit"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[t("path",{d:"M7.99975 12.2424V3.75751M7.99975 3.75751L3.75732 7.99993M7.99975 3.75751L12.2422 7.99993",stroke:"#717680","stroke-width":"1.85556","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])],32),w((o(),r("div",{class:"add-field",ref_key:"addFieldRef",ref:p},[t("button",{class:"add-field__button custom-btn light-blue",onClick:b}," Добавить "),n.value?(o(),r("div",ie,[t("form",{method:"POST",onSubmit:U(h,["prevent"])},[t("div",re,[w(t("input",{class:"add-field__input",type:"text",placeholder:d.placeholder,"onUpdate:modelValue":s[1]||(s[1]=g=>v.value=g)},null,8,de),[[V,v.value]]),s[3]||(s[3]=Q('<button type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none"><rect width="28" height="28" rx="14" fill="#1D4ECC"></rect><path d="M14 6L14 22" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M13.6572 6L8.00037 11.6569" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M14 6L19.6569 11.6569" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M14 18L14 22" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M14 18L14 22" stroke="white" stroke-width="2" stroke-linecap="round"></path></svg></button>',1))])],32)])):c("",!0)])),[[_,m]])],64)}}},ue={class:"v-files-modal"},ve={class:"v-files-modal__container"},me={__name:"v-files-modal",props:{initialFiles:{type:Array,default:()=>[]}},emits:["saveFiles"],setup(d,{emit:u}){const f=d,n=a(null),v=u,p=a([...f.initialFiles]),b=a(null),m=()=>{n.value&&n.value.close()},h=()=>{v("saveFiles",p.value),m()},k=s=>{p.value=s};return(s,_)=>(o(),C(X,{ref_key:"modalRef",ref:n},{default:D(()=>[t("div",ue,[t("div",ve,[_[0]||(_[0]=t("h2",{class:"v-files-modal__title modal-title"},"Загрузка файла",-1)),F(M,{ref_key:"fileHandler",ref:b,"show-drop-area":!0,onFileAdded:k},null,512),t("div",{class:"v-files-modal__buttons"},[t("button",{class:"v-files-modal__button custom-btn white",onClick:m}," Отменить "),t("button",{class:"v-files-modal__button custom-btn blue",onClick:h}," Сохранить ")])])])]),_:1},512))}},ce="data:image/svg+xml,%3csvg%20width='36'%20height='36'%20viewBox='0%200%2036%2036'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='36'%20height='36'%20rx='8'%20fill='%233B414A'/%3e%3cpath%20d='M18.833%209.66663H19.0603C21.778%209.66663%2023.1368%209.66663%2024.0805%2010.3315C24.3508%2010.522%2024.5909%2010.7479%2024.7933%2011.0024C25.4997%2011.8905%2025.4997%2013.1694%2025.4997%2015.7272V17.8484C25.4997%2020.3178%2025.4997%2021.5524%2025.1089%2022.5385C24.4807%2024.1238%2023.1521%2025.3742%2021.4677%2025.9655C20.42%2026.3333%2019.1082%2026.3333%2016.4845%2026.3333C14.9853%2026.3333%2014.2357%2026.3333%2013.637%2026.1231C12.6745%2025.7853%2011.9153%2025.0707%2011.5563%2024.1648C11.333%2023.6014%2011.333%2022.8958%2011.333%2021.4848V18'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.4993%2018C25.4993%2019.5341%2024.2557%2020.7778%2022.7216%2020.7778C22.1668%2020.7778%2021.5127%2020.6806%2020.9732%2020.8251C20.4939%2020.9535%2020.1195%2021.3279%2019.9911%2021.8072C19.8466%2022.3466%2019.9438%2023.0007%2019.9438%2023.5556C19.9438%2025.0897%2018.7001%2026.3333%2017.166%2026.3333'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.1667%2013L10.5%2013M13.8333%209.66663V16.3333'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",he={class:"v-home__lesson-homework v-home__lesson-sec"},ke={class:"v-home__lesson-homework-row"},fe={class:"v-home__subtitle subtitle"},pe={key:0,class:"v-home__lesson-homework-buttons"},_e={key:0,class:"v-home__lesson-homework-new"},we={key:2,class:"v-home__lesson-homework-deadline"},ge={class:"v-home__lesson-homework-block"},be={key:0,class:"flex gap-3 items-center"},xe={class:"flex gap-3 items-center"},ye={class:"styled-checkbox"},Ce={class:"inline-flex gap-3 h-full"},Fe={key:3,class:"flex items-center gap-3"},Me={class:"styled-checkbox"},Ve={key:1,class:"v-home__lesson-homework-prev"},Le={class:"v-home__lesson-homework-prev-header"},De={class:"block-description"},Se={key:0,class:"flex gap-3 items-center"},$e=["value"],Be={class:"v-home__lesson-homework-footer"},He={class:"flex gap-2 items-center v-home__lesson-homework-mark"},je={__name:"v-homework",props:{mode:{type:String,default:()=>"all"},title:String,subtitle:String,comment:String,mark:Number,homeWorkDeadline:Date},setup(d){const u=d,f=a([]),n=a([]),v=a([]),p=a(null),b=a(new Date),m=a(""),h=a(!1),k=a(!1),s=a(u.mode==="all"),_=a(null),g=a({files:!1}),R=x(()=>u.title||"Домашнее задание"),A=x(()=>u.subtitle||""),I=x(()=>u.homeWorkDeadline?u.homeWorkDeadline.toISOString().split("T")[0]:""),L=x(()=>u.mode==="completed"),S=x(()=>u.homeWorkDeadline?u.homeWorkDeadline>new Date:null),O=x(()=>m.value.length>0||_.value!==null&&_.value!==2),q=i=>{_.value=i},K=()=>{g.value.files=!0},$=()=>{g.value.files=!1},B=(i=!0)=>{s.value=i},H=i=>{p.value&&p.value.handlePaste(i)&&i.preventDefault()},z=i=>{f.value=[...i],p.value.internalFiles=i,E(()=>{var e,l;(l=(e=p.value)==null?void 0:e.$forceUpdate)==null||l.call(e)}),$()},G=i=>{console.log(i,f.value),f.value=f.value.filter(e=>e.id!==i.id),console.log(f.value)};return Y(()=>{}),(i,e)=>(o(),r(j,null,[t("div",he,[t("div",ke,[t("h2",fe,T(R.value),1),d.mode==="all"?(o(),r("div",pe,[t("div",{class:y(["v-home__lesson-homework-header-button",{active:!s.value}]),onClick:e[0]||(e[0]=()=>B(!1))}," Предыдущее ",2),t("div",{class:y(["v-home__lesson-homework-header-button",{active:s.value}]),onClick:B}," Новое ",2)])):c("",!0)]),s.value?(o(),r("div",_e,[h.value?c("",!0):w((o(),r("textarea",{key:0,class:"v-home__lesson-homework-text","onUpdate:modelValue":e[1]||(e[1]=l=>m.value=l),onPaste:H,placeholder:"Введите текст домашнего задания. Для вставки файлов используйте Ctrl+V"},null,544)),[[V,m.value]]),h.value?c("",!0):(o(),C(M,{key:1,ref_key:"fileHandler",ref:p,modelValue:f.value,onFileRemoved:G},null,8,["modelValue"])),!h.value&&d.mode==="all"?(o(),r("div",we,[t("div",ge,[k.value?c("",!0):(o(),r("div",be,[e[10]||(e[10]=Z(" Дедлайн ")),F(N(te),{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),locale:"ru-ru","auto-apply":!0,format:N(ee)},{"clear-icon":D(({clear:l})=>e[9]||(e[9]=[])),_:1},8,["modelValue","format"])])),t("div",xe,[t("div",ye,[w(t("input",{id:"next-lesson",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l)},null,512),[[P,k.value]]),e[11]||(e[11]=t("label",{for:"next-lesson"},null,-1))]),e[12]||(e[12]=t("label",{for:"next-lesson"},"До следующего занятия",-1))])]),t("div",Ce,[t("div",{class:"file-input",onClick:K},e[13]||(e[13]=[t("img",{class:"day-el",src:se,alt:""},null,-1),t("img",{class:"night-el",src:ce,alt:""},null,-1)])),t("button",{class:y(["v-home__lesson-homework-button save",{unactive:!m.value.length}])}," Сохранить ",2)])])):c("",!0),d.mode==="all"?(o(),r("div",Fe,[t("div",Me,[w(t("input",{type:"checkbox",id:"no-homework","onUpdate:modelValue":e[4]||(e[4]=l=>h.value=l)},null,512),[[P,h.value]]),e[14]||(e[14]=t("label",{for:"no-homework"},null,-1))]),e[15]||(e[15]=t("label",{for:"no-homework"},"Без задания",-1))])):c("",!0),t("button",{class:y(["v-home__lesson-homework-button save mob",{unactive:!m.value.length}])}," Сохранить ",2)])):c("",!0),s.value?c("",!0):(o(),r("div",Ve,[t("div",Le,[t("p",De,T(A.value),1),k.value?c("",!0):(o(),r("div",Se,[e[16]||(e[16]=t("p",{class:"block-description"},"Дедлайн",-1)),t("input",{class:y(["styled-datepicker",{red:S.value,green:!S.value}]),type:"date",readonly:"",value:I.value},null,10,$e)]))]),F(M,{files:n.value,"onUpdate:files":e[5]||(e[5]=l=>n.value=l)},null,8,["files"]),e[18]||(e[18]=t("h3",{class:"v-home__lesson-homework-prev-title"},"Ответ ученика",-1)),F(M,{files:v.value,"onUpdate:files":e[6]||(e[6]=l=>v.value=l)},null,8,["files"]),!h.value&&d.mode!=="completed"?w((o(),r("textarea",{key:0,class:"v-home__lesson-homework-text","onUpdate:modelValue":e[7]||(e[7]=l=>m.value=l),onPaste:H,placeholder:"Ваш комментарий"},null,544)),[[V,m.value]]):c("",!0),t("div",Be,[t("div",He,[e[17]||(e[17]=t("span",null,"Оценка",-1)),L.value?(o(),C(W,{key:0,"is-readonly":L.value,"default-value":d.mark},null,8,["is-readonly","default-value"])):(o(),C(W,{key:1,"is-readonly":!1,"default-value":d.mark,"onUpdate:modelValue":e[8]||(e[8]=l=>q(l)),items:[2,3,4,5]},null,8,["default-value"]))]),w(t("button",{class:y(["v-home__lesson-homework-button save",{unactive:!O.value}])}," Сохранить ",2),[[le,!L.value]])])]))]),F(oe,{name:"fade"},{default:D(()=>[g.value.files?(o(),C(me,{key:0,onClose:$,onSaveFiles:z})):c("",!0)]),_:1})],64))}};export{We as _,Ne as a,Pe as b,je as c,me as d};
