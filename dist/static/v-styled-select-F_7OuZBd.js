import{r as v,s as f,b as E,d as U,aL as V,au as F,I as M,o as u,c as o,e as i,j as L,n as w,N as S,f as P,w as $,O as q,F as T,y as G,g as A,T as J,as as K}from"./index-BaLNjqNl.js";const Q={class:"v-styled-select__value"},W=["value"],X=["innerHTML"],Y=["onClick"],Z=["for"],ee={class:"styled-checkbox"},le=["id","checked","onChange"],te=["for"],se={key:0},ae=["innerHTML"],ne={key:0},ue=["innerHTML"],de={__name:"v-styled-select",props:{items:{type:Array,default:()=>[]},value:{type:[Array,Object,String,Number],default:()=>[]},isReadonly:{type:Boolean,default:!1},isMultiselect:{type:Boolean,default:!1},defaultValue:{type:[Array,Object,String,Number],default:null}},emits:["update:modelValue"],setup(r,{emit:H}){const t=r,n=H,c=v(!1),m=v(null),_=v(null),g=v(!1),h=e=>e==null?"":typeof e=="string"||typeof e=="number"?e:e.name?e.name:e.student_name?e.student_name:e.text?e.text:e.id||"",y=e=>e==null?null:typeof e=="object"&&e.id!==void 0?e.id:e,l=v([]),b=()=>{t.isMultiselect?Array.isArray(t.defaultValue)&&t.defaultValue.length>0?(l.value=[...t.defaultValue],n("update:modelValue",[...l.value])):t.items.length>0?(l.value=[t.items[0]],n("update:modelValue",[...l.value])):l.value=[]:t.defaultValue!==null?(l.value=[t.defaultValue],n("update:modelValue",t.defaultValue)):t.items.length>0?(l.value=[t.items[0]],n("update:modelValue",t.items[0])):l.value=[]},C=f(()=>l.value.length===0?!!(t.items.length>0&&t.items[0].svg):l.value.some(e=>e&&e.svg)),B=f(()=>{if(l.value.length===0)return t.items.length>0&&t.items[0].svg?t.items[0].svg:"";const e=l.value.find(a=>a&&a.svg);return e?e.svg:""}),D=f(()=>{if(l.value.length===0){const e=t.items[0];return e?e.svg?"":h(e):""}return l.value.filter(e=>!e.svg).map(e=>h(e)).join(", ")}),x=e=>{const a=y(e);return l.value.some(d=>{const s=y(d);return a!==null&&s!==null?s===a:d===e})},R=e=>{const a=l.value.findIndex(d=>y(d)===y(e));a>=0?l.value.splice(a,1):l.value.push(e),n("update:modelValue",[...l.value])},j=e=>{l.value=[e],n("update:modelValue",e),c.value=!1},N=async()=>{t.isReadonly||(c.value=!c.value,c.value&&(await K(),k()))},z=()=>{c.value=!1},I=f(()=>({top:g.value?"auto":"100%",bottom:g.value?"100%":"auto"})),O=f(()=>({openUp:g.value,open:c.value})),k=()=>{if(m.value&&_.value){const e=m.value.getBoundingClientRect(),a=_.value.offsetHeight,d=window.innerHeight-e.bottom;g.value=a>d}};return E(()=>{window.addEventListener("resize",k),b()}),U(()=>{window.removeEventListener("resize",k)}),V(()=>t.items,e=>{t.isMultiselect?!(Array.isArray(t.defaultValue)&&t.defaultValue.length>0)&&l.value.length===0&&e.length>0&&(l.value=[e[0]],n("update:modelValue",[...l.value])):t.defaultValue===null&&l.value.length===0&&e.length>0&&(l.value=[e[0]],n("update:modelValue",e[0]))},{immediate:!0}),V(()=>t.defaultValue,e=>{t.isMultiselect?Array.isArray(e)&&e.length>0?(l.value=[...e],n("update:modelValue",[...l.value])):l.value.length===0&&t.items.length>0&&(l.value=[t.items[0]],n("update:modelValue",[...l.value])):e!==null?(l.value=[e],n("update:modelValue",e)):l.value.length===0&&t.items.length>0&&(l.value=[t.items[0]],n("update:modelValue",t.items[0]))},{deep:!0}),V(()=>t.isMultiselect,()=>{b()}),(e,a)=>{const d=F("click-outside");return M((u(),o("div",{class:"v-styled-select",ref_key:"selectContainer",ref:m},[i("div",{class:w(["v-styled-select__field",{readonly:r.isReadonly}]),onClick:N},[i("div",Q,[C.value?L("",!0):(u(),o("input",{key:0,class:"",type:"text",value:D.value,readonly:""},null,8,W)),C.value?(u(),o("span",{key:1,innerHTML:B.value},null,8,X)):L("",!0)]),M(i("div",{class:w(["v-styled-select__image",O.value])},a[0]||(a[0]=[i("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"#717680","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2),[[S,!r.isReadonly]])],2),P(J,{name:"fade"},{default:$(()=>[M(i("ul",{class:"v-styled-select__list",ref_key:"listRef",ref:_,style:q(I.value)},[(u(!0),o(T,null,G(r.items,(s,p)=>(u(),o("li",{class:w(["v-styled-select__list-item",{selected:r.isMultiselect?!1:x(s)}]),key:p,onClick:oe=>r.isMultiselect?null:j(s)},[r.isMultiselect?(u(),o("label",{key:0,class:"checkbox-label",for:"item-"+(s.id||p)},[i("div",ee,[i("input",{type:"checkbox",id:"item-"+(s.id||p),checked:x(s),onChange:()=>R(s)},null,40,le),i("label",{for:"item-"+(s.id||p)},null,8,te)]),s.svg?(u(),o("span",{key:1,innerHTML:s.svg},null,8,ae)):(u(),o("span",se,A(h(s)),1))],8,Z)):(u(),o(T,{key:1},[s.svg?(u(),o("span",{key:1,innerHTML:s.svg},null,8,ue)):(u(),o("span",ne,A(h(s)),1))],64))],10,Y))),128))],4),[[S,c.value]])]),_:1})])),[[d,z]])}}};export{de as _};
