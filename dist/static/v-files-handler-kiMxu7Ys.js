import{r as f,b as q,aO as x,o as r,c as d,d as o,l as v,n as E,B as m,k as A,h as D,F as L,A as $,j as I}from"./index-W5j5W2gU.js";const S="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='40'%20height='40'%20rx='20'%20fill='%23F4F7FF'/%3e%3cg%20clip-path='url(%23clip0_8971_27347)'%3e%3cpath%20d='M23.3333%2023.3332L20%2019.9999M20%2019.9999L16.6666%2023.3332M20%2019.9999V27.4999M26.9916%2025.3249C27.8044%2024.8818%2028.4465%2024.1806%2028.8165%2023.3321C29.1866%2022.4835%2029.2635%2021.5359%2029.0351%2020.6388C28.8068%2019.7417%2028.2862%2018.9462%2027.5555%2018.3778C26.8248%2017.8094%2025.9257%2017.5005%2025%2017.4999H23.95C23.6977%2016.5243%2023.2276%2015.6185%2022.5749%2014.8507C21.9222%2014.0829%2021.104%2013.4731%2020.1817%2013.0671C19.2594%2012.661%2018.2571%2012.4694%2017.2501%2012.5065C16.243%2012.5436%2015.2575%2012.8085%2014.3676%2013.2813C13.4777%2013.7541%2012.7066%2014.4225%2012.1122%2015.2362C11.5177%2016.05%2011.1155%2016.9879%2010.9358%2017.9794C10.756%2018.9709%2010.8034%2019.9903%2011.0743%2020.961C11.3452%2021.9316%2011.8327%2022.8281%2012.5%2023.5832'%20stroke='%231D4ECC'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_8971_27347'%3e%3crect%20width='20'%20height='20'%20fill='white'%20transform='translate(10%2010)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",j="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.66675%201.33337H4.00008C3.64646%201.33337%203.30732%201.47385%203.05727%201.7239C2.80722%201.97395%202.66675%202.31309%202.66675%202.66671V13.3334C2.66675%2013.687%202.80722%2014.0261%203.05727%2014.2762C3.30732%2014.5262%203.64646%2014.6667%204.00008%2014.6667H12.0001C12.3537%2014.6667%2012.6928%2014.5262%2012.9429%2014.2762C13.1929%2014.0261%2013.3334%2013.687%2013.3334%2013.3334V6.00004M8.66675%201.33337L13.3334%206.00004M8.66675%201.33337V6.00004H13.3334'%20stroke='%231D4ECC'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",H="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='15'%20height='15'%20rx='7.5'%20fill='%23CCD8F8'/%3e%3crect%20x='0.5'%20y='0.5'%20width='15'%20height='15'%20rx='7.5'%20stroke='%23CCD8F8'/%3e%3cpath%20d='M10.5%205.5L5.5%2010.5M5.5%205.5L10.5%2010.5'%20stroke='%231D4ECC'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",T="data:image/svg+xml,%3csvg%20width='36'%20height='36'%20viewBox='0%200%2036%2036'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='36'%20height='36'%20rx='8'%20fill='%23E4EFFF'/%3e%3cpath%20d='M18.8333%209.66663H19.0605C21.7782%209.66663%2023.137%209.66663%2024.0807%2010.3315C24.3511%2010.522%2024.5911%2010.7479%2024.7935%2011.0024C25.4999%2011.8905%2025.4999%2013.1694%2025.4999%2015.7272V17.8484C25.4999%2020.3178%2025.4999%2021.5524%2025.1091%2022.5385C24.4809%2024.1238%2023.1523%2025.3742%2021.468%2025.9655C20.4202%2026.3333%2019.1084%2026.3333%2016.4848%2026.3333C14.9855%2026.3333%2014.2359%2026.3333%2013.6372%2026.1231C12.6747%2025.7853%2011.9155%2025.0707%2011.5566%2024.1648C11.3333%2023.6014%2011.3333%2022.8958%2011.3333%2021.4848V18'%20stroke='%231D4ECC'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.4998%2018C25.4998%2019.5341%2024.2562%2020.7778%2022.7221%2020.7778C22.1672%2020.7778%2021.5131%2020.6806%2020.9737%2020.8251C20.4944%2020.9535%2020.12%2021.3279%2019.9916%2021.8072C19.8471%2022.3466%2019.9443%2023.0007%2019.9443%2023.5556C19.9443%2025.0897%2018.7006%2026.3333%2017.1665%2026.3333'%20stroke='%231D4ECC'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.1667%2013L10.5%2013M13.8333%209.66663V16.3333'%20stroke='%231D4ECC'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",N=["data-instance-id"],P=["id"],R={class:"v-files-handler__drop-area-subtitle"},W=["for"],z={class:"v-files-handler__list"},K={class:"file__block"},O={class:"file__title"},G=["onClick"],U={__name:"v-files-handler",props:{modelValue:{type:Array,default:()=>[]},showDropArea:{type:Boolean,default:!1},showAddButton:{type:Boolean,default:!1}},emits:["update:modelValue","file-added","file-removed"],setup(h,{expose:M,emit:y}){const a=Math.random().toString(36).substring(2,10),C=h,p=y,l=f([]),g=t=>t.map(e=>({...e,uniqueId:e.uniqueId||`${a}-${e.id||Math.random().toString(36).substring(2,10)}`}));q(()=>{l.value=g([...C.modelValue])}),x(()=>C.modelValue,t=>{const e=new Set(l.value.map(n=>n.uniqueId)),i=g(t),s=i.filter(n=>!e.has(n.uniqueId));s.length>0?l.value=[...l.value,...s]:t.length!==l.value.length&&(l.value=i)},{deep:!0}),x(l,t=>{const e=t.map(({uniqueId:i,...s})=>s);p("update:modelValue",e)},{deep:!0});const w=f(null),u=f(!1),c=t=>{const e=Array.from(t).map(s=>({id:Math.random().toString(36).substring(2,15),name:s.name,size:s.size,file:s})),i=g(e);l.value=[...l.value,...i],p("file-added",e)},B=t=>{t.target.files&&t.target.files.length>0&&(c(t.target.files),t.target.value="")},V=t=>{u.value=!1;const e=t.dataTransfer.files;e.length>0&&c(e)},k=()=>{w.value.click()},b=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB",_=t=>{const e=l.value.find(i=>i.uniqueId===t);if(e){const{uniqueId:i,...s}=e;l.value=l.value.filter(n=>n.uniqueId!==t),p("file-removed",s)}};return M({addFilesToList:c,removeFile:_,handlePaste:t=>{const i=(t.clipboardData||window.clipboardData).items;let s=!1;if(i){for(let n=0;n<i.length;n++)if(i[n].kind==="file"){const F=i[n].getAsFile();F&&(s=!0,c([F]))}return s}return!1},openFileSelector:k,instanceId:a}),(t,e)=>(r(),d("div",{class:"v-files-handler","data-instance-id":v(a)},[o("input",{id:`file-handler-input-${v(a)}`,ref_key:"fileInput",ref:w,type:"file",onInput:B,multiple:"",class:"hidden-input"},null,40,P),h.showDropArea?(r(),d("div",{key:0,class:E(["v-files-handler__drop-area",{dragging:u.value}]),onDragover:e[0]||(e[0]=m(i=>u.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=m(i=>u.value=!1,["prevent"])),onDrop:m(V,["prevent"])},[e[3]||(e[3]=o("img",{src:S,alt:""},null,-1)),o("div",R,[o("label",{for:`file-handler-input-${v(a)}`},"Загрузите файл ",8,W),e[2]||(e[2]=A("или перетащите в это поле "))])],34)):D("",!0),o("ul",z,[(r(!0),d(L,null,$(l.value,i=>(r(),d("li",{class:"v-files-handler__list-item file",key:i.uniqueId},[o("div",K,[e[4]||(e[4]=o("img",{class:"file__image",src:j,alt:""},null,-1)),o("p",O,I(i.name)+" ("+I(b(i.size))+")",1)]),o("img",{src:H,alt:"",onClick:s=>_(i.uniqueId),style:{cursor:"pointer"}},null,8,G)]))),128))]),h.showAddButton?(r(),d("div",{key:1,class:"file-input",onClick:k},e[5]||(e[5]=[o("img",{src:T,alt:""},null,-1)]))):D("",!0)],8,N))}};export{U as _,T as a};
