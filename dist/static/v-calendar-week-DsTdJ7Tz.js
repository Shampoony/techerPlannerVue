import{H as Ne,I as ke,J as ie,K as X,L as Ce,M as Y,r as w,x as xe,q as Ge,y as de,b as We,z as Le,o as c,c as g,d as t,k as N,e as $,w as D,n as C,B as J,f as K,l as T,N as qe,O as pe,h as p,P as Te,Q as ce,R as Ve,j as h,m as Be,T as re,p as Ee,F as I,S as le,U as Se,V as Fe,u as Ie,t as ue,E as we,W as ye,A as Q,X as ze,C as Re,D as He,Y as Ue,Z as je}from"./index-4RuHJQwr.js";import{_ as he}from"./arrow-right-finance-Dbx55g6C.js";import{u as ve}from"./useIsMobile-mX6yTQnW.js";import{d as Oe,_ as Xe}from"./v-modals-container-BGlL2ukJ.js";function be(a,n,d){const[v,_]=Ne(d==null?void 0:d.in,a,n);return+ke(v,d)==+ke(_,d)}function A(a,n){if(a.one!==void 0&&n===1)return a.one;const d=n%10,v=n%100;return d===1&&v!==11?a.singularNominative.replace("{{count}}",String(n)):d>=2&&d<=4&&(v<10||v>20)?a.singularGenitive.replace("{{count}}",String(n)):a.pluralGenitive.replace("{{count}}",String(n))}function b(a){return(n,d)=>d!=null&&d.addSuffix?d.comparison&&d.comparison>0?a.future?A(a.future,n):"через "+A(a.regular,n):a.past?A(a.past,n):A(a.regular,n)+" назад":A(a.regular,n)}const Ye={lessThanXSeconds:b({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:b({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(a,n)=>n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:b({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:b({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:b({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:b({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:b({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:b({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:b({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:b({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:b({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:b({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:b({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:b({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:b({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},Qe=(a,n,d)=>Ye[a](n,d),Ae={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},Je={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Ke={any:"{{date}}, {{time}}"},Ze={date:ie({formats:Ae,defaultWidth:"full"}),time:ie({formats:Je,defaultWidth:"full"}),dateTime:ie({formats:Ke,defaultWidth:"any"})},me=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function et(a){const n=me[a];switch(a){case 0:return"'в прошлое "+n+" в' p";case 1:case 2:case 4:return"'в прошлый "+n+" в' p";case 3:case 5:case 6:return"'в прошлую "+n+" в' p"}}function Me(a){const n=me[a];return a===2?"'во "+n+" в' p":"'в "+n+" в' p"}function tt(a){const n=me[a];switch(a){case 0:return"'в следующее "+n+" в' p";case 1:case 2:case 4:return"'в следующий "+n+" в' p";case 3:case 5:case 6:return"'в следующую "+n+" в' p"}}const at={lastWeek:(a,n,d)=>{const v=a.getDay();return be(a,n,d)?Me(v):et(v)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(a,n,d)=>{const v=a.getDay();return be(a,n,d)?Me(v):tt(v)},other:"P"},nt=(a,n,d,v)=>{const _=at[a];return typeof _=="function"?_(n,d,v):_},st={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},rt={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},ot={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},it={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},lt={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},ut={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},dt={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},ct=(a,n)=>{const d=Number(a),v=n==null?void 0:n.unit;let _;return v==="date"?_="-е":v==="week"||v==="minute"||v==="second"?_="-я":_="-й",d+_},vt={ordinalNumber:ct,era:X({values:st,defaultWidth:"wide"}),quarter:X({values:rt,defaultWidth:"wide",argumentCallback:a=>a-1}),month:X({values:ot,defaultWidth:"wide",formattingValues:it,defaultFormattingWidth:"wide"}),day:X({values:lt,defaultWidth:"wide"}),dayPeriod:X({values:ut,defaultWidth:"any",formattingValues:dt,defaultFormattingWidth:"wide"})},mt=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,gt=/\d+/i,_t={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},ft={any:[/^д/i,/^н/i]},kt={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},pt={any:[/1/i,/2/i,/3/i,/4/i]},wt={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},yt={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},ht={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},bt={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},Mt={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},Dt={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},$t={ordinalNumber:Ce({matchPattern:mt,parsePattern:gt,valueCallback:a=>parseInt(a,10)}),era:Y({matchPatterns:_t,defaultMatchWidth:"wide",parsePatterns:ft,defaultParseWidth:"any"}),quarter:Y({matchPatterns:kt,defaultMatchWidth:"wide",parsePatterns:pt,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Y({matchPatterns:wt,defaultMatchWidth:"wide",parsePatterns:yt,defaultParseWidth:"any"}),day:Y({matchPatterns:ht,defaultMatchWidth:"wide",parsePatterns:bt,defaultParseWidth:"any"}),dayPeriod:Y({matchPatterns:Mt,defaultMatchWidth:"wide",parsePatterns:Dt,defaultParseWidth:"any"})},xt={code:"ru",formatDistance:Qe,formatLong:Ze,formatRelative:nt,localize:vt,match:$t,options:{weekStartsOn:1,firstWeekContainsDate:1}},Gt={class:"v-calendar-menu"},Wt={class:"v-calendar-menu__top"},St={class:"v-calendar-menu__buttons"},Pt={class:"v-calendar-menu__block"},Nt={class:"flex gap-2"},Ct={class:"v-calendar-menu__picker picker"},Lt={class:"v-calendar-menu__select"},qt={class:"v-calendar-menu__select-buttons"},Tt={class:"v-calendar-menu__select-button"},Vt={key:0,class:"v-calendar-menu__checkbox flex gap-2"},Bt={class:"flex items-center gap-2"},Et={class:"switch"},Ft={class:"v-calendar-menu__meanings flex"},It={key:0,class:"v-calendar-menu mob"},zt={class:"v-calendar-menu__block"},Rt={class:"flex gap-2 items-center justify-center"},Ht={class:"v-calendar-menu__picker picker"},Ut={class:"v-calendar-menu__date flex items-center justify-center"},jt={key:0,class:"v-calendar-menu__date-text"},Ot={key:1},Xt={class:"v-calendar-menu__date-text"},Yt={class:"v-calendar-menu__meanings flex"},De={__name:"v-calendar-menu",props:{isShowedBreak:{type:Boolean,required:!1},type:{type:String,required:!0}},emits:["toggleBreakMode","setMonth","setWeek","paginateMonth","paginateWeek"],setup(a,{emit:n}){const d=n,v=w(localStorage.getItem("breakMode")),_=w({}),G=w(),R=new Date,W=w(`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`),f=w(W.value.slice(0,4)),V=w();ve(768);const Z=ve(480),B=w(),E=w(),z=xe(),x=Ge(),H=a,F=w({lessons:!1,trial_lesson:!1}),ee=()=>{const r=W.value.split("-")[1],e=W.value.split("-")[0],m={...x.query,selected_date:`${r}.${e}`};z.push({query:m})},U=r=>{let e=parseInt(W.value.split("-")[1]),m=parseInt(W.value.split("-")[0]);r=="next"?e===12?(e=1,m+=1):e+=1:r==="prev"&&(e===1?(e=12,m-=1):e-=1),V.value=le(e-1),W.value=`${m}-${String(e).padStart(2,0)}`,G.value={month:e-1,year:m},d("paginateMonth",{month:e,year:m}),ee()},te=async r=>{const e={...x.query,start_date:r};await z.push({query:e})},ae=async r=>{const e=new Date(_.value[0]),m=r==="next"?7:-7;e.setDate(e.getDate()+m);const l=Se(e);te(l).then(()=>{S(),d("paginateWeek")})},ne=r=>{_.value=r,d("setWeek",r[0].toLocaleDateString("ru-RU"))},oe=()=>{const r=x.query;if(r.start_date){const e=r.start_date.replace(/\./g,"-"),m=new Date(e.split("-").reverse().join("-")),l={day:"numeric",month:"long"};B.value=m.toLocaleDateString("ru-RU",l);const L=new Date(m);L.setDate(m.getDate()+7),E.value=L.toLocaleDateString("ru-RU",l),_.value=[m,L]}},j=()=>{i(),oe()},M=r=>{F.value[r]=!F.value[r]},o=()=>{d("toggleBreakMode")},s=r=>{G.value=r,W.value=`${r.year}-${r.month+1}`,d("setMonth",r)},i=()=>{if(x.query.selected_date){const[r,e]=x.query.selected_date.split(".").map(Number);V.value=le(r-1),!isNaN(r)&&!isNaN(e)&&(G.value={month:r-1,year:e})}else if(!x.query.selected_date){const r=new Date().getMonth(),e=new Date().getFullYear();V.value=le(r-1),!isNaN(r)&&!isNaN(e)&&(G.value={month:r,year:e})}},k=()=>{if(x.query.modal==="modal_add"){F.value.lessons=!0;const{modal:r,...e}=x.query;z.replace({query:e})}},u=r=>{localStorage.setItem("activePage",r),console.log(r),z.push({name:r})},S=()=>{const e=x.query.start_date.replace(/\./g,"-"),m=new Date(e.split("-").reverse().join("-")),l={day:"numeric",month:"long"};B.value=m.toLocaleDateString("ru-RU",l);const L=new Date(m);L.setDate(m.getDate()+7),E.value=L.toLocaleDateString("ru-RU",l),_.value=[m,L]},y=de(()=>H.type==="home"?()=>U("next"):()=>ae("next")),P=de(()=>H.type==="home"?()=>U("prev"):()=>ae("prev"));return We(()=>{j(),k()}),(r,e)=>{const m=Le("router-link");return c(),g(I,null,[t("div",Gt,[t("div",Wt,[e[21]||(e[21]=t("h1",{class:"text-title"},"Календарь",-1)),t("div",St,[t("div",{class:"v-calendar-menu__button custom-btn white",onClick:e[0]||(e[0]=l=>M("trial_lesson"))},e[19]||(e[19]=[t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.99984 4.16663V15.8333M4.1665 9.99996H15.8332",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),N(" Пробное занятие ")])),t("div",{class:"v-calendar-menu__button custom-btn blue",onClick:e[1]||(e[1]=l=>M("lessons"))},e[20]||(e[20]=[t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.99984 4.16663V15.8333M4.1665 9.99996H15.8332",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),N(" Занятие ")]))])]),t("div",Pt,[t("div",Nt,[t("div",Ct,[$(m,{to:{name:"calendar-week"},class:C(["v-calendar-menu__picker-item picker__item",{active:a.type==="calendar-week"}]),onClick:e[2]||(e[2]=l=>u("calendar-week"))},{default:D(()=>e[22]||(e[22]=[N("Неделя")])),_:1},8,["class"]),$(m,{to:"/calendar",class:C(["v-calendar-menu__picker-item picker__item",{active:a.type==="home"}]),onClick:e[3]||(e[3]=l=>u("home"))},{default:D(()=>e[23]||(e[23]=[N("Месяц")])),_:1},8,["class"])]),t("div",Lt,[t("div",qt,[t("div",{class:"v-calendar-menu__select-button",onClick:e[4]||(e[4]=J((...l)=>P.value&&P.value(...l),["prevent"]))},e[24]||(e[24]=[t("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.20975 5.99989H2.42188M2.42188 5.99989L5.81581 9.39383M2.42188 5.99989L5.81581 2.60595",stroke:"#717680","stroke-width":"1.48444","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),t("div",Tt,[a.type==="home"?(c(),K(T(pe),{key:0,class:"v-calendar-menu__select-month","month-picker":"","month-name-format":"long",locale:T(xt),"auto-apply":!0,format:T(qe),modelValue:G.value,"onUpdate:modelValue":[e[5]||(e[5]=l=>G.value=l),s]},{"clear-icon":D(({clear:l})=>e[25]||(e[25]=[])),_:1},8,["locale","format","modelValue"])):p("",!0),a.type==="calendar-week"?(c(),K(T(pe),{key:1,class:"v-calendar-menu__select-week","week-picker":"",format:T(Te),locale:"ru-ru","auto-apply":!0,modelValue:_.value,"onUpdate:modelValue":[e[6]||(e[6]=l=>_.value=l),ne]},{"clear-icon":D(({clear:l})=>e[26]||(e[26]=[])),_:1},8,["format","modelValue"])):p("",!0),e[27]||(e[27]=t("div",{class:"v-calendar-menu__select-button-image"},[t("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"#717680","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),t("div",{class:"v-calendar-menu__select-button",onClick:e[7]||(e[7]=J((...l)=>y.value&&y.value(...l),["prevent"]))},e[28]||(e[28]=[t("svg",{class:"rotate-180",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9.20975 5.99989H2.42188M2.42188 5.99989L5.81581 9.39383M2.42188 5.99989L5.81581 2.60595",stroke:"#717680","stroke-width":"1.48444","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]),a.isShowedBreak?(c(),g("div",Vt,[t("div",Bt,[t("label",Et,[ce(t("input",{id:"break",type:"checkbox",onChange:o,"onUpdate:modelValue":e[8]||(e[8]=l=>v.value=l)},null,544),[[Ve,v.value]]),e[29]||(e[29]=t("span",{class:"slider"},null,-1))]),e[30]||(e[30]=t("div",{class:"v-calendar-menu__checkbox-subtitle"},"Показывать перерывы",-1))])])):p("",!0)]),t("div",Ft,[t("div",{class:"v-calendar-menu__meaning blue",onClick:e[9]||(e[9]=l=>M("trial_lesson"))},e[31]||(e[31]=[t("div",null,null,-1),N(" Занятие ")])),t("div",{class:"v-calendar-menu__meaning green",onClick:e[10]||(e[10]=l=>M("lessons"))},e[32]||(e[32]=[t("div",null,null,-1),N(" Пробное занятие ")]))])])]),T(Z).isMobile?(c(),g("div",It,[t("div",zt,[t("div",Rt,[t("div",Ht,[$(m,{to:{name:"calendar-week"},class:C(["v-calendar-menu__picker-item picker__item",{active:a.type==="calendar-week"}]),onClick:e[11]||(e[11]=l=>u("calendar-week"))},{default:D(()=>e[33]||(e[33]=[N("Неделя")])),_:1},8,["class"]),$(m,{to:{name:"home"},class:C(["v-calendar-menu__picker-item picker__item",{active:a.type==="home"}]),onClick:e[12]||(e[12]=l=>u("home"))},{default:D(()=>e[34]||(e[34]=[N("Месяц")])),_:1},8,["class"])])]),t("div",Ut,[t("a",{class:"v-calendar-menu__date-back",onClick:e[13]||(e[13]=J((...l)=>P.value&&P.value(...l),["prevent"]))},e[35]||(e[35]=[t("img",{src:he,alt:""},null,-1)])),a.type=="week"?(c(),g("h3",jt,h(B.value)+" - "+h(E.value),1)):p("",!0),a.type=="home"?(c(),g("div",Ot,[t("h3",Xt,h(V.value)+" "+h(f.value),1)])):p("",!0),t("a",{class:"v-calendar-menu__date-next",onClick:e[14]||(e[14]=J((...l)=>y.value&&y.value(...l),["prevent"]))},e[36]||(e[36]=[t("img",{src:he,alt:""},null,-1)]))]),t("div",Yt,[t("div",{class:"v-calendar-menu__meaning blue",onClick:e[15]||(e[15]=l=>M("trial_lesson"))},e[37]||(e[37]=[t("div",null,null,-1),N(" Занятие ")])),t("div",{class:"v-calendar-menu__meaning green",onClick:e[16]||(e[16]=l=>M("lessons"))},e[38]||(e[38]=[t("div",null,null,-1),N(" Пробное занятие ")]))])])])):p("",!0),$(re,{name:"fade"},{default:D(()=>[F.value.lessons?(c(),K(Be,{key:0,onClose:e[17]||(e[17]=l=>M("lessons"))})):p("",!0)]),_:1}),$(re,{name:"fade"},{default:D(()=>[F.value.trial_lesson?(c(),K(Ee,{key:0,onClose:e[18]||(e[18]=l=>M("trial_lesson"))})):p("",!0)]),_:1})],64)}}},Qt={class:"v-calendar-week"},At={class:"container"},Jt={class:"v-calendar-week__container layout"},Kt={key:0,class:"sec-hidden-content showing"},Zt={key:0,class:"v-calendar-week__table calendar"},ea={class:"calendar-header"},ta={class:"calendar-header__item"},aa=["onDrop"],na={class:"calendar-row__item-content calendar-card"},sa=["onClick","onDragstart"],ra={class:"calendar-card__lesson-time"},oa={class:"calendar-card__lesson-name"},ia={class:"v-calendar-week__break scroll-container"},la=["onClick"],ua={class:"event-header"},da={class:"calendar-card__lesson-time"},ca={class:"calendar-card__lesson-name"},va={key:0,class:"calendar-card__break"},ma={key:2,class:"loader-container"},ga={key:0,class:"v-calendar-week-mob mob-page"},_a={class:"container"},fa={class:"v-calendar-week-mob__container layout"},ka={key:0,class:"v-calendar-week-mob__list"},pa={key:0,class:"day"},wa={class:"day__header"},ya={class:"day__date"},ha={class:"day__lesson-time"},ba={class:"day__lesson-name"},Ma=10,$e=90,Da={__name:"v-calendar-week",setup(a){const{isMobile:n}=ve();w({});const d=xe(),v=Ge(),_=w(localStorage.getItem("breakMode")==="true"),G=w();w(Fe(new Date));const R=w(v.query.start_date||"01.12.2025"),W=Ie("modalsContainer"),f=w(),V=w({lesson:null,fromColumnIndex:null,fromLessonIndex:null}),Z=w({viewType:"Week",cellDuration:15,startDate:ue(R.value),allowEventOverlap:!1,eventResizeHandling:"Disabled",timeRangeSelectedHandling:"Disabled",locale:"ru-RU",headerDateFormat:"ddd, d",showNowLine:!0,nowLineColor:"#FF0000",nowLineWidth:2,touch:!0,weekStarts:1,onEventMoved:o=>{const s=o.newStart.value.split("T")[1],i=o.newEnd.value.split("T")[1],k=o.e.data.start.value.split("T")[0],u=new Date(o.newStart.value).getDay();o.e.data.start_time=s.slice(0,5),o.e.data.end_time=i.slice(0,5);const S={day_of_week_id:u||7,start_time:s,end_time:i,conducted_date:k,in_rule:!1},y=o.e.data.lesson_id;we(y,S).then(()=>{console.log("Выполнили запрос")})},onEventResized:o=>{console.log("Event resized")}}),B=async o=>{const s=[];if(o)for(let i in o.week.days)o.week.days[i].lessons.forEach(k=>{const{start_time:u,end_time:S,...y}=k,P=`${o.week.days[i].day} ${u}`.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1T").replace(" ",""),r=`${o.week.days[i].day} ${S}`.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1T").replace(" ","");s.push({start:P,end:r,start_time:u.slice(0,5),end_time:S.slice(0,5),...y})});G.value=s},E=w({1:{day_of_week:"пн",date:""},2:{day_of_week:"вт",date:""},3:{day_of_week:"ср",date:""},4:{day_of_week:"чт",date:""},5:{day_of_week:"пт",date:""},6:{day_of_week:"сб",date:""},7:{day_of_week:"вс",date:""}}),z=o=>{if(v.query.start_date===void 0)return o;const s=v.query.start_date.slice(3);return He(s,o.split(".")[0])},x=(o,s,i,k)=>{V.value={lesson:s,fromColumnIndex:i,fromLessonIndex:k}},H=o=>o.slice(0,5),F=(o,s)=>{const{lesson:i,fromColumnIndex:k,fromLessonIndex:u}=V.value;if(k!==s){const S=f.value.week.days[k].lessons,y=f.value.week.days[s].lessons,P=E.value[s].date,r=P.getFullYear(),e=String(P.getMonth()+1).padStart(2,"0"),m=String(P.getDate()).padStart(2,"0"),l=`${r}-${e}-${m}`,L={day_of_week_id:parseInt(s),start_time:i.start_time,end_time:i.end_time,conducted_date:l,in_rule:!1},O=q=>{const[se,fe]=q.split(":").map(Number);return se*60+fe},ge=O(i.start_time),Pe=O(i.end_time);for(let q of y){const se=O(q.start_time);if(!(O(q.end_time)<=ge||se>=Pe)){alert("В этот день уже есть занятие на данное время");return}}let _e=y.length;for(let q=0;q<y.length;q++)if(O(y[q].start_time)>ge){_e=q;break}S.splice(u,1),y.splice(_e,0,i),we(i.lesson_id,L).then(()=>{console.log("Перенос осуществлен")})}V.value={lesson:null,fromColumnIndex:null,fromLessonIndex:null}},ee=()=>{_.value=!_.value,localStorage.setItem("breakMode",_.value),B(f.value)},U=()=>{j()},te=o=>{W.value.toggleLessonModals("buttons",o)},ae=o=>Math.max($e,$e*o),ne=o=>{d.push({query:{start_date:o}}).then(()=>{j()})},oe=o=>{const[s,i,k]=o.split(".").map(Number);let u=new Date(k,i-1,s);return u=u.getDay()||7,E.value[u].date=new Date(k,i-1,s),`${E.value[u].day_of_week}, ${s}`},j=async()=>{const o=v.query;if("start_date"in o){R.value=ue(o.start_date),Z.value.startDate=ue(o.start_date);const s=await Ue(o.start_date);B(s),f.value=s}else{const s=je(new Date);window.location.search=`?start_date=${Se(s)}`}},M=de(()=>{if(f.value&&f.value.week.days){for(let o in f.value.week.days){const s=f.value.week.days[o];if(s.lessons&&s.lessons.length)return!1}return!0}return!1});return We(()=>{j().then(()=>{B(f.value)}),localStorage.setItem("activePage","calendar-week")}),(o,s)=>(c(),g(I,null,[$(Re,null,{default:D(()=>[ce(t("section",Qt,[t("div",At,[t("div",Jt,[$(De,{"is-showed-break":!0,type:"calendar-week",onSetWeek:ne,onPaginateWeek:U,onToggleBreakMode:ee}),M.value?(c(),g("div",Kt,s[1]||(s[1]=[t("h1",{class:"text-title text-blue"},"Еще не запланировано ни одного занятия!",-1)]))):p("",!0),!_.value&&f.value||M.value?(c(),g("div",{key:1,class:C(["v-calendar-week__content scroll-container",{blur:M.value}])},[$(re,{name:"fade"},{default:D(()=>[f.value?(c(),g("table",Zt,[t("thead",null,[t("tr",ea,[(c(!0),g(I,null,Q(f.value.week.days,(i,k)=>(c(),g("th",{key:k},[t("div",ta,h(oe(i.day)),1)]))),128))])]),t("tbody",null,[f.value&&f.value.week?(c(),g("tr",{class:"calendar-row",key:f.value.week.start_date},[(c(!0),g(I,null,Q(f.value.week.days,(i,k)=>(c(),g("td",{key:k,class:"calendar-row__item",onDragover:s[0]||(s[0]=J(()=>{},["prevent"])),onDrop:u=>F(u,k)},[t("div",na,[(c(!0),g(I,null,Q(i.lessons,(u,S)=>(c(),g("div",{class:C(["calendar-card__content",{completed:u.completed}]),key:u.lesson_id,onClick:y=>te(u),draggable:"true",onDragstart:y=>x(y,u,k,S)},[$(re,{name:"flip"},{default:D(()=>[u?(c(),g("div",{key:0,class:C(["calendar-card__lesson",{trial:u.trial}]),style:ze({height:ae(u.duration),gap:`${Ma*u.duration}px`})},[t("p",ra,h(H(u.start_time))+" - "+h(H(u.end_time)),1),t("p",oa,h(u.student_name),1)],6)):p("",!0)]),_:2},1024)],42,sa))),128))])],40,aa))),128))])):p("",!0)])])):p("",!0)]),_:1})],2)):p("",!0),ce(t("div",ia,[G.value?(c(),K(T(Oe.DayPilotCalendar),{key:0,config:Z.value,events:G.value,ref:"calendarRef"},{event:D(({event:i})=>[t("div",{class:"event",onClick:k=>te(i.data)},[t("div",ua,[t("div",{class:C(["calendar-card__content",{completed:i.data.completed}])},[t("div",{class:C(["calendar-card__lesson",{trial:i.data.trial}])},[t("p",da,h(i.data.start_time)+" - "+h(i.data.end_time),1),t("p",ca,h(i.data.student_name),1)],2),i.data.break&&i.data.break.duration?(c(),g("div",va,h(i.data.break.duration),1)):p("",!0)],2)])],8,la)]),_:1},8,["config","events"])):p("",!0)],512),[[ye,_.value&&f.value&&!M.value]]),f.value?p("",!0):(c(),g("div",ma,s[2]||(s[2]=[t("div",{class:"loader"},null,-1)])))])])],512),[[ye,!T(n)]]),T(n)?(c(),g("section",ga,[t("div",_a,[t("div",fa,[$(De,{"is-showed-break":!0,type:"calendar-week",onSetWeek:ne,onPaginateWeek:U,onToggleBreakMode:ee}),f.value&&f.value.week?(c(),g("ul",ka,[(c(!0),g(I,null,Q(f.value.week.days,(i,k)=>(c(),g("li",{key:k,class:"v-calendar-week-mob__list-item"},[i?(c(),g("div",pa,[t("div",wa,[t("p",ya,h(z(i.day)),1),s[3]||(s[3]=t("svg",{class:"opacity-50",width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M4.66663 11.3333L11.3333 4.66663M11.3333 4.66663H4.66663M11.3333 4.66663V11.3333",stroke:"#717680","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),(c(!0),g(I,null,Q(i.lessons,u=>(c(),g("div",{class:"day__content",key:u.id},[t("div",{class:C(["day__lesson",{trial:u.trial}])},[s[5]||(s[5]=t("h4",{class:"day__lesson-name"}," Петров ",-1)),t("div",ha,[t("p",null,h(u.start_time),1),s[4]||(s[4]=t("p",null,"-",-1)),t("p",null,h(u.end_time),1)]),t("div",ba,h(u.student_name),1)],2)]))),128))])):p("",!0)]))),128))])):p("",!0)])])])):p("",!0)]),_:1}),$(Xe,{ref_key:"modalsContainer",ref:W},null,512)],64))}},Sa=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"}));export{De as _,Da as a,Sa as v};
