import{r,y as w,aO as le,o as k,f as j,w as C,d as e,c as T,Q as _,R as O,h as q,ap as D,b as N,F as J,A as ne,e as v,aP as ve,B as oe,n as M,aw as U,j as K,aQ as E,l as Q,k as W,aR as pe,aS as _e,W as V,C as ge,T as G,x as fe,z as be}from"./index-CvdVe2Gr.js";import{u as he}from"./useIsMobile-DCt3Ir8f.js";import{u as X}from"./studentsStore-DCLB3q5b.js";import{u as z,_ as Ce,a as ye}from"./v-students-table-Dm0RUBZP.js";import{_ as ke}from"./v-files-handler-BGQAXizc.js";const se="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%2010.8333V15.8333C15%2016.2754%2014.8244%2016.6993%2014.5118%2017.0118C14.1993%2017.3244%2013.7754%2017.5%2013.3333%2017.5H4.16667C3.72464%2017.5%203.30072%2017.3244%202.98816%2017.0118C2.67559%2016.6993%202.5%2016.2754%202.5%2015.8333V6.66667C2.5%206.22464%202.67559%205.80072%202.98816%205.48816C3.30072%205.17559%203.72464%205%204.16667%205H9.16667M12.5%202.5H17.5M17.5%202.5V7.5M17.5%202.5L8.33333%2011.6667'%20stroke='%23717680'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",we="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5%2017.5L13.875%2013.875M15.8333%209.16667C15.8333%2012.8486%2012.8486%2015.8333%209.16667%2015.8333C5.48477%2015.8333%202.5%2012.8486%202.5%209.16667C2.5%205.48477%205.48477%202.5%209.16667%202.5C12.8486%202.5%2015.8333%205.48477%2015.8333%209.16667Z'%20stroke='%23717680'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Se="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_9311_3631)'%3e%3cpath%20d='M14.1668%2017.5V15.8333C14.1668%2014.9493%2013.8156%2014.1014%2013.1905%2013.4763C12.5654%2012.8512%2011.7176%2012.5%2010.8335%2012.5H4.16683C3.28277%2012.5%202.43493%2012.8512%201.80981%2013.4763C1.18469%2014.1014%200.833496%2014.9493%200.833496%2015.8333V17.5M19.1668%2017.5V15.8333C19.1663%2015.0948%2018.9205%2014.3773%2018.468%2013.7936C18.0155%2013.2099%2017.3819%2012.793%2016.6668%2012.6083M13.3335%202.60833C14.0505%202.79192%2014.686%203.20892%2015.1399%203.79359C15.5937%204.37827%2015.84%205.09736%2015.84%205.8375C15.84%206.57764%2015.5937%207.29673%2015.1399%207.88141C14.686%208.46608%2014.0505%208.88308%2013.3335%209.06667M10.8335%205.83333C10.8335%207.67428%209.34111%209.16667%207.50016%209.16667C5.65921%209.16667%204.16683%207.67428%204.16683%205.83333C4.16683%203.99238%205.65921%202.5%207.50016%202.5C9.34111%202.5%2010.8335%203.99238%2010.8335%205.83333Z'%20stroke='white'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_9311_3631'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Me="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_9241_10005)'%3e%3cpath%20d='M13.3333%2013.3332L9.99997%209.9999M9.99997%209.9999L6.66663%2013.3332M9.99997%209.9999V17.4999M16.9916%2015.3249C17.8044%2014.8818%2018.4465%2014.1806%2018.8165%2013.3321C19.1866%2012.4835%2019.2635%2011.5359%2019.0351%2010.6388C18.8068%209.7417%2018.2862%208.94616%2017.5555%208.37778C16.8248%207.80939%2015.9257%207.50052%2015%207.4999H13.95C13.6977%206.52427%2013.2276%205.61852%2012.5749%204.85073C11.9222%204.08295%2011.104%203.47311%2010.1817%203.06708C9.25943%202.66104%208.25709%202.46937%207.25006%202.50647C6.24304%202.54358%205.25752%202.80849%204.36761%203.28129C3.47771%203.7541%202.70656%204.42249%202.11215%205.23622C1.51774%206.04996%201.11554%206.98785%200.935783%207.9794C0.756025%208.97095%200.803388%209.99035%201.07431%2010.961C1.34523%2011.9316%201.83267%2012.8281%202.49997%2013.5832'%20stroke='%23545F72'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_9241_10005'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",xe="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_9241_10005)'%3e%3cpath%20d='M13.3333%2013.3332L9.99997%209.9999M9.99997%209.9999L6.66663%2013.3332M9.99997%209.9999V17.4999M16.9916%2015.3249C17.8044%2014.8818%2018.4465%2014.1806%2018.8165%2013.3321C19.1866%2012.4835%2019.2635%2011.5359%2019.0351%2010.6388C18.8068%209.7417%2018.2862%208.94616%2017.5555%208.37778C16.8248%207.80939%2015.9257%207.50052%2015%207.4999H13.95C13.6977%206.52427%2013.2276%205.61852%2012.5749%204.85073C11.9222%204.08295%2011.104%203.47311%2010.1817%203.06708C9.25943%202.66104%208.25709%202.46937%207.25006%202.50647C6.24304%202.54358%205.25752%202.80849%204.36761%203.28129C3.47771%203.7541%202.70656%204.42249%202.11215%205.23622C1.51774%206.04996%201.11554%206.98785%200.935783%207.9794C0.756025%208.97095%200.803388%209.99035%201.07431%2010.961C1.34523%2011.9316%201.83267%2012.8281%202.49997%2013.5832'%20stroke='%23FF3A3A'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_9241_10005'%3e%3crect%20width='20'%20height='20'%20fill='%23FF3A3A'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",$e={class:"v-delete-modal"},Ve=["innerHTML"],Te={class:"v-delete-modal__rule"},Ae={key:0,class:"flex gap-3"},Ie={class:"styled-checkbox"},Ue={__name:"v-delete-modal",props:{group:Object,student:Array,type:String,student_amount:Number,group_amount:Number},setup($){const l=$,p=r(!1),a=z(),u=w(()=>(console.log(a.student),a.student)),g=r(null),d=r("Вы уверены, что хотите удалить");w(()=>u.value.length>1?"plural":u.value.length===1?"singular":"none"),le(()=>[l.student_amount,l.group_amount,l.type,l.student],()=>{console.log("Props changed:",l.type,l.student_amount,l.group_amount,l.student)},{immediate:!0});const y=w(()=>{let n="";return u.value.length===1&&l.type==="students"&&(n+=`ученика <p> (${u.value[0].student_name})?</p>`),u.value.length>1&&l.type==="students"&&(n+=`выбранных учеников <p>(${u.value.length})?</p>`),l.type==="groups"&&u.value.length===1&&(n+=`группу <p>(${u.value[0].student_name})?</p>`),l.type==="groups"&&u.value.length>1&&(n+=`группы <p>(${u.value.length})?</p>`),d.value+" "+n}),f=()=>{console.log(l.type)};return(n,o)=>(k(),j(D,{ref_key:"customModal",ref:g},{modal:C(()=>[e("div",$e,[e("h1",{class:"modal-title",innerHTML:y.value},null,8,Ve),o[3]||(o[3]=e("div",{class:"caption"},"Информация о учениках будет удалена безвозратно.",-1)),e("div",Te,[$.group?(k(),T("div",Ae,[e("div",Ie,[_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=m=>p.value=m),type:"checkbox",id:"delete-info"},null,512),[[O,p.value]]),o[1]||(o[1]=e("label",{for:"delete-info"},null,-1))]),o[2]||(o[2]=e("label",{for:"delete"},"Удалить информацию о всех учениках выбранной группы",-1))])):q("",!0)])])]),button:C(()=>[e("button",{class:"custom-btn red",onClick:f},"Удалить")]),_:1},512))}},Ge={class:"v-students-cards"},Pe={class:"v-students-cards__list students-list"},je={__name:"v-students-cards",props:{items:{type:Array,default:()=>[]},type:String},emits:["student-selected","toggle-modal"],setup($,{expose:l,emit:p}){const a=p,u=$,g=z();r({editGroup:!1,deleteModal:!1});const d=r(null),y=r(null),f=r(!1),n=r({}),o=(b,x)=>{const A=b.id;n.value[A]=x,x?g.pushDeletedStudent(b):g.removeDeletedStudent(A);const h=Object.values(n.value).some(P=>P);console.log(n.value),a("student-selected",h,n.value)},m=b=>{u.type==="groups"?(d.value=u.items.find(x=>x.id===b),g.selected_group=d.value,a("toggle-modal","editGroup")):console.log("Редактировать студента:",b)},s=b=>u.type==="groups"?[{title:"Количество учеников",value:u.items[b].students_count},{title:"Ставка",value:u.items[b].rate},{title:"Баланс",value:u.items[b].balance},{title:"Статус ДЗ",value:u.items[b].homework},{title:"Комментарий",value:u.items[b].comment}]:[],i=b=>{g.setDeletedStudent(b),a("toggle-modal","deleteModal")};return l({selectAllStudents:b=>{for(const x in n.value)n.value[x]=b;f.value=!f.value,y.value.forEach(x=>{x.selectStudent(f.value)})},handleDeleteStudent:i,selectedStudents:n}),N(()=>{u.items.forEach(b=>{n.value[b.id]=!1})}),(b,x)=>(k(),T("div",Ge,[e("ul",Pe,[(k(!0),T(J,null,ne($.items,(A,h)=>(k(),T("li",{class:"v-students-cards__list-item",key:A.id},[v(ve,{ref_for:!0,ref_key:"studentCardsRef",ref:y,item:A,"info-items":s(h),onSelected:P=>o(A,P),onEdit:m,onDelete:i},null,8,["item","info-items","onSelected"])]))),128))])]))}},De={class:"v-group-modal"},Fe={class:"modal-field col"},Le={key:0,class:"error-text"},Be={class:"v-group-modal__list mt-5"},He={class:"styled-checkbox"},Ee=["onUpdate:modelValue","id"],Oe=["for"],Ne=["for"],ze={__name:"v-group-modal",props:{},setup($){const l=z(),p=r({group_name:""}),a=r({}),u=r(!1),g=w(()=>l.student),d=w(()=>u.value&&!p.value.group_name),y=()=>{if(u.value=!0,!p.value.group_name)return;const f=Object.keys(a.value).filter(o=>a.value[o]),n={name:p.value.group_name,students:f};console.log("Создание группы:",n)};return N(()=>{g.value.forEach(f=>{a.value[f.id]=!0})}),(f,n)=>(k(),j(D,{onSubmit:y},{modal:C(()=>[e("div",De,[n[2]||(n[2]=e("h2",{class:"modal-title"},"Создание группы",-1)),e("form",{onSubmit:oe(y,["prevent"])},[e("div",Fe,[n[1]||(n[1]=e("span",{class:"modal-field__title"},"Название группы",-1)),_(e("input",{type:"text",class:M(["custom-input",{error:d.value}]),placeholder:"Название группы","onUpdate:modelValue":n[0]||(n[0]=o=>p.value.group_name=o)},null,2),[[U,p.value.group_name,void 0,{trim:!0}]]),d.value?(k(),T("span",Le," Название группы обязательно ")):q("",!0)]),e("ul",Be,[(k(!0),T(J,null,ne(g.value,o=>(k(),T("li",{class:"v-group-modal__list-item",key:o.id},[e("div",He,[_(e("input",{type:"checkbox","onUpdate:modelValue":m=>a.value[o.id]=m,id:"student-"+o.id,checked:""},null,8,Ee),[[O,a.value[o.id]]]),e("label",{for:"student-"+o.id},null,8,Oe)]),e("label",{class:"white-bg",for:"student-"+o.id},K(o.student_name),9,Ne)]))),128))])],32)])]),_:1}))}},Re={class:"v-mass-addition"},Ze={__name:"v-mass-addition",setup($){const l=r([]);return(p,a)=>(k(),j(D,null,{modal:C(()=>[e("div",Re,[a[1]||(a[1]=e("h2",{class:"modal-title"},"Массовое добавление учеников",-1)),a[2]||(a[2]=e("p",{class:"modal-subtitle mt-2 text-center"},"Скачайте и загрузите отредактированный шаблон",-1)),v(ke,{showDropArea:!0,modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=u=>l.value=u)},null,8,["modelValue"])])]),button:C(()=>[e("button",{class:M(["custom-btn blue",{unactive:!l.value.length}])}," Сохранить ",2)]),_:1}))}},Qe={class:"v-add-students-modal"},We={class:"modal-field col"},qe={class:"modal-field col"},Je={class:"modal-field col"},Ke={class:"modal-field col"},Xe={class:"modal-field__block connection-type"},Ye={class:"modal-field col"},et={class:"modal-field__block"},tt={class:"modal-field col"},st={class:"modal-field col"},lt={__name:"v-add-students-modal",setup($){const l=X(),p=w(()=>l.typeConnect),a=l.rate,u=l.currency,g=l.timeZone,d=r({student_id:null,type_connect_id:0,student_name:null,phone_number:null,parent_name:"",parent_phone_number:"",source:null,currency_id:1,rate:null,timezone_id:1,commission:null,goal:"",balance:0,subscription_lessons:0,subscription_discount:0,subscription_price:0,is_subscription:!1,trial:!1,cost_lesson:0,cost_lesson_one_time:0,time_rate:0}),y=["student_name","phone_number","type_connect_id","currency_id","rate","timezone_id"],f=w(()=>{const m=y.every(s=>{const i=d.value[s];return s.endsWith("_id")?i!=null:i!=null&&i!==""});return console.log("Form validation result:",m),m}),n=()=>{console.log("Submitted data:",JSON.stringify(d.value,null,2))},o=async()=>{await l.setTypeConnects()};return N(()=>{o()}),(m,s)=>(k(),j(D,{onSubmit:n},{modal:C(()=>[e("div",Qe,[s[17]||(s[17]=e("h2",{class:"modal-title mb-4"},"Добавление ученика",-1)),e("form",{onSubmit:oe(n,["prevent"]),class:"modal-form",method:"POST"},[e("div",We,[s[10]||(s[10]=e("div",{class:"modal-field__title"},"Имя ученика",-1)),_(e("input",{class:"custom-input",type:"text",placeholder:"Имя ученика","onUpdate:modelValue":s[0]||(s[0]=i=>d.value.student_name=i)},null,512),[[U,d.value.student_name]])]),e("div",qe,[s[11]||(s[11]=e("div",{class:"modal-field__title"},"Источник",-1)),_(e("input",{class:"custom-input",type:"text",placeholder:"Источник","onUpdate:modelValue":s[1]||(s[1]=i=>d.value.source=i)},null,512),[[U,d.value.source]])]),e("div",Je,[s[12]||(s[12]=e("div",{class:"modal-field__title"},"Цель занятий",-1)),_(e("input",{class:"custom-input",type:"text",placeholder:"Цель занятий","onUpdate:modelValue":s[2]||(s[2]=i=>d.value.goal=i)},null,512),[[U,d.value.goal]])]),e("div",Ke,[s[13]||(s[13]=e("div",{class:"modal-field__title"},"Способ связи",-1)),e("div",Xe,[_(e("input",{class:"custom-input",type:"text",placeholder:"Номер телефона","onUpdate:modelValue":s[3]||(s[3]=i=>d.value.phone_number=i)},null,512),[[U,d.value.phone_number]]),v(E,{items:p.value,modelValue:d.value.type_connect_id,"onUpdate:modelValue":s[4]||(s[4]=i=>d.value.type_connect_id=i)},null,8,["items","modelValue"])])]),e("div",Ye,[s[14]||(s[14]=e("div",{class:"modal-field__title"},"Ставка",-1)),e("div",et,[_(e("input",{class:"custom-input",type:"number",placeholder:"сумма","onUpdate:modelValue":s[5]||(s[5]=i=>d.value.rate=i)},null,512),[[U,d.value.rate,void 0,{number:!0}]]),v(E,{items:Q(a),modelValue:d.value.time_rate,"onUpdate:modelValue":s[6]||(s[6]=i=>d.value.time_rate=i)},null,8,["items","modelValue"]),v(E,{items:Q(u),modelValue:d.value.currency_id,"onUpdate:modelValue":s[7]||(s[7]=i=>d.value.currency_id=i)},null,8,["items","modelValue"])])]),e("div",tt,[s[15]||(s[15]=e("div",{class:"modal-field__title"},"Комиссия, ₽",-1)),_(e("input",{class:"custom-input",type:"number",placeholder:"10","onUpdate:modelValue":s[8]||(s[8]=i=>d.value.commission=i)},null,512),[[U,d.value.commission,void 0,{number:!0}]])]),e("div",st,[s[16]||(s[16]=e("div",{class:"modal-field__title"},"Часовой пояс",-1)),v(E,{items:Q(g),modelValue:d.value.timezone_id,"onUpdate:modelValue":s[9]||(s[9]=i=>d.value.timezone_id=i)},null,8,["items","modelValue"])])],32)])]),button:C(()=>[e("button",{class:M(["custom-btn blue",{unactive:!f.value}]),onClick:n},"Сохранить",2),W(" "+K(f.value),1)]),_:1}))}},nt={class:"v-archive-modal"},ot=["innerHTML"],ut={class:"v-archive-modal__rule"},at={class:"flex gap-3"},dt={class:"styled-checkbox"},it={__name:"v-archive-student-modal",props:{group:Object,student:Number,type:String,student_amount:Number,group_amount:Number},setup($){const l=$,p=r(!1),a=z(),u=X(),g=r(null),d=r("Вы уверены, что хотите архивировать");le(()=>[l.student_amount,l.group_amount,l.type,l.student],()=>{console.log("Props changed:",l.type,l.student_amount,l.group_amount,l.student)},{immediate:!0});const y=w(()=>{let n="";return a.student.length===1&&l.type==="students"&&(n+=`<p> ученика (${a.student[0].student_name})?</p>`),a.student.length>1&&l.type==="students"&&(n+=`выбранных  <p> учеников (${a.student.length})?</p>`),l.type==="groups"&&a.student.length===1&&(n+=`<p> группу (${a.student[0].group_name})?</p>`),l.type==="groups"&&a.student.length>1&&(n+=`<p> группы (${a.student.length})?</p>`),d.value+" "+n}),f=async()=>{var o;const n=[...a.student];try{if(await Promise.all(n.map(m=>pe(m.id))),p.value&&l.type==="groups"){const m=(o=l.group)==null?void 0:o.id;m&&(u.students=u.students.filter(s=>s.group_id!==m))}else{const m=n.map(s=>s.id);console.log("Студенты полсе архивации - ",u.students.filter(s=>!m.includes(s.id))),u.students=u.students.filter(s=>!m.includes(s.id))}g.value.close()}catch(m){console.error("Ошибка при архивировании:",m)}};return(n,o)=>(k(),j(D,{ref_key:"customModal",ref:g},{modal:C(()=>[e("div",nt,[e("h1",{class:"modal-title",innerHTML:y.value},null,8,ot),o[3]||(o[3]=e("div",{class:"caption"},"Вы сможете восстановить ученика из архива.",-1)),e("div",ut,[e("div",at,[e("div",dt,[_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=m=>p.value=m),type:"checkbox",id:"delete-info"},null,512),[[O,p.value]]),o[1]||(o[1]=e("label",{for:"delete-info"},null,-1))]),o[2]||(o[2]=e("label",{for:"delete-info"},"Архивировать информацию о всех учениках выбранной группы",-1))])])])]),button:C(()=>[e("button",{class:"custom-btn blue",onClick:f},"Архивировать")]),_:1},512))}},rt={class:"v-students"},ct={class:"container"},mt={class:"v-students__container layout"},vt={class:"v-students__header"},pt={class:"v-students__header-block"},_t={class:"flex gap-3 justify-between"},gt={class:"v-students__title text-title"},ft={class:"flex gap-4 justify-between"},bt={class:"v-students__header-buttons"},ht={key:0,class:"v-students__menu"},Ct={class:"v-students__menu-block"},yt={class:"v-students__menu-buttons"},kt={class:"v-students__menu-buttons"},wt={class:"v-students__menu-block"},St={key:1,class:"v-students__menu"},Mt={key:0,class:"flex gap-3"},xt={class:"styled-checkbox"},$t={class:"v-students__menu-block"},Vt={class:"loader-container"},Tt={class:"layout"},jt={__name:"v-students",setup($){const l=he(480),p=r(!1),a=r(null),u=r(null),g=r([]),d=r([]),y=r(!0),f=r(!1),n=r(!0),o=r(!1),m=r(!1),s=fe(),i=X(),F=w(()=>n.value?"students":o.value?"groups":null),b=w(()=>g.value.length<1?[I.value.filter(t=>t.id===g.value[0])]:null),x=r(null),A=r(null),h=r({archive:!1,editGroup:!1,addStudents:!1,massAddition:!1,groupModal:!1,deleteModal:!1}),P=r([{id:1,group_name:"ЕГЭ",students_count:10,rate:"2000 ₽ / 1,5 часа",balance:1200,homework:"Ждёт ответа",comment:"Работаем по скидке 20% (для всех)",students:[{id:1,name:"Алексей"}]},{id:2,group_name:"ОГЭ",students_count:10,rate:"2000 ₽ / 1,5 часа",balance:1200,homework:"Ждёт ответа",comment:"Работаем по скидке 20% (для всех)",students:[{id:2,name:"Тимур"}]}]),I=w(()=>(i.students.length||(m.value=!1),i.students)),ue=w(()=>F.value==="students"?"Ученики":"Группы"),Y=w(()=>o.value?P.value:I.value),ee=w(()=>o.value?"groups":"students"),L=r(!1),ae=c=>{o.value?S("editGroup"):(console.log(c),s.push({name:"student",params:{id:c.id}}))},de=()=>{a.value.selectAllStudents(p.value),m.value=p.value},B=c=>{y.value=c==="table",f.value=c==="cards",console.log(c),localStorage.setItem("menu",c)},te=(c,t)=>{m.value=c,g.value=t},R=c=>{n.value=c==="students",o.value=c==="groups",localStorage.setItem("menuType",c)},ie=()=>{console.log(u.value.selectedGroupStudents);const c=y.value?u.value.selectedGroupStudents:a.value.selectedGroupStudents,t=[];for(const H in c)t.push(I.value.filter(Z=>Z.id==H)[0]);d.value=t,S("groupModal")},S=c=>{console.log(c,"- ОКНО"),console.log(c,h.value[c]),h.value[c]=!h.value[c]},re=()=>{const c=Object.keys(g.value).filter(t=>g.value[t]);x.value=c.length,h.value.deleteModal=!0},ce=()=>{const c=localStorage.getItem("menu"),t=localStorage.getItem("menuType");o.value=t==="groups",n.value=t==="students",c&&B(c),console.log(l.isMobile.value),l.isMobile.value?B("cards"):t&&R(t)},me=async()=>{L.value=!0,await i.getStudents(),I.value=i.students,L.value=!1};return N(()=>{ce(),me()}),(c,t)=>{const H=be("router-link");return k(),T(J,null,[v(ge,null,{default:C(()=>[e("section",rt,[e("div",ct,[e("div",mt,[e("div",vt,[e("div",pt,[e("div",_t,[e("h1",gt,K(ue.value),1)]),e("div",ft,[v(H,{to:{name:"archive_students"},class:"v-students__menu-link mob"},{default:C(()=>t[14]||(t[14]=[e("img",{src:se,alt:""},null,-1),W(" Архив ")])),_:1}),e("div",bt,[e("button",{class:"v-students__header-button custom-btn white",onClick:t[0]||(t[0]=()=>S("massAddition"))},t[15]||(t[15]=[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("g",{"clip-path":"url(#clip0_9241_10005)"},[e("path",{d:"M13.3333 13.3332L9.99997 9.9999M9.99997 9.9999L6.66663 13.3332M9.99997 9.9999V17.4999M16.9916 15.3249C17.8044 14.8818 18.4465 14.1806 18.8165 13.3321C19.1866 12.4835 19.2635 11.5359 19.0351 10.6388C18.8068 9.7417 18.2862 8.94616 17.5555 8.37778C16.8248 7.80939 15.9257 7.50052 15 7.4999H13.95C13.6977 6.52427 13.2276 5.61852 12.5749 4.85073C11.9222 4.08295 11.104 3.47311 10.1817 3.06708C9.25943 2.66104 8.25709 2.46937 7.25006 2.50647C6.24304 2.54358 5.25752 2.80849 4.36761 3.28129C3.47771 3.7541 2.70656 4.42249 2.11215 5.23622C1.51774 6.04996 1.11554 6.98785 0.935783 7.9794C0.756025 8.97095 0.803388 9.99035 1.07431 10.961C1.34523 11.9316 1.83267 12.8281 2.49997 13.5832",stroke:"#545F72","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"})]),e("defs",null,[e("clipPath",{id:"clip0_9241_10005"},[e("rect",{width:"20",height:"20",fill:"white"})])])],-1),e("span",null," Массововое добавление учеников ",-1)])),e("button",{class:"v-students__header-button custom-btn blue",onClick:t[1]||(t[1]=()=>S("addStudents"))},t[16]||(t[16]=[e("img",{src:_e,alt:""},null,-1),e("span",null," Ученик ",-1)]))])])])]),m.value?(k(),T("div",St,[f.value?(k(),T("div",Mt,[e("div",xt,[_(e("input",{type:"checkbox",id:"select-all",onChange:de,"onUpdate:modelValue":t[6]||(t[6]=Z=>p.value=Z)},null,544),[[O,p.value]]),t[19]||(t[19]=e("label",{class:"white-bg",for:"select-all"},null,-1))]),t[20]||(t[20]=e("label",{for:"select-all",class:"subtitle"},"Выбрать все",-1))])):q("",!0),e("div",$t,[_(e("button",{class:"custom-btn blue",onClick:ie},t[21]||(t[21]=[e("img",{src:Se,alt:""},null,-1),e("span",null," Создать группу ",-1)]),512),[[V,n.value]]),e("button",{class:"custom-btn white",onClick:t[7]||(t[7]=()=>S("archive"))},t[22]||(t[22]=[e("img",{src:Me,alt:""},null,-1),e("span",null," Архивировать ",-1)])),e("button",{class:"custom-btn white",onClick:re},t[23]||(t[23]=[e("img",{src:xe,alt:""},null,-1),e("span",{class:"text-red"}," Удалить ",-1)]))])])):(k(),T("div",ht,[e("div",Ct,[e("div",yt,[e("button",{class:M(["v-students__menu-button",{active:y.value}]),onClick:t[2]||(t[2]=()=>B("table"))}," Таблица ",2),e("button",{class:M(["v-students__menu-button",{active:f.value}]),onClick:t[3]||(t[3]=()=>B("cards"))}," Карточки ",2)]),e("div",kt,[e("button",{class:M(["v-students__menu-button",{active:o.value}]),onClick:t[4]||(t[4]=()=>R("groups"))}," Группы ",2),e("button",{class:M(["v-students__menu-button",{active:n.value}]),onClick:t[5]||(t[5]=()=>R("students"))}," Ученики ",2)])]),e("div",wt,[v(H,{to:{name:"archive_students"},class:"v-students__menu-link"},{default:C(()=>t[17]||(t[17]=[e("img",{src:se,alt:""},null,-1),W(" Перейти в архив ")])),_:1}),t[18]||(t[18]=e("div",{class:"v-students__menu-search"},[e("button",{class:"v-students__menu-search-button"},[e("img",{src:we,alt:""})]),e("input",{type:"text",class:"v-students__menu-search-input",placeholder:"Поиск"})],-1))])])),_(v(Ce,{onStudentSelected:te,onEditItem:ae,onToggleModal:S,ref_key:"studentsTable",ref:u,items:Y.value,type:ee.value},null,8,["items","type"]),[[V,y.value&&I.value.length]]),_(v(je,{ref_key:"studentsCards",ref:a,items:Y.value,onStudentSelected:te,type:ee.value,onToggleModal:S},null,8,["items","type"]),[[V,f.value&&I.value.length]]),_(e("div",Vt,t[24]||(t[24]=[e("div",{class:"loader"},null,-1)]),512),[[V,!I.value.length&&L.value]])]),_(e("div",Tt,t[25]||(t[25]=[e("div",{class:"null-screen"},[e("h1",null,"Ещё не добавлено ни одного ученика")],-1)]),512),[[V,!I.value.length&&!L.value]])])])]),_:1}),v(G,{name:"fade"},{default:C(()=>[_(v(lt,{class:M({"modal-active":h.value.addStudents}),onClose:t[8]||(t[8]=()=>S("addStudents"))},null,8,["class"]),[[V,h.value.addStudents]])]),_:1}),v(G,{name:"fade"},{default:C(()=>[_(v(Ze,{class:M({"modal-active":h.value.massAddition}),onClose:t[9]||(t[9]=()=>S("massAddition"))},null,8,["class"]),[[V,h.value.massAddition]])]),_:1}),v(G,{name:"fade"},{default:C(()=>[_(v(ze,{class:M({"modal-active":h.value.groupModal}),onClose:t[10]||(t[10]=()=>S("groupModal")),students:d.value},null,8,["class","students"]),[[V,h.value.groupModal]])]),_:1}),v(G,{name:"fade"},{default:C(()=>[_(v(Ue,{class:M({"modal-active":h.value.deleteModal}),onClose:t[11]||(t[11]=()=>S("deleteModal")),type:F.value,student:b.value,student_amount:x.value,group_amount:A.value},null,8,["class","type","student","student_amount","group_amount"]),[[V,h.value.deleteModal]])]),_:1}),v(G,{name:"fade"},{default:C(()=>[_(v(it,{class:M({"modal-active":h.value.archive}),onClose:t[12]||(t[12]=()=>S("archive")),type:F.value},null,8,["class","type"]),[[V,h.value.archive]])]),_:1}),v(G,{name:"fade"},{default:C(()=>[_(v(ye,{class:M({"modal-active":h.value.editGroup}),onClose:t[13]||(t[13]=()=>S("editGroup"))},null,8,["class"]),[[V,h.value.editGroup]])]),_:1})],64)}}};export{jt as default};
