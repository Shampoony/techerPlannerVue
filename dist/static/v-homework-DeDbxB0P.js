import{r as a,b3 as K,o as s,c as m,d as e,Q as _,aw as V,B as H,a as X,W as E,F as N,az as P,f as C,w as L,e as F,b4 as Y,y as x,b as Z,j as T,n as y,h as k,k as ee,l as R,U as te,O as le,R as W,aQ as j,T as oe}from"./index-DHmhvhj-.js";import{_ as M,a as se}from"./v-files-handler-A2cXIV4h.js";const Re="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='39.5'%20y='0.5'%20width='39'%20height='39'%20rx='19.5'%20transform='rotate(90%2039.5%200.5)'%20fill='%23F3F4F6'/%3e%3crect%20x='39.5'%20y='0.5'%20width='39'%20height='39'%20rx='19.5'%20transform='rotate(90%2039.5%200.5)'%20stroke='%23F3F4F6'/%3e%3cpath%20d='M15.7578%2020.0001H24.2427M24.2427%2020.0001L20.0003%2015.7577M24.2427%2020.0001L20.0003%2024.2425'%20stroke='%23717680'%20stroke-width='1.85556'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",We="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='40'%20width='40'%20height='40'%20rx='20'%20transform='rotate(90%2040%200)'%20fill='white'%20fill-opacity='0.08'/%3e%3cpath%20d='M15.7573%2020.0001H24.2422M24.2422%2020.0001L19.9998%2015.7577M24.2422%2020.0001L19.9998%2024.2425'%20stroke='%23E9EAEB'%20stroke-width='1.85556'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ae={class:"input-field"},ne=["placeholder"],ie={class:"add-field__field"},re={class:"add-field__block"},de=["placeholder"],je={__name:"v-add-field",props:{placeholder:{type:String,default:"Введите значение"}},emits:["submit"],setup(r,{emit:d}){const p=d,n=a(!1),u=a(""),f=a(null),b=()=>{n.value=!n.value,n.value&&P(()=>{const h=document.querySelector(".add-field__input");h&&h.focus()})},v=h=>{n.value=!1},c=()=>{u.value.trim()&&(p("submit",u.value.trim()),u.value="",n.value=!1)};return(h,o)=>{const w=K("click-outside");return s(),m(N,null,[e("form",{onSubmit:H(c,["prevent"])},[e("div",ae,[_(e("input",{class:"input-field__input",type:"text",placeholder:r.placeholder,"onUpdate:modelValue":o[0]||(o[0]=g=>u.value=g)},null,8,ne),[[V,u.value]]),o[2]||(o[2]=e("button",{type:"submit",class:"input-field__submit"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[e("path",{d:"M7.99975 12.2424V3.75751M7.99975 3.75751L3.75732 7.99993M7.99975 3.75751L12.2422 7.99993",stroke:"#717680","stroke-width":"1.85556","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])],32),_((s(),m("div",{class:"add-field",ref_key:"addFieldRef",ref:f},[e("button",{class:"add-field__button custom-btn light-blue",onClick:b}," Добавить "),_(e("div",ie,[e("form",{method:"POST",onSubmit:H(c,["prevent"])},[e("div",re,[_(e("input",{class:"add-field__input",type:"text",placeholder:r.placeholder,"onUpdate:modelValue":o[1]||(o[1]=g=>u.value=g)},null,8,de),[[V,u.value]]),o[3]||(o[3]=X('<button type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none"><rect width="28" height="28" rx="14" fill="#1D4ECC"></rect><path d="M14 6L14 22" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M13.6572 6L8.00037 11.6569" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M14 6L19.6569 11.6569" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M14 18L14 22" stroke="white" stroke-width="2" stroke-linecap="round"></path><path d="M14 18L14 22" stroke="white" stroke-width="2" stroke-linecap="round"></path></svg></button>',1))])],32)],512),[[E,n.value]])])),[[w,v]])],64)}}},ue={class:"v-files-modal"},ve={class:"v-files-modal__container"},me={__name:"v-files-modal",props:{initialFiles:{type:Array,default:()=>[]}},emits:["saveFiles"],setup(r,{emit:d}){const p=r,n=a(null),u=d,f=a([...p.initialFiles]),b=a(null),v=()=>{n.value&&n.value.close()},c=()=>{u("saveFiles",f.value),v()},h=o=>{f.value=o};return(o,w)=>(s(),C(Y,{ref_key:"modalRef",ref:n},{default:L(()=>[e("div",ue,[e("div",ve,[w[0]||(w[0]=e("h2",{class:"v-files-modal__title modal-title"},"Загрузка файла",-1)),F(M,{ref_key:"fileHandler",ref:b,"show-drop-area":!0,onFileAdded:h},null,512),e("div",{class:"v-files-modal__buttons"},[e("button",{class:"v-files-modal__button custom-btn white",onClick:v}," Отменить "),e("button",{class:"v-files-modal__button custom-btn blue",onClick:c}," Сохранить ")])])])]),_:1},512))}},ce="data:image/svg+xml,%3csvg%20width='36'%20height='36'%20viewBox='0%200%2036%2036'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='36'%20height='36'%20rx='8'%20fill='%233B414A'/%3e%3cpath%20d='M18.833%209.66663H19.0603C21.778%209.66663%2023.1368%209.66663%2024.0805%2010.3315C24.3508%2010.522%2024.5909%2010.7479%2024.7933%2011.0024C25.4997%2011.8905%2025.4997%2013.1694%2025.4997%2015.7272V17.8484C25.4997%2020.3178%2025.4997%2021.5524%2025.1089%2022.5385C24.4807%2024.1238%2023.1521%2025.3742%2021.4677%2025.9655C20.42%2026.3333%2019.1082%2026.3333%2016.4845%2026.3333C14.9853%2026.3333%2014.2357%2026.3333%2013.637%2026.1231C12.6745%2025.7853%2011.9153%2025.0707%2011.5563%2024.1648C11.333%2023.6014%2011.333%2022.8958%2011.333%2021.4848V18'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.4993%2018C25.4993%2019.5341%2024.2557%2020.7778%2022.7216%2020.7778C22.1668%2020.7778%2021.5127%2020.6806%2020.9732%2020.8251C20.4939%2020.9535%2020.1195%2021.3279%2019.9911%2021.8072C19.8466%2022.3466%2019.9438%2023.0007%2019.9438%2023.5556C19.9438%2025.0897%2018.7001%2026.3333%2017.166%2026.3333'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.1667%2013L10.5%2013M13.8333%209.66663V16.3333'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",he={class:"v-home__lesson-homework v-home__lesson-sec"},ke={class:"v-home__lesson-homework-row"},pe={class:"v-home__subtitle subtitle"},fe={key:0,class:"v-home__lesson-homework-buttons"},_e={key:0,class:"v-home__lesson-homework-new"},we={key:2,class:"v-home__lesson-homework-deadline"},ge={class:"v-home__lesson-homework-block"},be={key:0,class:"flex gap-3 items-center"},xe={class:"flex gap-3 items-center"},ye={class:"styled-checkbox"},Ce={class:"inline-flex gap-3 h-full"},Fe={key:3,class:"flex items-center gap-3"},Me={class:"styled-checkbox"},Ve={key:1,class:"v-home__lesson-homework-prev"},De={class:"v-home__lesson-homework-prev-header"},Le={class:"block-description"},Se={key:0,class:"flex gap-3 items-center"},$e=["value"],Be={class:"v-home__lesson-homework-footer"},Ue={class:"flex gap-2 items-center v-home__lesson-homework-mark"},Ee={__name:"v-homework",props:{mode:{type:String,default:()=>"all"},title:String,subtitle:String,comment:String,mark:Number,homeWorkDeadline:Date},setup(r){const d=r,p=a([]),n=a([]),u=a([]),f=a(null),b=a(new Date),v=a(""),c=a(!1),h=a(!1),o=a(d.mode==="all"),w=a(null),g=a({files:!1}),A=x(()=>d.title||"Домашнее задание"),O=x(()=>d.subtitle||""),I=x(()=>d.homeWorkDeadline?d.homeWorkDeadline.toISOString().split("T")[0]:""),D=x(()=>d.mode==="completed"),S=x(()=>d.homeWorkDeadline?d.homeWorkDeadline>new Date:null),z=x(()=>v.value.length>0||w.value!==null&&w.value!==2),Q=i=>{w.value=i},q=()=>{g.value.files=!0},$=()=>{g.value.files=!1},B=(i=!0)=>{o.value=i},U=i=>{f.value&&f.value.handlePaste(i)&&i.preventDefault()},G=i=>{p.value=[...i],f.value.internalFiles=i,P(()=>{var t,l;(l=(t=f.value)==null?void 0:t.$forceUpdate)==null||l.call(t)}),$()},J=i=>{console.log(i,p.value),p.value=p.value.filter(t=>t.id!==i.id),console.log(p.value)};return Z(()=>{}),(i,t)=>(s(),m(N,null,[e("div",he,[e("div",ke,[e("h2",pe,T(A.value),1),r.mode==="all"?(s(),m("div",fe,[e("div",{class:y(["v-home__lesson-homework-header-button",{active:!o.value}]),onClick:t[0]||(t[0]=()=>B(!1))}," Предыдущее ",2),e("div",{class:y(["v-home__lesson-homework-header-button",{active:o.value}]),onClick:B}," Новое ",2)])):k("",!0)]),o.value?(s(),m("div",_e,[c.value?k("",!0):_((s(),m("textarea",{key:0,class:"v-home__lesson-homework-text","onUpdate:modelValue":t[1]||(t[1]=l=>v.value=l),onPaste:U,placeholder:"Введите текст домашнего задания. Для вставки файлов используйте Ctrl+V"},null,544)),[[V,v.value]]),c.value?k("",!0):(s(),C(M,{key:1,ref_key:"fileHandler",ref:f,modelValue:p.value,onFileRemoved:J},null,8,["modelValue"])),!c.value&&r.mode==="all"?(s(),m("div",we,[e("div",ge,[h.value?k("",!0):(s(),m("div",be,[t[10]||(t[10]=ee(" Дедлайн ")),F(R(le),{class:"custom-datepicker",modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=l=>b.value=l),locale:"ru-ru","auto-apply":!0,format:R(te)},{"clear-icon":L(({clear:l})=>t[9]||(t[9]=[])),_:1},8,["modelValue","format"])])),e("div",xe,[e("div",ye,[_(e("input",{id:"next-lesson",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>h.value=l)},null,512),[[W,h.value]]),t[11]||(t[11]=e("label",{for:"next-lesson"},null,-1))]),t[12]||(t[12]=e("label",{for:"next-lesson"},"До следующего занятия",-1))])]),e("div",Ce,[e("div",{class:"file-input",onClick:q},t[13]||(t[13]=[e("img",{class:"day-el",src:se,alt:""},null,-1),e("img",{class:"night-el",src:ce,alt:""},null,-1)])),e("button",{class:y(["v-home__lesson-homework-button save",{unactive:!v.value.length}])}," Сохранить ",2)])])):k("",!0),r.mode==="all"?(s(),m("div",Fe,[e("div",Me,[_(e("input",{type:"checkbox",id:"no-homework","onUpdate:modelValue":t[4]||(t[4]=l=>c.value=l)},null,512),[[W,c.value]]),t[14]||(t[14]=e("label",{for:"no-homework"},null,-1))]),t[15]||(t[15]=e("label",{for:"no-homework"},"Без задания",-1))])):k("",!0),e("button",{class:y(["v-home__lesson-homework-button save mob",{unactive:!v.value.length}])}," Сохранить ",2)])):k("",!0),o.value?k("",!0):(s(),m("div",Ve,[e("div",De,[e("p",Le,T(O.value),1),h.value?k("",!0):(s(),m("div",Se,[t[16]||(t[16]=e("p",{class:"block-description"},"Дедлайн",-1)),e("input",{class:y(["styled-datepicker",{red:S.value,green:!S.value}]),type:"date",readonly:"",value:I.value},null,10,$e)]))]),F(M,{files:n.value,"onUpdate:files":t[5]||(t[5]=l=>n.value=l)},null,8,["files"]),t[18]||(t[18]=e("h3",{class:"v-home__lesson-homework-prev-title"},"Ответ ученика",-1)),F(M,{files:u.value,"onUpdate:files":t[6]||(t[6]=l=>u.value=l)},null,8,["files"]),!c.value&&r.mode!=="completed"?_((s(),m("textarea",{key:0,class:"v-home__lesson-homework-text","onUpdate:modelValue":t[7]||(t[7]=l=>v.value=l),onPaste:U,placeholder:"Ваш комментарий"},null,544)),[[V,v.value]]):k("",!0),e("div",Be,[e("div",Ue,[t[17]||(t[17]=e("span",null,"Оценка",-1)),D.value?(s(),C(j,{key:0,"is-readonly":D.value,"default-value":r.mark},null,8,["is-readonly","default-value"])):(s(),C(j,{key:1,"is-readonly":!1,"default-value":r.mark,"onUpdate:modelValue":t[8]||(t[8]=l=>Q(l)),items:[2,3,4,5]},null,8,["default-value"]))]),_(e("button",{class:y(["v-home__lesson-homework-button save",{unactive:!z.value}])}," Сохранить ",2),[[E,!D.value]])])]))]),F(oe,{name:"fade"},{default:L(()=>[g.value.files?(s(),C(me,{key:0,onClose:$,onSaveFiles:G})):k("",!0)]),_:1})],64))}};export{je as _,Re as a,We as b,Ee as c,me as d};
