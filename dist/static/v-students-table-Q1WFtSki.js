import{u as P}from"./studentsStore-DX0Malv_.js";import{aT as Q,y as C,b as N,o as n,f as T,w as j,d as e,c as a,F as c,A as w,j as y,e as I,aQ as W,ap as H,r as g,aO as R,aF as q,z as G,Q as B,R as F,h as S,k as b,n as x,B as L,l as J,bn as K,bo as X,bp as Y}from"./index-BBvMqIIN.js";import{_ as Z}from"./telegram-Tjn7FoaJ.js";const U=Q("seelctedStudents",{state:()=>({student:[],selected_group:null}),getters:{},actions:{setDeletedStudent(u){this.student=[u]},pushDeletedStudent(u){this.student.push(u)},setDeletedStudetns(u){this.student=u,this.students_amount=u.length},removeDeletedStudent(u){this.student=this.student.filter(v=>v.id!==u)}}}),ee={class:"v-edit-group"},te={class:"modal-field col"},se={class:"v-edit-group__list"},le={class:"styled-checkbox"},oe=["id"],ne=["for"],ae=["for"],de={class:"modal-field col"},Ce={__name:"v-edit-group-modal",setup(u){const v=P(),p=U(),k=C(()=>v.students.map(r=>({id:r.id,text:r.name}))),h=C(()=>{var r;return((r=p.selected_group)==null?void 0:r.students)||[]});return N(()=>{var r;console.log((r=p.selected_group)==null?void 0:r.students)}),(r,d)=>(n(),T(H,null,{modal:j(()=>[e("div",ee,[d[3]||(d[3]=e("h2",{class:"modal-title"},"Редактирование группы",-1)),e("div",te,[d[1]||(d[1]=e("span",{class:"modal-field__title"}," Название группы ",-1)),d[2]||(d[2]=e("input",{type:"text",class:"custom-input",placeholder:"Название группы"},null,-1)),e("ul",se,[(n(!0),a(c,null,w(h.value,_=>(n(),a("li",{class:"v-edit-group__list-item",key:_.id},[e("div",le,[e("input",{type:"text",id:"student-"+_.id},null,8,oe),e("label",{for:"student-"+_.id},null,8,ne)]),e("label",{for:"student-"+_.id},y(_.name),9,ae)]))),128))]),e("div",de,[d[0]||(d[0]=e("span",{class:"modal-field__title"},"Добавить учеников",-1)),I(W,{items:k.value,"is-multiselect":!0},null,8,["items"])])])])]),_:1}))}},ue="data:image/svg+xml,%3csvg%20width='17'%20height='16'%20viewBox='0%200%2017%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.79978%203.3335V12.6668M8.79978%2012.6668L13.4665%208.00016M8.79978%2012.6668L4.13312%208.00016'%20stroke='%23545F72'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",re={class:"v-students-table"},ie={class:"v-students-table__head"},ce={class:"v-students-table__head-item"},_e={key:0,class:"styled-checkbox"},ke={key:1,src:ue,alt:""},me={class:"v-students-table__body"},pe={key:0,class:"styled-checkbox"},be=["id","onUpdate:modelValue","onChange"],ye=["for"],ve=["href","onClick"],he={class:"v-students-table__body-item v-students-table__body-buttons"},fe=["onClick"],ge=["onClick"],$e={__name:"v-students-table",props:{items:Array,type:String},emits:["student-selected","toggle-modal"],setup(u,{emit:v}){const p=v,k=U(),h=g(!1),r=g(!1),d=g(null),_=g(!1),m=u,i=g({}),$=C(()=>m.type==="students"?[{key:"student_name",label:"Имя",sortable:!0},{key:"contact",label:"Способ связи",sortable:!1},{key:"rate",label:"Ставка",sortable:!0},{key:"balance",label:"Средств на счёте",sortable:!0},{key:"homework_status",label:"Дз",sortable:!1},{key:"comment",label:"Комментарий",sortable:!1,wrap:!0}]:m.type==="groups"?[{key:"name",label:"Название",sortable:!0},{key:"students_count",label:"Количество учеников",sortable:!0},{key:"rate",label:"Ставка",sortable:!0},{key:"balance",label:"Баланс",sortable:!0},{key:"homework_status",label:"Дз",sortable:!1},{key:"comment",label:"Комментарий",sortable:!1,wrap:!0}]:[]),D=s=>{if(s==="all"){for(const f in i.value)i.value[f]=!h.value;Object.values(i.value)[0]?k.setDeletedStudetns(m.items):k.student=[]}else i[s.id]?(k.removeDeletedStudent(s.id),i[s.id]=!i[s.id]):(i[s.id]=!0,k.pushDeletedStudent(s));r.value=Object.values(i.value).some(f=>f);let l=s;s==="all"&&(l=m.items),p("student-selected",r.value,l)},E=s=>{window.location.href=`tel:${s}`},O=s=>({name:m.type==="groups"?"group":"student",params:{id:s.id}}),z=s=>{console.log(s),k.setDeletedStudent(s),p("toggle-modal","deleteModal")},A=s=>{p("edit-item",s)};R(()=>m.type,s=>{for(const l of s)i.value[l.id]=!1},{immediate:!0});const M=()=>{d.value&&(_.value=d.value.scrollLeft>0)};return q(()=>{d.value&&d.value.removeEventListener("scroll",M)}),N(()=>{d.value&&d.value.addEventListener("scroll",M);for(const s of m.items)i.value[s.id]=!1}),(s,l)=>{const f=G("router-link");return n(),a("div",{ref_key:"tableWrapper",ref:d,class:x(["scrolltable",{scrolling:_.value}])},[e("table",re,[e("thead",ie,[e("tr",null,[(n(!0),a(c,null,w($.value,t=>(n(),a("th",{key:t.key},[e("div",ce,[t.key==="name"||t.key==="title"||t.key==="student_name"?(n(),a("div",_e,[B(e("input",{type:"checkbox",id:"all-field","onUpdate:modelValue":l[0]||(l[0]=o=>h.value=o),onInput:l[1]||(l[1]=()=>D("all"))},null,544),[[F,h.value]]),l[3]||(l[3]=e("label",{class:"white-bg",for:"all-field"},null,-1))])):S("",!0),b(" "+y(t.label)+" ",1),t.sortable?(n(),a("img",ke)):S("",!0)])]))),128)),l[4]||(l[4]=e("th",null,[e("div",{class:"v-students-table__head-item"})],-1))])]),e("tbody",me,[(n(!0),a(c,null,w(u.items,t=>(n(),a("tr",{class:"v-students-table__body-row",key:t.id},[(n(!0),a(c,null,w($.value,o=>(n(),a("td",{key:o.key},[I(f,{to:O(t)},{default:j(()=>[e("div",{class:x(["v-students-table__body-item",{wrap:o.key==="comment"}]),onClick:l[2]||(l[2]=L(()=>{},["stop"]))},[o.key==="name"||o.key==="title"||o.key==="student_name"?(n(),a("div",pe,[B(e("input",{type:"checkbox",id:o.key+"-"+t.id,"onUpdate:modelValue":V=>i.value[t.id]=V,onChange:()=>D(t)},null,40,be),[[F,i.value[t.id]]]),e("label",{for:o.key+"-"+t.id},null,8,ye)])):S("",!0),o.key==="contact"&&!t.phone_number?(n(),a(c,{key:1},[b(" - ")],64)):o.key==="contact"?(n(),a(c,{key:2},[l[5]||(l[5]=e("img",{src:Z,alt:""},null,-1)),e("a",{href:"tel:"+t[o.key],class:"contact-link",onClick:L(V=>E(t[o.key]),["stop"]),target:"_blank"},y(t[o.key]),9,ve)],64)):o.key==="homework_status"?(n(),a("div",{key:3,class:x(["status",J(K)(t[o.key])])},[l[6]||(l[6]=e("span",null,null,-1)),b(y(t.homework||"Ждёт ответа"),1)],2)):o.key==="balance"?(n(),a(c,{key:4},[b(y(t[o.key])+" ₽",1)],64)):t[o.key]?(n(),a(c,{key:6},[b(y(t[o.key]),1)],64)):(n(),a(c,{key:5},[b(" - ")],64))],2)]),_:2},1032,["to"])]))),128)),e("td",null,[e("div",he,[e("img",{src:X,alt:"Удалить",onClick:()=>z(t)},null,8,fe),e("img",{src:Y,alt:"Редактировать",onClick:()=>A(t)},null,8,ge)])])]))),128))])])],2)}}};export{$e as _,Ce as a,U as u};
