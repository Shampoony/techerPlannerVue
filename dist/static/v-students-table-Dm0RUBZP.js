import{u as G}from"./studentsStore-DCLB3q5b.js";import{aT as P,y as C,r as v,b as N,o,f as Q,w as U,d as e,c as a,F as c,A as S,j as b,e as E,aQ as T,ap as W,aO as H,aF as R,z as Z,Q as L,R as M,h as V,k as y,n as w,B as F,l as q,bn as J,bo as K,bp as X}from"./index-CvdVe2Gr.js";const I=P("seelctedStudents",{state:()=>({student:[],selected_group:null}),getters:{},actions:{setDeletedStudent(u){this.student=[u]},pushDeletedStudent(u){this.student.push(u)},setDeletedStudetns(u){this.student=u,this.students_amount=u.length},removeDeletedStudent(u){this.student=this.student.filter(h=>h.id!==u)}}}),Y={class:"v-edit-group"},ee={class:"modal-field col"},te={class:"v-edit-group__list"},se={class:"styled-checkbox"},le=["id"],ne=["for"],oe=["for"],ae={class:"modal-field col"},Se={__name:"v-edit-group-modal",setup(u){const h=G(),m=I(),k=C(()=>h.students.map(r=>({id:r.id,text:r.student_name})));v({});const f=C(()=>{var r;return((r=m.selected_group)==null?void 0:r.students)||[]});return N(()=>{var r;console.log((r=m.selected_group)==null?void 0:r.students)}),(r,d)=>(o(),Q(W,null,{modal:U(()=>[e("div",Y,[d[3]||(d[3]=e("h2",{class:"modal-title"},"Редактирование группы",-1)),e("div",ee,[d[1]||(d[1]=e("span",{class:"modal-field__title"}," Название группы ",-1)),d[2]||(d[2]=e("input",{type:"text",class:"custom-input",placeholder:"Название группы"},null,-1)),e("ul",te,[(o(!0),a(c,null,S(f.value,_=>(o(),a("li",{class:"v-edit-group__list-item",key:_.id},[e("div",se,[e("input",{type:"checkbox",id:"student-"+_.id,checked:""},null,8,le),e("label",{for:"student-"+_.id},null,8,ne)]),e("label",{for:"student-"+_.id},b(_.name),9,oe)]))),128))]),e("div",ae,[d[0]||(d[0]=e("span",{class:"modal-field__title"},"Добавить учеников",-1)),E(T,{items:k.value,"is-multiselect":!0},null,8,["items"])])])])]),_:1}))}},de="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='10'%20cy='10'%20r='8.75'%20fill='url(%23paint0_linear_9243_6283)'/%3e%3cpath%20d='M14.3666%206.38049C14.4445%205.87707%2013.9659%205.47972%2013.5183%205.67625L4.60301%209.59053C4.28202%209.73146%204.3055%2010.2177%204.63842%2010.3237L6.47697%2010.9092C6.82786%2011.0209%207.20783%2010.9631%207.51424%2010.7514L11.6594%207.88767C11.7844%207.80131%2011.9206%207.97904%2011.8138%208.08914L8.83007%2011.1654C8.54063%2011.4638%208.59808%2011.9695%208.94623%2012.1878L12.2868%2014.2827C12.6615%2014.5176%2013.1436%2014.2816%2013.2136%2013.8288L14.3666%206.38049Z'%20fill='white'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_9243_6283'%20x1='10'%20y1='1.25'%20x2='10'%20y2='18.75'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%2337BBFE'/%3e%3cstop%20offset='1'%20stop-color='%23007DBB'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ue={class:"v-students-table"},re={class:"v-students-table__head"},ie={class:"v-students-table__head-item"},ce={key:0,class:"styled-checkbox"},_e={class:"v-students-table__body"},ke={key:0,class:"styled-checkbox"},pe=["id","onUpdate:modelValue","onChange"],me=["for"],ye=["href","onClick"],ve={class:"v-students-table__body-item v-students-table__body-buttons"},be=["onClick"],he=["onClick"],we={__name:"v-students-table",props:{items:Array,type:String},emits:["student-selected","toggle-modal"],setup(u,{emit:h}){const m=h,k=I(),f=v(!1),r=v(!1),d=v(null),_=v(!1),p=u,i=v({}),x=C(()=>p.type==="students"?[{key:"student_name",label:"Имя"},{key:"contact",label:"Способ связи"},{key:"rate",label:"Ставка"},{key:"balance",label:"Средств на счёте"},{key:"homework_status",label:"Дз"},{key:"comment",label:"Комментарий",wrap:!0}]:p.type==="groups"?[{key:"group_name",label:"Название"},{key:"students_count",label:"Количество учеников"},{key:"rate",label:"Ставка"},{key:"balance",label:"Баланс"},{key:"homework_status",label:"Дз"},{key:"comment",label:"Комментарий",wrap:!0}]:[]),$=s=>{if(s==="all"){for(const g in i.value)i.value[g]=!f.value;Object.values(i.value)[0]?k.setDeletedStudetns(p.items):k.student=[]}else i[s.id]?(k.removeDeletedStudent(s.id),i[s.id]=!i[s.id]):(i[s.id]=!0,k.pushDeletedStudent(s));r.value=Object.values(i.value).some(g=>g);let l=s;s==="all"&&(l=p.items),m("student-selected",r.value,l)},O=s=>{window.location.href=`tel:${s}`},j=s=>({name:p.type==="groups"?"group":"student",params:{id:s.id}}),z=s=>{k.setDeletedStudent(s),m("toggle-modal","deleteModal")},A=s=>{m("edit-item",s)};H(()=>p.type,s=>{for(const l of s)i.value[l.id]=!1},{immediate:!0});const B=()=>{d.value&&(_.value=d.value.scrollLeft>0)};return R(()=>{d.value&&d.value.removeEventListener("scroll",B)}),N(()=>{d.value&&d.value.addEventListener("scroll",B);for(const s of p.items)i.value[s.id]=!1}),(s,l)=>{const g=Z("router-link");return o(),a("div",{ref_key:"tableWrapper",ref:d,class:w(["scrolltable",{scrolling:_.value}])},[e("table",ue,[e("thead",re,[e("tr",null,[(o(!0),a(c,null,S(x.value,t=>(o(),a("th",{key:t.key},[e("div",ie,[t.key==="group_name"||t.key==="title"||t.key==="student_name"?(o(),a("div",ce,[L(e("input",{type:"checkbox",id:"all-field","onUpdate:modelValue":l[0]||(l[0]=n=>f.value=n),onInput:l[1]||(l[1]=()=>$("all"))},null,544),[[M,f.value]]),l[3]||(l[3]=e("label",{class:"white-bg",for:"all-field"},null,-1))])):V("",!0),y(" "+b(t.label),1)])]))),128)),l[4]||(l[4]=e("th",null,[e("div",{class:"v-students-table__head-item"})],-1))])]),e("tbody",_e,[(o(!0),a(c,null,S(u.items,t=>(o(),a("tr",{class:"v-students-table__body-row",key:t.id},[(o(!0),a(c,null,S(x.value,n=>(o(),a("td",{key:n.key},[E(g,{to:j(t)},{default:U(()=>[e("div",{class:w(["v-students-table__body-item",{wrap:n.key==="comment"}]),onClick:l[2]||(l[2]=F(()=>{},["stop"]))},[n.key==="name"||n.key==="title"||n.key==="student_name"?(o(),a("div",ke,[L(e("input",{type:"checkbox",id:n.key+"-"+t.id,"onUpdate:modelValue":D=>i.value[t.id]=D,onChange:()=>$(t)},null,40,pe),[[M,i.value[t.id]]]),e("label",{for:n.key+"-"+t.id},null,8,me)])):V("",!0),n.key==="contact"&&!t.phone_number?(o(),a(c,{key:1},[y(" - ")],64)):n.key==="contact"?(o(),a(c,{key:2},[l[5]||(l[5]=e("img",{src:de,alt:""},null,-1)),e("a",{href:"tel:"+t[n.key],class:"contact-link",onClick:F(D=>O(t[n.key]),["stop"]),target:"_blank"},b(t[n.key]),9,ye)],64)):n.key==="homework_status"?(o(),a("div",{key:3,class:w(["status",q(J)(t[n.key])])},[l[6]||(l[6]=e("span",null,null,-1)),y(b(t.homework||"Ждёт ответа"),1)],2)):n.key==="balance"?(o(),a(c,{key:4},[y(b(t[n.key])+" ₽",1)],64)):t[n.key]?(o(),a(c,{key:6},[y(b(t[n.key]),1)],64)):(o(),a(c,{key:5},[y(" - ")],64))],2)]),_:2},1032,["to"])]))),128)),e("td",null,[e("div",ve,[e("img",{src:K,alt:"Удалить",onClick:()=>z(t)},null,8,be),e("img",{src:X,alt:"Редактировать",onClick:()=>A(t)},null,8,he)])])]))),128))])])],2)}}};export{we as _,Se as a,I as u};
