import{r as v,s as f,b as E,d as U,aJ as V,aY as F,I as w,o as u,c as o,e as i,j as C,n as M,N as B,f as J,w as P,O as Y,F as H,y as Z,g as S,T as $,as as q}from"./index-BRswD4ju.js";const G="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.6668%2017.5V15.8333C16.6668%2014.9493%2016.3156%2014.1014%2015.6905%2013.4763C15.0654%2012.8512%2014.2176%2012.5%2013.3335%2012.5H6.66683C5.78277%2012.5%204.93493%2012.8512%204.30981%2013.4763C3.68469%2014.1014%203.3335%2014.9493%203.3335%2015.8333V17.5M13.3335%205.83333C13.3335%207.67428%2011.8411%209.16667%2010.0002%209.16667C8.15921%209.16667%206.66683%207.67428%206.66683%205.83333C6.66683%203.99238%208.15921%202.5%2010.0002%202.5C11.8411%202.5%2013.3335%203.99238%2013.3335%205.83333Z'%20stroke='%23717680'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",K={class:"v-styled-select__value"},Q={key:0,src:G,alt:"",class:"mr-2"},W=["value"],X=["innerHTML"],ee=["onClick"],le=["for"],te={class:"styled-checkbox"},se=["id","checked","onChange"],ae=["for"],ne={key:0},ue=["innerHTML"],oe={key:0},ie=["innerHTML"],ce={__name:"v-styled-select",props:{items:{type:Array,default:()=>[]},value:{type:[Array,Object,String,Number],default:()=>[]},isReadonly:{type:Boolean,default:!1},studentIcon:{type:Boolean,default:!1},isMultiselect:{type:Boolean,default:!1},defaultValue:{type:[Array,Object,String,Number],default:null}},emits:["update:modelValue"],setup(r,{emit:T}){const l=r,n=T,c=v(!1),m=v(null),_=v(null),g=v(!1),h=e=>e==null?"":typeof e=="string"||typeof e=="number"?e:e.name?e.name:e.student_name?e.student_name:e.text?e.text:e.id||"",p=e=>e==null?null:typeof e=="object"&&e.id!==void 0?e.id:e,t=v([]),b=()=>{l.isMultiselect?Array.isArray(l.defaultValue)&&l.defaultValue.length>0?(t.value=[...l.defaultValue],n("update:modelValue",[...t.value])):l.items.length>0?(t.value=[l.items[0]],n("update:modelValue",[...t.value])):t.value=[]:l.defaultValue!==null?(t.value=[l.defaultValue],n("update:modelValue",l.defaultValue)):l.items.length>0?(t.value=[l.items[0]],n("update:modelValue",l.items[0])):t.value=[]},x=f(()=>t.value.length===0?!!(l.items.length>0&&l.items[0].svg):t.value.some(e=>e&&e.svg)),A=f(()=>{if(t.value.length===0)return l.items.length>0&&l.items[0].svg?l.items[0].svg:"";const e=t.value.find(a=>a&&a.svg);return e?e.svg:""}),D=f(()=>{if(t.value.length===0){const e=l.items[0];return e?e.svg?"":h(e):""}return t.value.filter(e=>!e.svg).map(e=>h(e)).join(", ")}),L=e=>{const a=p(e);return t.value.some(d=>{const s=p(d);return a!==null&&s!==null?s===a:d===e})},j=e=>{const a=t.value.findIndex(d=>p(d)===p(e));a>=0?t.value.splice(a,1):t.value.push(e),n("update:modelValue",[...t.value])},I=e=>{t.value=[e],n("update:modelValue",e),c.value=!1},R=async()=>{l.isReadonly||(c.value=!c.value,c.value&&(await q(),k()))},N=()=>{c.value=!1},z=f(()=>({top:g.value?"auto":"100%",bottom:g.value?"100%":"auto"})),O=f(()=>({openUp:g.value,open:c.value})),k=()=>{if(m.value&&_.value){const e=m.value.getBoundingClientRect(),a=_.value.offsetHeight,d=window.innerHeight-e.bottom;g.value=a>d}};return E(()=>{window.addEventListener("resize",k),b()}),U(()=>{window.removeEventListener("resize",k)}),V(()=>l.items,e=>{l.isMultiselect?!(Array.isArray(l.defaultValue)&&l.defaultValue.length>0)&&t.value.length===0&&e.length>0&&(t.value=[e[0]],n("update:modelValue",[...t.value])):l.defaultValue===null&&t.value.length===0&&e.length>0&&(t.value=[e[0]],n("update:modelValue",e[0]))},{immediate:!0}),V(()=>l.defaultValue,e=>{l.isMultiselect?Array.isArray(e)&&e.length>0?(t.value=[...e],n("update:modelValue",[...t.value])):t.value.length===0&&l.items.length>0&&(t.value=[l.items[0]],n("update:modelValue",[...t.value])):e!==null?(t.value=[e],n("update:modelValue",e)):t.value.length===0&&l.items.length>0&&(t.value=[l.items[0]],n("update:modelValue",l.items[0]))},{deep:!0}),V(()=>l.isMultiselect,()=>{b()}),(e,a)=>{const d=F("click-outside");return w((u(),o("div",{class:"v-styled-select",ref_key:"selectContainer",ref:m},[i("div",{class:M(["v-styled-select__field",{readonly:r.isReadonly}]),onClick:R},[i("div",K,[l.studentIcon?(u(),o("img",Q)):C("",!0),x.value?C("",!0):(u(),o("input",{key:1,class:"",type:"text",value:D.value,readonly:""},null,8,W)),x.value?(u(),o("span",{key:2,innerHTML:A.value},null,8,X)):C("",!0)]),w(i("div",{class:M(["v-styled-select__image",O.value])},a[0]||(a[0]=[i("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"#717680","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2),[[B,!r.isReadonly]])],2),J($,{name:"fade"},{default:P(()=>[w(i("ul",{class:"v-styled-select__list",ref_key:"listRef",ref:_,style:Y(z.value)},[(u(!0),o(H,null,Z(r.items,(s,y)=>(u(),o("li",{class:M(["v-styled-select__list-item",{selected:r.isMultiselect?!1:L(s)}]),key:y,onClick:de=>r.isMultiselect?null:I(s)},[r.isMultiselect?(u(),o("label",{key:0,class:"checkbox-label",for:"item-"+(s.id||y)},[i("div",te,[i("input",{type:"checkbox",id:"item-"+(s.id||y),checked:L(s),onChange:()=>j(s)},null,40,se),i("label",{for:"item-"+(s.id||y)},null,8,ae)]),s.svg?(u(),o("span",{key:1,innerHTML:s.svg},null,8,ue)):(u(),o("span",ne,S(h(s)),1))],8,le)):(u(),o(H,{key:1},[s.svg?(u(),o("span",{key:1,innerHTML:s.svg},null,8,ie)):(u(),o("span",oe,S(h(s)),1))],64))],10,ee))),128))],4),[[B,c.value]])]),_:1})])),[[d,N]])}}};export{ce as _};
