import{u as A}from"./studentsStore-C9NW42RE.js";import{aN as O,y as w,b as N,o as n,f as P,w as B,d as e,c as d,F as c,A as h,j as m,e as F,aL as E,ak as H,r as f,aJ as J,z as T,L as $,M as D,h as g,k,n as M,B as V,l as q,b5 as G,b6 as K,b7 as Q}from"./index-CogWQqZT.js";import{_ as R}from"./telegram-Tjn7FoaJ.js";const L=O("seelctedStudents",{state:()=>({student:[],selected_group:null}),getters:{},actions:{setDeletedStudent(r){this.student=[r]},pushDeletedStudent(r){this.student.push(r)},setDeletedStudetns(r){this.student=r,this.students_amount=r.length},removeDeletedStudent(r){this.student=this.student.filter(b=>b.id!==r)}}}),W={class:"v-edit-group"},X={class:"modal-field col"},Y={class:"v-edit-group__list"},Z={class:"styled-checkbox"},ee=["id"],te=["for"],se=["for"],le={class:"modal-field col"},ge={__name:"v-edit-group-modal",setup(r){const b=A(),y=L(),_=w(()=>b.students.map(i=>({id:i.id,text:i.name}))),p=w(()=>{var i;return((i=y.selected_group)==null?void 0:i.students)||[]});return N(()=>{var i;console.log((i=y.selected_group)==null?void 0:i.students)}),(i,u)=>(n(),P(H,null,{modal:B(()=>[e("div",W,[u[3]||(u[3]=e("h2",{class:"modal-title"},"Редактирование группы",-1)),e("div",X,[u[1]||(u[1]=e("span",{class:"modal-field__title"}," Название группы ",-1)),u[2]||(u[2]=e("input",{type:"text",class:"custom-input",placeholder:"Название группы"},null,-1)),e("ul",Y,[(n(!0),d(c,null,h(p.value,a=>(n(),d("li",{class:"v-edit-group__list-item",key:a.id},[e("div",Z,[e("input",{type:"text",id:"student-"+a.id},null,8,ee),e("label",{for:"student-"+a.id},null,8,te)]),e("label",{for:"student-"+a.id},m(a.name),9,se)]))),128))]),e("div",le,[u[0]||(u[0]=e("span",{class:"modal-field__title"},"Добавить учеников",-1)),F(E,{items:_.value,"is-multiselect":!0},null,8,["items"])])])])]),_:1}))}},oe="data:image/svg+xml,%3csvg%20width='17'%20height='16'%20viewBox='0%200%2017%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.79978%203.3335V12.6668M8.79978%2012.6668L13.4665%208.00016M8.79978%2012.6668L4.13312%208.00016'%20stroke='%23545F72'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ne={class:"v-students-table"},ae={class:"v-students-table__head"},de={class:"v-students-table__head-item"},ue={key:0,class:"styled-checkbox"},re={key:1,src:oe,alt:""},ie={class:"v-students-table__body"},ce={class:"styled-checkbox"},_e=["id","onUpdate:modelValue","onChange"],ke=["for"],me=["href","onClick"],ye={class:"v-students-table__body-item v-students-table__body-buttons"},be=["onClick"],pe=["onClick"],we={__name:"v-students-table",props:{items:Array,type:String},emits:["student-selected","toggle-modal"],setup(r,{emit:b}){const y=b,_=L(),p=f(!1),i=f(!1),u=r,a=f({}),S=w(()=>u.type==="students"?[{key:"student_name",label:"Имя",sortable:!0},{key:"contact",label:"Способ связи",sortable:!1},{key:"rate",label:"Ставка",sortable:!0},{key:"balance",label:"Средств на счёте",sortable:!0},{key:"homework_status",label:"Дз",sortable:!1},{key:"comment",label:"Комментарий",sortable:!1,wrap:!0}]:u.type==="groups"?[{key:"name",label:"Название",sortable:!0},{key:"students_count",label:"Количество учеников",sortable:!0},{key:"rate",label:"Ставка",sortable:!0},{key:"balance",label:"Баланс",sortable:!0},{key:"homework_status",label:"Дз",sortable:!1},{key:"comment",label:"Комментарий",sortable:!1,wrap:!0}]:[]),x=s=>{if(s==="all"){for(const v in a.value)a.value[v]=!p.value;Object.values(a.value)[0]?_.setDeletedStudetns(u.items):_.student=[]}else a[s.id]?(_.removeDeletedStudent(s.id),a[s.id]=!a[s.id]):(a[s.id]=!0,_.pushDeletedStudent(s));i.value=Object.values(a.value).some(v=>v);let l=s;s==="all"&&(l=u.items),y("student-selected",i.value,l)},j=s=>{window.location.href=`tel:${s}`},I=s=>({name:u.type==="groups"?"group":"student",params:{id:s.id}}),U=s=>{console.log(s),_.setDeletedStudent(s),y("toggle-modal","deleteModal")},z=s=>{y("edit-item",s)};return J(()=>u.type,s=>{for(const l of s)a.value[l.id]=!1},{immediate:!0}),N(()=>{for(const s of u.items)a.value[s.id]=!1}),(s,l)=>{const v=T("router-link");return n(),d("table",ne,[e("thead",ae,[e("tr",null,[(n(!0),d(c,null,h(S.value,t=>(n(),d("th",{key:t.key},[e("div",de,[t.key==="name"||t.key==="title"?(n(),d("div",ue,[$(e("input",{type:"checkbox",id:"all-field","onUpdate:modelValue":l[0]||(l[0]=o=>p.value=o),onInput:l[1]||(l[1]=()=>x("all"))},null,544),[[D,p.value]]),l[3]||(l[3]=e("label",{class:"white-bg",for:"all-field"},null,-1))])):g("",!0),k(" "+m(t.label)+" ",1),t.sortable?(n(),d("img",re)):g("",!0)])]))),128)),l[4]||(l[4]=e("th",null,null,-1))])]),e("tbody",ie,[(n(!0),d(c,null,h(r.items,t=>(n(),d("tr",{class:"v-students-table__body-row",key:t.id},[(n(!0),d(c,null,h(S.value,o=>(n(),d("td",{key:o.key},[F(v,{to:I(t)},{default:B(()=>[e("div",{class:M(["v-students-table__body-item",{wrap:o.key==="comment"}]),onClick:l[2]||(l[2]=V(()=>{},["stop"]))},[o.key==="name"||o.key==="title"?(n(),d(c,{key:0},[e("div",ce,[$(e("input",{type:"checkbox",id:o.key+"-"+t.id,"onUpdate:modelValue":C=>a.value[t.id]=C,onChange:()=>x(t)},null,40,_e),[[D,a.value[t.id]]]),e("label",{for:o.key+"-"+t.id},null,8,ke)]),k(" "+m(t[o.key]),1)],64)):g("",!0),o.key==="contact"&&!t.phone_number?(n(),d(c,{key:1},[k(" - ")],64)):o.key==="contact"?(n(),d(c,{key:2},[l[5]||(l[5]=e("img",{src:R,alt:""},null,-1)),e("a",{href:"tel:"+t[o.key],class:"contact-link",onClick:V(C=>j(t[o.key]),["stop"]),target:"_blank"},m(t[o.key]),9,me)],64)):o.key==="homework_status"?(n(),d("div",{key:3,class:M(["status",q(G)(t[o.key])])},[l[6]||(l[6]=e("span",null,null,-1)),k(m(t.homework||"Ждёт ответа"),1)],2)):o.key==="balance"?(n(),d(c,{key:4},[k(m(t[o.key])+" ₽",1)],64)):t[o.key]?(n(),d(c,{key:6},[k(m(t[o.key]),1)],64)):(n(),d(c,{key:5},[k(" - ")],64))],2)]),_:2},1032,["to"])]))),128)),e("td",null,[e("div",ye,[e("img",{src:K,alt:"Удалить",onClick:()=>U(t)},null,8,be),e("img",{src:Q,alt:"Редактировать",onClick:()=>z(t)},null,8,pe)])])]))),128))])])}}};export{we as _,ge as a,L as u};
