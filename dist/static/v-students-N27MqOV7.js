import{aI as ct,r as i,s as D,aJ as X,o as r,i as H,w,e as t,I as C,J as F,b as Z,c as g,F as V,y as P,g as A,f as k,aK as mt,x as nt,j as E,h as I,n as M,z as J,k as O,aL as vt,aM as pt,aN as _t,aO as gt,N as T,aP as ft,az as bt,T as G,q as ht}from"./index-BRswD4ju.js";import{u as Y}from"./studentsStore-BTNTnwKb.js";import{v as B}from"./v-custom-modal-CJ4Ydqdp.js";import{_ as kt}from"./telegram-Tjn7FoaJ.js";import{_ as yt}from"./v-files-handler-DL2gU1yg.js";import{_ as U}from"./v-styled-select-BfckQ3fM.js";const lt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%2010.8333V15.8333C15%2016.2754%2014.8244%2016.6993%2014.5118%2017.0118C14.1993%2017.3244%2013.7754%2017.5%2013.3333%2017.5H4.16667C3.72464%2017.5%203.30072%2017.3244%202.98816%2017.0118C2.67559%2016.6993%202.5%2016.2754%202.5%2015.8333V6.66667C2.5%206.22464%202.67559%205.80072%202.98816%205.48816C3.30072%205.17559%203.72464%205%204.16667%205H9.16667M12.5%202.5H17.5M17.5%202.5V7.5M17.5%202.5L8.33333%2011.6667'%20stroke='%23717680'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Ct="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5%2017.5L13.875%2013.875M15.8333%209.16667C15.8333%2012.8486%2012.8486%2015.8333%209.16667%2015.8333C5.48477%2015.8333%202.5%2012.8486%202.5%209.16667C2.5%205.48477%205.48477%202.5%209.16667%202.5C12.8486%202.5%2015.8333%205.48477%2015.8333%209.16667Z'%20stroke='%23717680'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",wt="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_9311_3631)'%3e%3cpath%20d='M14.1668%2017.5V15.8333C14.1668%2014.9493%2013.8156%2014.1014%2013.1905%2013.4763C12.5654%2012.8512%2011.7176%2012.5%2010.8335%2012.5H4.16683C3.28277%2012.5%202.43493%2012.8512%201.80981%2013.4763C1.18469%2014.1014%200.833496%2014.9493%200.833496%2015.8333V17.5M19.1668%2017.5V15.8333C19.1663%2015.0948%2018.9205%2014.3773%2018.468%2013.7936C18.0155%2013.2099%2017.3819%2012.793%2016.6668%2012.6083M13.3335%202.60833C14.0505%202.79192%2014.686%203.20892%2015.1399%203.79359C15.5937%204.37827%2015.84%205.09736%2015.84%205.8375C15.84%206.57764%2015.5937%207.29673%2015.1399%207.88141C14.686%208.46608%2014.0505%208.88308%2013.3335%209.06667M10.8335%205.83333C10.8335%207.67428%209.34111%209.16667%207.50016%209.16667C5.65921%209.16667%204.16683%207.67428%204.16683%205.83333C4.16683%203.99238%205.65921%202.5%207.50016%202.5C9.34111%202.5%2010.8335%203.99238%2010.8335%205.83333Z'%20stroke='white'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_9311_3631'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",St="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_9241_10005)'%3e%3cpath%20d='M13.3333%2013.3332L9.99997%209.9999M9.99997%209.9999L6.66663%2013.3332M9.99997%209.9999V17.4999M16.9916%2015.3249C17.8044%2014.8818%2018.4465%2014.1806%2018.8165%2013.3321C19.1866%2012.4835%2019.2635%2011.5359%2019.0351%2010.6388C18.8068%209.7417%2018.2862%208.94616%2017.5555%208.37778C16.8248%207.80939%2015.9257%207.50052%2015%207.4999H13.95C13.6977%206.52427%2013.2276%205.61852%2012.5749%204.85073C11.9222%204.08295%2011.104%203.47311%2010.1817%203.06708C9.25943%202.66104%208.25709%202.46937%207.25006%202.50647C6.24304%202.54358%205.25752%202.80849%204.36761%203.28129C3.47771%203.7541%202.70656%204.42249%202.11215%205.23622C1.51774%206.04996%201.11554%206.98785%200.935783%207.9794C0.756025%208.97095%200.803388%209.99035%201.07431%2010.961C1.34523%2011.9316%201.83267%2012.8281%202.49997%2013.5832'%20stroke='%23545F72'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_9241_10005'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",$t="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_9241_10005)'%3e%3cpath%20d='M13.3333%2013.3332L9.99997%209.9999M9.99997%209.9999L6.66663%2013.3332M9.99997%209.9999V17.4999M16.9916%2015.3249C17.8044%2014.8818%2018.4465%2014.1806%2018.8165%2013.3321C19.1866%2012.4835%2019.2635%2011.5359%2019.0351%2010.6388C18.8068%209.7417%2018.2862%208.94616%2017.5555%208.37778C16.8248%207.80939%2015.9257%207.50052%2015%207.4999H13.95C13.6977%206.52427%2013.2276%205.61852%2012.5749%204.85073C11.9222%204.08295%2011.104%203.47311%2010.1817%203.06708C9.25943%202.66104%208.25709%202.46937%207.25006%202.50647C6.24304%202.54358%205.25752%202.80849%204.36761%203.28129C3.47771%203.7541%202.70656%204.42249%202.11215%205.23622C1.51774%206.04996%201.11554%206.98785%200.935783%207.9794C0.756025%208.97095%200.803388%209.99035%201.07431%2010.961C1.34523%2011.9316%201.83267%2012.8281%202.49997%2013.5832'%20stroke='%23FF3A3A'%20stroke-width='1.67'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_9241_10005'%3e%3crect%20width='20'%20height='20'%20fill='%23FF3A3A'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",z=ct("seelctedStudents",{state:()=>({student:[],selected_group:null}),getters:{},actions:{setDeletedStudent(h){this.student=[h]},pushDeletedStudent(h){this.student.push(h)},setDeletedStudetns(h){this.student=h,this.students_amount=h.length},removeDeletedStudent(h){this.student=this.student.filter(n=>n.id!==h)}}}),xt={class:"v-delete-modal"},Mt=["innerHTML"],Vt={class:"v-delete-modal__rule"},Tt={class:"flex gap-3"},Dt={class:"styled-checkbox"},It={__name:"v-delete-modal",props:{group:Object,student:Number,type:String,student_amount:Number,group_amount:Number},setup(h){const n=h,m=i(!1),u=z(),v=i(null),p=i("Вы уверены, что хотите удалить");D(()=>u.student.length>1?"plural":u.student.length===1?"singular":"none"),X(()=>[n.student_amount,n.group_amount,n.type,n.student],()=>{console.log("Props changed:",n.type,n.student_amount,n.group_amount,n.student)},{immediate:!0});const c=D(()=>{let s="";return u.student.length===1&&n.type==="students"&&(s+=`ученика <p> (${u.student[0].name})?</p>`),u.student.length>1&&n.type==="students"&&(s+=`выбранных учеников <p>(${u.student.length})?</p>`),n.type==="groups"&&u.student.length===1&&(s+=`группу <p>(${u.student[0].name})?</p>`),n.type==="groups"&&u.student.length>1&&(s+=`группы <p>(${u.student.length})?</p>`),p.value+" "+s}),a=()=>{console.log(n.type)};return(s,l)=>(r(),H(B,{ref_key:"customModal",ref:v},{modal:w(()=>[t("div",xt,[t("h1",{class:"modal-title",innerHTML:c.value},null,8,Mt),l[3]||(l[3]=t("div",{class:"caption"},"Информация о учениках будет удалена безвозратно.",-1)),t("div",Vt,[t("div",Tt,[t("div",Dt,[C(t("input",{"onUpdate:modelValue":l[0]||(l[0]=S=>m.value=S),type:"checkbox",id:"delete-info"},null,512),[[F,m.value]]),l[1]||(l[1]=t("label",{for:"delete-info"},null,-1))]),l[2]||(l[2]=t("label",{for:"delete"},"Удалить информацию о всех учениках выбранной группы",-1))])])])]),button:w(()=>[t("button",{class:"custom-btn red",onClick:a},"Удалить")]),_:1},512))}},At={class:"v-edit-group"},jt={class:"modal-field col"},Lt={class:"v-edit-group__list"},Gt={class:"styled-checkbox"},Pt=["id"],Ft=["for"],Ht=["for"],Bt={class:"modal-field col"},Nt={__name:"v-edit-group-modal",setup(h){const n=Y(),m=z(),u=D(()=>n.students.map(p=>({id:p.id,text:p.name}))),v=D(()=>{var p;return((p=m.selected_group)==null?void 0:p.students)||[]});return Z(()=>{var p;console.log((p=m.selected_group)==null?void 0:p.students)}),(p,c)=>(r(),H(B,null,{modal:w(()=>[t("div",At,[c[3]||(c[3]=t("h2",{class:"modal-title"},"Редактирование группы",-1)),t("div",jt,[c[1]||(c[1]=t("span",{class:"modal-field__title"}," Название группы ",-1)),c[2]||(c[2]=t("input",{type:"text",class:"custom-input",placeholder:"Название группы"},null,-1)),t("ul",Lt,[(r(!0),g(V,null,P(v.value,a=>(r(),g("li",{class:"v-edit-group__list-item",key:a.id},[t("div",Gt,[t("input",{type:"text",id:"student-"+a.id},null,8,Pt),t("label",{for:"student-"+a.id},null,8,Ft)]),t("label",{for:"student-"+a.id},A(a.name),9,Ht)]))),128))]),t("div",Bt,[c[0]||(c[0]=t("span",{class:"modal-field__title"},"Добавить учеников",-1)),k(U,{items:u.value,"is-multiselect":!0},null,8,["items"])])])])]),_:1}))}},Ot={class:"v-students-cards"},Ut={class:"v-students-cards__list students-list"},Et={__name:"v-students-cards",props:{items:{type:Array,default:()=>[]},type:String},emits:["student-selected","toggle-modal"],setup(h,{expose:n,emit:m}){const u=m,v=h,p=z();i({editGroup:!1,deleteModal:!1});const c=i(null),a=i(null),s=i(!1),l=i({}),S=(f,d)=>{const o=f.id;l.value[o]=d,d?p.pushDeletedStudent(f):p.removeDeletedStudent(o);const j=Object.values(l.value).some($=>$);console.log(l.value),u("student-selected",j,l.value)},N=f=>{v.type==="groups"?(c.value=v.items.find(d=>d.id===f),p.selected_group=c.value,u("toggle-modal","editGroup")):console.log("Редактировать студента:",f)},L=f=>v.type==="groups"?[{title:"Количество учеников",value:v.items[f].students_count},{title:"Ставка",value:v.items[f].rate},{title:"Баланс",value:v.items[f].balance},{title:"Статус ДЗ",value:v.items[f].homework},{title:"Комментарий",value:v.items[f].comment}]:[],_=f=>{p.setDeletedStudent(f),u("toggle-modal","deleteModal")};return n({selectAllStudents:f=>{for(const d in l.value)l.value[d]=f;s.value=!s.value,a.value.forEach(d=>{d.selectStudent(s.value)})},handleDeleteStudent:_,selectedStudents:l}),Z(()=>{v.items.forEach(f=>{l.value[f.id]=!1})}),(f,d)=>(r(),g("div",Ot,[t("ul",Ut,[(r(!0),g(V,null,P(h.items,(o,j)=>(r(),g("li",{class:"v-students-cards__list-item",key:o.id},[k(mt,{ref_for:!0,ref_key:"studentCardsRef",ref:a,student:o,"info-items":L(j),onSelected:$=>S(o,$),onEdit:N,onDelete:_},null,8,["student","info-items","onSelected"])]))),128))])]))}},Zt="data:image/svg+xml,%3csvg%20width='17'%20height='16'%20viewBox='0%200%2017%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.79978%203.3335V12.6668M8.79978%2012.6668L13.4665%208.00016M8.79978%2012.6668L4.13312%208.00016'%20stroke='%23545F72'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",zt={class:"v-students-table"},Rt={class:"v-students-table__head"},qt={class:"v-students-table__head-item"},Jt={key:0,class:"styled-checkbox"},Kt={key:1,src:Zt,alt:""},Qt={class:"v-students-table__body"},Wt={class:"styled-checkbox"},Xt=["id","onUpdate:modelValue","onChange"],Yt=["for"],te=["href","onClick"],ee={class:"v-students-table__body-item v-students-table__body-buttons"},se=["onClick"],le=["onClick"],ne={__name:"v-students-table",props:{items:Array,type:String},emits:["student-selected","toggle-modal"],setup(h,{emit:n}){const m=n,u=z(),v=i(!1),p=i(!1),c=h,a=i({}),s=D(()=>c.type==="students"?[{key:"student_name",label:"Имя",sortable:!0},{key:"contact",label:"Способ связи",sortable:!1},{key:"rate",label:"Ставка",sortable:!0},{key:"balance",label:"Средств на счёте",sortable:!0},{key:"homework_status",label:"Дз",sortable:!1},{key:"comment",label:"Комментарий",sortable:!1,wrap:!0}]:c.type==="groups"?[{key:"name",label:"Название",sortable:!0},{key:"students_count",label:"Количество учеников",sortable:!0},{key:"rate",label:"Ставка",sortable:!0},{key:"balance",label:"Баланс",sortable:!0},{key:"homework_status",label:"Дз",sortable:!1},{key:"comment",label:"Комментарий",sortable:!1,wrap:!0}]:[]),l=_=>{if(_==="all"){for(const f in a.value)a.value[f]=!v.value;Object.values(a.value)[0]?u.setDeletedStudetns(c.items):u.student=[]}else a[_.id]?(u.removeDeletedStudent(_.id),a[_.id]=!a[_.id]):(a[_.id]=!0,u.pushDeletedStudent(_));p.value=Object.values(a.value).some(f=>f);let y=_;_==="all"&&(y=c.items),m("student-selected",p.value,y)},S=_=>{window.location.href=`tel:${_}`},N=_=>{console.log(_),u.setDeletedStudent(_),m("toggle-modal","deleteModal")},L=_=>{m("edit-item",_)};return X(()=>c.type,_=>{for(const y of _)a.value[y.id]=!1},{immediate:!0}),Z(()=>{for(const _ of c.items)a.value[_.id]=!1}),(_,y)=>{const f=nt("router-link");return r(),g("table",zt,[t("thead",Rt,[t("tr",null,[(r(!0),g(V,null,P(s.value,d=>(r(),g("th",{key:d.key},[t("div",qt,[d.key==="name"||d.key==="title"?(r(),g("div",Jt,[C(t("input",{type:"checkbox",id:"all-field","onUpdate:modelValue":y[0]||(y[0]=o=>v.value=o),onInput:y[1]||(y[1]=()=>l("all"))},null,544),[[F,v.value]]),y[3]||(y[3]=t("label",{class:"white-bg",for:"all-field"},null,-1))])):E("",!0),I(" "+A(d.label)+" ",1),d.sortable?(r(),g("img",Kt)):E("",!0)])]))),128)),y[4]||(y[4]=t("th",null,null,-1))])]),t("tbody",Qt,[(r(!0),g(V,null,P(h.items,d=>(r(),g("tr",{class:"v-students-table__body-row",key:d.id},[(r(!0),g(V,null,P(s.value,o=>(r(),g("td",{key:o.key},[k(f,{to:{name:"student",params:{id:d.id}}},{default:w(()=>[t("div",{class:M(["v-students-table__body-item",{wrap:o.key==="comment"}]),onClick:y[2]||(y[2]=J(()=>{},["stop"]))},[o.key==="name"||o.key==="title"?(r(),g(V,{key:0},[t("div",Wt,[C(t("input",{type:"checkbox",id:o.key+"-"+d.id,"onUpdate:modelValue":j=>a.value[d.id]=j,onChange:()=>l(d)},null,40,Xt),[[F,a.value[d.id]]]),t("label",{for:o.key+"-"+d.id},null,8,Yt)]),I(" "+A(d[o.key]),1)],64)):E("",!0),o.key==="contact"&&!d.phone_number?(r(),g(V,{key:1},[I(" - ")],64)):o.key==="contact"?(r(),g(V,{key:2},[y[5]||(y[5]=t("img",{src:kt,alt:""},null,-1)),t("a",{href:"tel:"+d[o.key],class:"contact-link",onClick:J(j=>S(d[o.key]),["stop"]),target:"_blank"},A(d[o.key]),9,te)],64)):o.key==="homework_status"?(r(),g("div",{key:3,class:M(["status",O(vt)(d[o.key])])},[y[6]||(y[6]=t("span",null,null,-1)),I(A(d.homework||"Ждёт ответа"),1)],2)):o.key==="balance"?(r(),g(V,{key:4},[I(A(d[o.key])+" ₽",1)],64)):d[o.key]?(r(),g(V,{key:6},[I(A(d[o.key]),1)],64)):(r(),g(V,{key:5},[I(" - ")],64))],2)]),_:2},1032,["to"])]))),128)),t("td",null,[t("div",ee,[t("img",{src:pt,alt:"Удалить",onClick:()=>N(d)},null,8,se),t("img",{src:_t,alt:"Редактировать",onClick:()=>L(d)},null,8,le)])])]))),128))])])}}},oe={class:"v-group-modal"},ue={class:"modal-field col"},de={key:0,class:"error-text"},ae={class:"v-group-modal__list"},ie={class:"styled-checkbox"},re=["onUpdate:modelValue","id"],ce=["for"],me=["for"],ve={__name:"v-group-modal",props:{students:{type:Array,required:!0}},setup(h){const n=h,m=i({group_name:""}),u=i({}),v=i(!1),p=D(()=>v.value&&!m.value.group_name),c=()=>{if(v.value=!0,!m.value.group_name)return;const a=Object.keys(u.value).filter(l=>u.value[l]),s={name:m.value.group_name,students:a};console.log("Создание группы:",s)};return Z(()=>{n.students.forEach(a=>{u.value[a.id]=!0})}),(a,s)=>(r(),H(B,{onSubmit:c},{modal:w(()=>[t("div",oe,[s[2]||(s[2]=t("h2",{class:"modal-title"},"Создание группы",-1)),t("form",{onSubmit:J(c,["prevent"])},[t("div",ue,[s[1]||(s[1]=t("span",{class:"modal-field__title"},"Название группы",-1)),C(t("input",{type:"text",class:M(["custom-input",{error:p.value}]),placeholder:"Название группы","onUpdate:modelValue":s[0]||(s[0]=l=>m.value.group_name=l)},null,2),[[gt,m.value.group_name,void 0,{trim:!0}]]),p.value?(r(),g("span",de," Название группы обязательно ")):E("",!0)]),t("ul",ae,[(r(!0),g(V,null,P(h.students,l=>(r(),g("li",{class:"v-group-modal__list-item",key:l.id},[t("div",ie,[C(t("input",{type:"checkbox","onUpdate:modelValue":S=>u.value[l.id]=S,id:"student-"+l.id},null,8,re),[[F,u.value[l.id]]]),t("label",{for:"student-"+l.id},null,8,ce)]),t("label",{class:"white-bg",for:"student-"+l.id},A(l.name),9,me)]))),128))])],32)])]),_:1}))}},pe={class:"v-mass-addition"},_e={__name:"v-mass-addition",setup(h){return(n,m)=>(r(),H(B,null,{modal:w(()=>[t("div",pe,[m[0]||(m[0]=t("h2",{class:"modal-title"},"Массовое добавление учеников",-1)),m[1]||(m[1]=t("p",{class:"modal-subtitle mt-2"},"Скачайте и загрузите отредактированный шаблон",-1)),k(yt,{showDropArea:!0})])]),_:1}))}},ge={class:"v-add-students-modal"},fe={class:"modal-field col"},be={class:"modal-field__block connection-type"},he={class:"modal-field col"},ke={class:"modal-field__block"},ye={class:"modal-field col"},Ce={__name:"v-add-students-modal",setup(h){const n=Y(),m=n.typeConnect,u=n.rate,v=n.currency,p=n.timeZone;i({student_name:"",source:""});const c=()=>{};return(a,s)=>(r(),H(B,{onSubmit:c},{modal:w(()=>[t("div",ge,[s[9]||(s[9]=t("h2",{class:"modal-title mb-4"},"Добавление ученика",-1)),t("form",{onSubmit:J(c,["prevent"]),class:"modal-form",method:"POST"},[s[5]||(s[5]=t("div",{class:"modal-field col"},[t("div",{class:"modal-field__title"},"Имя ученика"),t("input",{class:"custom-input",type:"text",placeholder:"Имя ученика"})],-1)),s[6]||(s[6]=t("div",{class:"modal-field col"},[t("div",{class:"modal-field__title"},"Источник"),t("input",{class:"custom-input",type:"text",placeholder:"Источник"})],-1)),s[7]||(s[7]=t("div",{class:"modal-field col"},[t("div",{class:"modal-field__title"},"Цель занятий"),t("input",{class:"custom-input",type:"text",placeholder:"Цель занятий"})],-1)),t("div",fe,[s[1]||(s[1]=t("div",{class:"modal-field__title"},"Способ связи",-1)),t("div",be,[s[0]||(s[0]=t("input",{class:"custom-input",type:"text",placeholder:"Номер телефона"},null,-1)),k(U,{items:O(m)},null,8,["items"])])]),t("div",he,[s[3]||(s[3]=t("div",{class:"modal-field__title"},"Ставка",-1)),t("div",ke,[s[2]||(s[2]=t("input",{class:"custom-input",type:"text",placeholder:"сумма"},null,-1)),k(U,{items:O(u)},null,8,["items"]),k(U,{items:O(v)},null,8,["items"])])]),s[8]||(s[8]=t("div",{class:"modal-field col"},[t("div",{class:"modal-field__title"},"Комиссия, ₽"),t("input",{class:"custom-input",type:"text",placeholder:"10"})],-1)),t("div",ye,[s[4]||(s[4]=t("div",{class:"modal-field__title"},"Часовой пояс",-1)),k(U,{items:O(p)},null,8,["items"])])],32)])]),_:1}))}},we={class:"v-archive-modal"},Se=["innerHTML"],$e={class:"v-archive-modal__rule"},xe={class:"flex gap-3"},Me={class:"styled-checkbox"},Ve={__name:"v-archive-student-modal",props:{group:Object,student:Number,type:String,student_amount:Number,group_amount:Number},setup(h){const n=h,m=i(!1),u=z(),v=i(null),p=i("Вы уверены, что хотите архивировать");X(()=>[n.student_amount,n.group_amount,n.type,n.student],()=>{console.log("Props changed:",n.type,n.student_amount,n.group_amount,n.student)},{immediate:!0});const c=D(()=>{let s="";return u.student.length===1&&n.type==="students"&&(s+=`<p> ученика (${u.student[0].name})?</p>`),u.student.length>1&&n.type==="students"&&(s+=`выбранных  <p> учеников (${u.student.length})?</p>`),n.type==="groups"&&u.student.length===1&&(s+=`<p> группу (${u.student[0].name})?</p>`),n.type==="groups"&&u.student.length>1&&(s+=`<p> группы (${u.student.length})?</p>`),p.value+" "+s}),a=()=>{console.log(n.type)};return(s,l)=>(r(),H(B,{ref_key:"customModal",ref:v},{modal:w(()=>[t("div",we,[t("h1",{class:"modal-title",innerHTML:c.value},null,8,Se),l[3]||(l[3]=t("div",{class:"caption"},"Вы сможете восстановить ученика из архива.",-1)),t("div",$e,[t("div",xe,[t("div",Me,[C(t("input",{"onUpdate:modelValue":l[0]||(l[0]=S=>m.value=S),type:"checkbox",id:"delete-info"},null,512),[[F,m.value]]),l[1]||(l[1]=t("label",{for:"delete-info"},null,-1))]),l[2]||(l[2]=t("label",{for:"delete"},"Архивировать информацию о всех учениках выбранной группы",-1))])])])]),button:w(()=>[t("button",{class:"custom-btn blue",onClick:a},"Архивировать")]),default:w(()=>[l[4]||(l[4]=I(" dsds "))]),_:1},512))}},Te={class:"v-students"},De={class:"container"},Ie={class:"v-students__container layout"},Ae={class:"v-students__header"},je={class:"v-students__header-block"},Le={class:"flex gap-3 justify-between"},Ge={class:"v-students__title text-title"},Pe={class:"flex gap-4 justify-between"},Fe={class:"v-students__header-buttons"},He={key:0,class:"v-students__menu"},Be={class:"v-students__menu-block"},Ne={class:"v-students__menu-buttons"},Oe={class:"v-students__menu-buttons"},Ue={class:"v-students__menu-block"},Ee={key:1,class:"v-students__menu"},Ze={key:0,class:"flex gap-3"},ze={class:"styled-checkbox"},Re={class:"v-students__menu-block"},qe={class:"scrolltable"},Je={class:"loader-container"},Ke={class:"layout"},ss={__name:"v-students",setup(h){const n=i(!1),m=i(null),u=i(null),v=i([]),p=i([]),c=i(!0),a=i(!1),s=i(!0),l=i(!1),S=i(!1),N=ht(),L=Y(),_=D(()=>s.value?"students":l.value?"groups":null),y=D(()=>v.value.length<1?[$.value.filter(e=>e.id===v.value[0])]:null),f=i(null),d=i(null),o=i({archive:!1,editGroup:!1,addStudents:!1,massAddition:!1,groupModal:!1,deleteModal:!1}),j=i([{id:1,name:"ЕГЭ",students_count:10,rate:"2000 ₽ / 1,5 часа",balance:1200,homework:"Ждёт ответа",comment:"Работаем по скидке 20% (для всех)",students:[{id:1,name:"Алексей"}]},{id:2,name:"ОГЭ",students_count:10,rate:"2000 ₽ / 1,5 часа",balance:1200,homework:"Ждёт ответа",comment:"Работаем по скидке 20% (для всех)",students:[{id:2,name:"Тимур"}]}]),$=i(L.students),ot=D(()=>_.value==="students"?"Ученики":"Группы"),tt=D(()=>l.value?j.value:$.value),et=D(()=>l.value?"groups":"students"),R=i(!1),ut=b=>{l.value?x("editGroup"):(console.log(b),N.push({name:"student",params:{id:b.id}}))},dt=()=>{m.value.selectAllStudents(n.value),S.value=n.value},K=b=>{c.value=b==="table",a.value=b==="cards",localStorage.setItem("menu",b)},st=(b,e)=>{S.value=b,v.value=e},Q=b=>{s.value=b==="students",l.value=b==="groups",localStorage.setItem("menuType",b)},at=()=>{console.log(u.value.selectedGroupStudents);const b=c.value?u.value.selectedGroupStudents:m.value.selectedGroupStudents,e=[];for(const q in b)e.push($.value.filter(W=>W.id==q)[0]);p.value=e,x("groupModal")},x=b=>{console.log(b,"- ОКНО"),console.log(b,o.value[b]),o.value[b]=!o.value[b]},it=()=>{const b=Object.keys(v.value).filter(e=>v.value[e]);f.value=b.length,o.value.deleteModal=!0},rt=async()=>{R.value=!0,await L.getStudents(),$.value=L.students,R.value=!1};return Z(()=>{const b=localStorage.getItem("menu"),e=localStorage.getItem("menuType");l.value=e==="groups",s.value=e==="students",b&&K(b),e&&Q(e),rt()}),(b,e)=>{const q=nt("router-link");return r(),g(V,null,[k(bt,null,{default:w(()=>[t("section",Te,[t("div",De,[C(t("div",Ie,[t("div",Ae,[t("div",je,[t("div",Le,[t("h1",Ge,A(ot.value),1)]),t("div",Pe,[k(q,{to:{name:"archive_students"},class:"v-students__menu-link mob"},{default:w(()=>e[14]||(e[14]=[t("img",{src:lt,alt:""},null,-1),I(" Архив ")])),_:1}),t("div",Fe,[t("button",{class:"v-students__header-button custom-btn white",onClick:e[0]||(e[0]=()=>x("massAddition"))},e[15]||(e[15]=[t("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("g",{"clip-path":"url(#clip0_9241_10005)"},[t("path",{d:"M13.3333 13.3332L9.99997 9.9999M9.99997 9.9999L6.66663 13.3332M9.99997 9.9999V17.4999M16.9916 15.3249C17.8044 14.8818 18.4465 14.1806 18.8165 13.3321C19.1866 12.4835 19.2635 11.5359 19.0351 10.6388C18.8068 9.7417 18.2862 8.94616 17.5555 8.37778C16.8248 7.80939 15.9257 7.50052 15 7.4999H13.95C13.6977 6.52427 13.2276 5.61852 12.5749 4.85073C11.9222 4.08295 11.104 3.47311 10.1817 3.06708C9.25943 2.66104 8.25709 2.46937 7.25006 2.50647C6.24304 2.54358 5.25752 2.80849 4.36761 3.28129C3.47771 3.7541 2.70656 4.42249 2.11215 5.23622C1.51774 6.04996 1.11554 6.98785 0.935783 7.9794C0.756025 8.97095 0.803388 9.99035 1.07431 10.961C1.34523 11.9316 1.83267 12.8281 2.49997 13.5832",stroke:"#545F72","stroke-width":"1.67","stroke-linecap":"round","stroke-linejoin":"round"})]),t("defs",null,[t("clipPath",{id:"clip0_9241_10005"},[t("rect",{width:"20",height:"20",fill:"white"})])])],-1),t("span",null," Массовове добавление учеников ",-1)])),t("button",{class:"v-students__header-button custom-btn blue",onClick:e[1]||(e[1]=()=>x("addStudents"))},e[16]||(e[16]=[t("img",{src:ft,alt:""},null,-1),t("span",null," Ученик ",-1)]))])])])]),S.value?(r(),g("div",Ee,[a.value?(r(),g("div",Ze,[t("div",ze,[C(t("input",{type:"checkbox",id:"select-all",onChange:dt,"onUpdate:modelValue":e[6]||(e[6]=W=>n.value=W)},null,544),[[F,n.value]]),e[19]||(e[19]=t("label",{class:"white-bg",for:"select-all"},null,-1))]),e[20]||(e[20]=t("label",{for:"select-all",class:"subtitle"},"Выбреть все",-1))])):E("",!0),t("div",Re,[C(t("button",{class:"custom-btn blue",onClick:at},e[21]||(e[21]=[t("img",{src:wt,alt:""},null,-1),t("span",null," Создать группу ",-1)]),512),[[T,s.value]]),t("button",{class:"custom-btn white",onClick:e[7]||(e[7]=()=>x("archive"))},e[22]||(e[22]=[t("img",{src:St,alt:""},null,-1),t("span",null," Архивировать ",-1)])),t("button",{class:"custom-btn white",onClick:it},e[23]||(e[23]=[t("img",{src:$t,alt:""},null,-1),t("span",{class:"text-red"}," Удалить ",-1)]))])])):(r(),g("div",He,[t("div",Be,[t("div",Ne,[t("button",{class:M(["v-students__menu-button",{active:c.value}]),onClick:e[2]||(e[2]=()=>K("table"))}," Таблица ",2),t("button",{class:M(["v-students__menu-button",{active:a.value}]),onClick:e[3]||(e[3]=()=>K("cards"))}," Карточки ",2)]),t("div",Oe,[t("button",{class:M(["v-students__menu-button",{active:l.value}]),onClick:e[4]||(e[4]=()=>Q("groups"))}," Группы ",2),t("button",{class:M(["v-students__menu-button",{active:s.value}]),onClick:e[5]||(e[5]=()=>Q("students"))}," Ученики ",2)])]),t("div",Ue,[k(q,{to:{name:"archive_students"},class:"v-students__menu-link"},{default:w(()=>e[17]||(e[17]=[t("img",{src:lt,alt:""},null,-1),I(" Перейти в архив ")])),_:1}),e[18]||(e[18]=t("div",{class:"v-students__menu-search"},[t("button",{class:"v-students__menu-search-button"},[t("img",{src:Ct,alt:""})]),t("input",{type:"text",class:"v-students__menu-search-input",placeholder:"Поиск"})],-1))])])),C(t("div",qe,[k(ne,{onStudentSelected:st,onEditItem:ut,onToggleModal:x,ref_key:"studentsTable",ref:u,items:tt.value,type:et.value},null,8,["items","type"])],512),[[T,c.value&&$.value.length]]),C(k(Et,{ref_key:"studentsCards",ref:m,items:tt.value,onStudentSelected:st,type:et.value,onToggleModal:x},null,8,["items","type"]),[[T,a.value&&$.value.length]]),C(t("div",Je,e[24]||(e[24]=[t("div",{class:"loader"},null,-1)]),512),[[T,!$.value.length&&R.value]])],512),[[T,$.value.length]]),C(t("div",Ke,e[25]||(e[25]=[t("div",{class:"null-screen"},[t("h1",null,"Ещё не добавлено ни одного занятия")],-1)]),512),[[T,!$.value.length&&!R.value]])])])]),_:1}),k(G,{name:"fade"},{default:w(()=>[C(k(Ce,{class:M({"modal-active":o.value.addStudents}),onClose:e[8]||(e[8]=()=>x("addStudents"))},null,8,["class"]),[[T,o.value.addStudents]])]),_:1}),k(G,{name:"fade"},{default:w(()=>[C(k(_e,{class:M({"modal-active":o.value.massAddition}),onClose:e[9]||(e[9]=()=>x("massAddition"))},null,8,["class"]),[[T,o.value.massAddition]])]),_:1}),k(G,{name:"fade"},{default:w(()=>[C(k(ve,{class:M({"modal-active":o.value.groupModal}),onClose:e[10]||(e[10]=()=>x("groupModal")),students:p.value},null,8,["class","students"]),[[T,o.value.groupModal]])]),_:1}),k(G,{name:"fade"},{default:w(()=>[C(k(It,{class:M({"modal-active":o.value.deleteModal}),onClose:e[11]||(e[11]=()=>x("deleteModal")),type:_.value,student:y.value,student_amount:f.value,group_amount:d.value},null,8,["class","type","student","student_amount","group_amount"]),[[T,o.value.deleteModal]])]),_:1}),k(G,{name:"fade"},{default:w(()=>[C(k(Ve,{class:M({"modal-active":o.value.archive}),onClose:e[12]||(e[12]=()=>x("archive")),type:_.value},null,8,["class","type"]),[[T,o.value.archive]])]),_:1}),k(G,{name:"fade"},{default:w(()=>[C(k(Nt,{class:M({"modal-active":o.value.editGroup}),onClose:e[13]||(e[13]=()=>x("editGroup"))},null,8,["class"]),[[T,o.value.editGroup]])]),_:1})],64)}}};export{ss as default};
