import{r as t,o as s,i as F,w as M,e as o,f as w,ak as R,s as g,b as G,c as d,g as B,n as p,j as n,I as x,av as T,h as I,k as U,L as O,G as z,J as $,N as J,T as q,F as K,as as Q}from"./index-BaLNjqNl.js";import{_ as C,a as X}from"./v-files-handler-CqXg-tKU.js";import{_ as Y}from"./v-styled-select-F_7OuZBd.js";const Me="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='39.5'%20y='0.5'%20width='39'%20height='39'%20rx='19.5'%20transform='rotate(90%2039.5%200.5)'%20fill='%23F3F4F6'/%3e%3crect%20x='39.5'%20y='0.5'%20width='39'%20height='39'%20rx='19.5'%20transform='rotate(90%2039.5%200.5)'%20stroke='%23F3F4F6'/%3e%3cpath%20d='M15.7578%2020.0001H24.2427M24.2427%2020.0001L20.0003%2015.7577M24.2427%2020.0001L20.0003%2024.2425'%20stroke='%23717680'%20stroke-width='1.85556'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Ve="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='40'%20width='40'%20height='40'%20rx='20'%20transform='rotate(90%2040%200)'%20fill='white'%20fill-opacity='0.08'/%3e%3cpath%20d='M15.7573%2020.0001H24.2422M24.2422%2020.0001L19.9998%2015.7577M24.2422%2020.0001L19.9998%2024.2425'%20stroke='%23E9EAEB'%20stroke-width='1.85556'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Z={class:"v-files-modal"},ee={class:"v-files-modal__container"},oe={__name:"v-files-modal",props:{initialFiles:{type:Array,default:()=>[]}},emits:["saveFiles"],setup(u,{emit:i}){const v=u,k=t(null),b=i,m=t([...v.initialFiles]),y=t(null),r=()=>{k.value&&k.value.close()},c=()=>{b("saveFiles",m.value),r()},f=h=>{m.value=h};return(h,_)=>(s(),F(R,{ref_key:"modalRef",ref:k},{default:M(()=>[o("div",Z,[o("div",ee,[_[0]||(_[0]=o("h2",{class:"v-files-modal__title modal-title"},"Загрузка файла",-1)),w(C,{ref_key:"fileHandler",ref:y,"show-drop-area":!0,onFileAdded:f},null,512),o("div",{class:"v-files-modal__buttons"},[o("button",{class:"v-files-modal__button custom-btn white",onClick:r}," Отменить "),o("button",{class:"v-files-modal__button custom-btn blue",onClick:c}," Сохранить ")])])])]),_:1},512))}},le="data:image/svg+xml,%3csvg%20width='36'%20height='36'%20viewBox='0%200%2036%2036'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='36'%20height='36'%20rx='8'%20fill='%233B414A'/%3e%3cpath%20d='M18.833%209.66663H19.0603C21.778%209.66663%2023.1368%209.66663%2024.0805%2010.3315C24.3508%2010.522%2024.5909%2010.7479%2024.7933%2011.0024C25.4997%2011.8905%2025.4997%2013.1694%2025.4997%2015.7272V17.8484C25.4997%2020.3178%2025.4997%2021.5524%2025.1089%2022.5385C24.4807%2024.1238%2023.1521%2025.3742%2021.4677%2025.9655C20.42%2026.3333%2019.1082%2026.3333%2016.4845%2026.3333C14.9853%2026.3333%2014.2357%2026.3333%2013.637%2026.1231C12.6745%2025.7853%2011.9153%2025.0707%2011.5563%2024.1648C11.333%2023.6014%2011.333%2022.8958%2011.333%2021.4848V18'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.4993%2018C25.4993%2019.5341%2024.2557%2020.7778%2022.7216%2020.7778C22.1668%2020.7778%2021.5127%2020.6806%2020.9732%2020.8251C20.4939%2020.9535%2020.1195%2021.3279%2019.9911%2021.8072C19.8466%2022.3466%2019.9438%2023.0007%2019.9438%2023.5556C19.9438%2025.0897%2018.7001%2026.3333%2017.166%2026.3333'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.1667%2013L10.5%2013M13.8333%209.66663V16.3333'%20stroke='%23717680'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",se={class:"v-home__lesson-homework v-home__lesson-sec"},te={class:"v-home__lesson-homework-row"},ae={class:"v-home__subtitle subtitle"},ne={key:0,class:"v-home__lesson-homework-buttons"},ie={key:0,class:"v-home__lesson-homework-new"},re={key:2,class:"v-home__lesson-homework-deadline"},de={class:"v-home__lesson-homework-block"},ue={key:0,class:"flex gap-3 items-center"},ve={class:"flex gap-3 items-center"},me={class:"styled-checkbox"},ce={class:"inline-flex gap-3 h-full"},he={key:3,class:"flex items-center gap-3"},ke={class:"styled-checkbox"},fe={key:1,class:"v-home__lesson-homework-prev"},_e={class:"v-home__lesson-homework-prev-header"},pe={class:"block-description"},we={key:0,class:"flex gap-3 items-center"},ge=["value"],xe={class:"v-home__lesson-homework-footer"},be={class:"flex gap-2 items-center v-home__lesson-homework-mark"},De={__name:"v-homework",props:{mode:{type:String,default:()=>"all"},title:String,subtitle:String,comment:String,mark:Number,homeWorkDeadline:Date},setup(u){const i=u,v=t([]),k=t([]),b=t([]),m=t(null),y=t(new Date),r=t(""),c=t(!1),f=t(!1),h=t(i.mode==="all"),_=t({files:!1}),N=g(()=>i.title||"Домашнее задание"),W=g(()=>i.subtitle||""),j=g(()=>i.homeWorkDeadline?i.homeWorkDeadline.toISOString().split("T")[0]:""),V=g(()=>i.mode==="completed"),D=g(()=>i.homeWorkDeadline?i.homeWorkDeadline>new Date:null),E=()=>{_.value.files=!0},H=()=>{_.value.files=!1},L=(a=!0)=>{h.value=a},S=a=>{m.value&&m.value.handlePaste(a)&&a.preventDefault()},P=a=>{v.value=[...a],m.value.internalFiles=a,Q(()=>{var e,l;(l=(e=m.value)==null?void 0:e.$forceUpdate)==null||l.call(e)}),H()},A=a=>{console.log(a,v.value),v.value=v.value.filter(e=>e.id!==a.id),console.log(v.value)};return G(()=>{}),(a,e)=>(s(),d(K,null,[o("div",se,[o("div",te,[o("h2",ae,B(N.value),1),u.mode==="all"?(s(),d("div",ne,[o("div",{class:p(["v-home__lesson-homework-header-button",{active:!h.value}]),onClick:e[0]||(e[0]=()=>L(!1))}," Предыдущее ",2),o("div",{class:p(["v-home__lesson-homework-header-button",{active:h.value}]),onClick:L}," Новое ",2)])):n("",!0)]),h.value?(s(),d("div",ie,[c.value?n("",!0):x((s(),d("textarea",{key:0,class:"v-home__lesson-homework-text","onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),onPaste:S,placeholder:"Введите текст домашнего задания. Для вставки файлов используйте Ctrl+V"},null,544)),[[T,r.value]]),c.value?n("",!0):(s(),F(C,{key:1,ref_key:"fileHandler",ref:m,modelValue:v.value,onFileRemoved:A},null,8,["modelValue"])),!c.value&&u.mode==="all"?(s(),d("div",re,[o("div",de,[f.value?n("",!0):(s(),d("div",ue,[e[9]||(e[9]=I(" Дедлайн ")),w(U(z),{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),locale:"ru-ru","auto-apply":!0,format:U(O)},{"clear-icon":M(({clear:l})=>e[8]||(e[8]=[])),_:1},8,["modelValue","format"])])),o("div",ve,[o("div",me,[x(o("input",{id:"next-lesson",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>f.value=l)},null,512),[[$,f.value]]),e[10]||(e[10]=o("label",{for:"next-lesson"},null,-1))]),e[11]||(e[11]=o("label",{for:"next-lesson"},"До следующего занятия",-1))])]),o("div",ce,[o("div",{class:"file-input",onClick:E},e[12]||(e[12]=[o("img",{class:"day-el",src:X,alt:""},null,-1),o("img",{class:"night-el",src:le,alt:""},null,-1)])),o("button",{class:p(["v-home__lesson-homework-button save",{unactive:!r.value.length}])}," Сохранить ",2)])])):n("",!0),u.mode==="all"?(s(),d("div",he,[o("div",ke,[x(o("input",{type:"checkbox",id:"no-homework","onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l)},null,512),[[$,c.value]]),e[13]||(e[13]=o("label",{for:"no-homework"},null,-1))]),e[14]||(e[14]=o("label",{for:"no-homework"},"Без задания",-1))])):n("",!0),o("button",{class:p(["v-home__lesson-homework-button save mob",{unactive:!r.value.length}])}," Сохранить ",2)])):n("",!0),h.value?n("",!0):(s(),d("div",fe,[o("div",_e,[o("p",pe,B(W.value),1),f.value?n("",!0):(s(),d("div",we,[e[15]||(e[15]=o("p",{class:"block-description"},"Дедлайн",-1)),o("input",{class:p(["styled-datepicker",{red:D.value,green:!D.value}]),type:"date",readonly:"",value:j.value},null,10,ge)]))]),w(C,{files:k.value,"onUpdate:files":e[5]||(e[5]=l=>k.value=l)},null,8,["files"]),e[17]||(e[17]=o("h3",{class:"v-home__lesson-homework-prev-title"},"Ответ ученика",-1)),w(C,{files:b.value,"onUpdate:files":e[6]||(e[6]=l=>b.value=l)},null,8,["files"]),!c.value&&u.mode!=="completed"?x((s(),d("textarea",{key:0,class:"v-home__lesson-homework-text","onUpdate:modelValue":e[7]||(e[7]=l=>r.value=l),onPaste:S,placeholder:"Ваш комментарий"},null,544)),[[T,r.value]]):n("",!0),o("div",xe,[o("div",be,[e[16]||(e[16]=o("span",null,"Оценка",-1)),w(Y,{"is-readonly":V.value,"default-value":u.mark,items:[1,2,3,4,5,6,7,8,9,10,11,12]},null,8,["is-readonly","default-value"])]),x(o("button",{class:p(["v-home__lesson-homework-button save",{unactive:!r.value.length}])}," Сохранить ",2),[[J,!V.value]])])]))]),w(q,{name:"fade"},{default:M(()=>[_.value.files?(s(),F(oe,{key:0,onClose:H,onSaveFiles:P})):n("",!0)]),_:1})],64))}};export{Me as _,Ve as a,De as b,oe as c};
