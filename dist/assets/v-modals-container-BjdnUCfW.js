import{r as c,o as q,q as me,k as ae,l as pe,c as F,h as _e,i as u,a as w,d as t,b as g,w as m,s as x,n as D,m as k,e as f,g as _,j as C,v as z,x as O,y as G,t as j,T as B,F as oe}from"./index-CAzfu9s5.js";import{e as Q,h as Y,G as S,i as J,j as K,k as X,a as ee,b as te,l as ge,m as fe,f as ke,n as be,o as ye,p as we,q as xe,r as I,s as he,u as se,w as $e,x as Me}from"./v-header-Di5yUs8e.js";const kt="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%231D4ECC'/%3e%3c/svg%3e",bt="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%23b5f5bf'/%3e%3c/svg%3e",le="data:image/svg+xml,%3csvg%20width='6'%20height='19'%20viewBox='0%200%206%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%207L-6.52533e-07%2013.9282L-4.68497e-08%200.0717966L6%207Z'%20fill='%23fff'/%3e%3c/svg%3e";function ne(d=480){const p=c(window.innerWidth<=d),n=()=>{p.value=window.innerWidth<=d};return q(()=>{window.addEventListener("resize",n)}),me(()=>{window.removeEventListener("resize",n)}),{isMobile:p}}const Ve={class:"v-calendar-menu"},Le={class:"v-calendar-menu__block"},Ce={class:"flex gap-2"},De={class:"v-calendar-menu__picker picker"},Be={class:"v-calendar-menu__select"},Se={class:"v-calendar-menu__select-buttons"},qe={class:"v-calendar-menu__select-button"},Ue={key:0,class:"v-calendar-menu__checkbox flex gap-2"},He={class:"v-calendar-menu__buttons flex"},We={key:0,class:"flex justify-between"},je={class:"v-calendar-menu__select mob"},Ie={class:"v-calendar-menu__select-buttons"},Ze={class:"v-calendar-menu__select-button"},Ne={key:0,class:"v-calendar-menu__checkbox flex gap-2 mob"},Te={key:0,class:"v-calendar-menu mob"},Re={class:"v-calendar-menu__block"},Ae={class:"flex gap-2 items-center justify-center"},Ee={class:"v-calendar-menu__picker picker"},Pe={class:"v-calendar-menu__date flex items-center justify-center"},Fe={key:0,class:"v-calendar-menu__date-text"},ze={key:1},Oe={class:"v-calendar-menu__date-text"},Ge={class:"v-calendar-menu__date-subtitle"},Qe={class:"v-calendar-menu__buttons flex"},yt={__name:"v-calendar-menu",props:{isShowedBreak:{type:Boolean,required:!1},type:{type:String,required:!0}},emits:["toggleBreakMode","setMonth","setWeek","paginateMonth","paginateWeek"],setup(d,{emit:p}){const n=p,v=c(localStorage.getItem("breakMode")),l=c({}),a=new Date,o=c(`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`),b=c(o.value.slice(0,4)),y=c(),Z=c(),ie=ne(768),de=ne(480),U=c(),H=c(),N=ae(),h=pe(),T=d,W=c({lessons:!1,trial_lesson:!1}),ue=()=>{const r=o.value.split("-")[1],e=o.value.split("-")[0],i={...h.query,selected_date:`${r}.${e}`};N.push({query:i})},R=r=>{let e=parseInt(o.value.split("-")[1]),i=parseInt(b.value);r=="next"?e===12?(e=1,i+=1):e+=1:e===1?(e=12,i-=1):e-=1,Z.value=Q(e-1),o.value=`${i}-${String(e).padStart(2,0)}`,y.value={month:e,year:i},n("paginateMonth",{month:e,year:i}),ue()},re=async r=>{const e={...h.query,start_date:r};await N.push({query:e}),console.log("В апдейте",h.query)},A=async r=>{const e=new Date(l.value[0]),i=r==="next"?7:-7;e.setDate(e.getDate()+i);const s=ke(e);re(s).then(()=>{ce(),n("paginateWeek")})},E=r=>{l.value=r,n("setWeek",r[0].toLocaleDateString("ru-RU"))},M=r=>{console.log(r),W.value[r]=!W.value[r]},ve=()=>{n("toggleBreakMode")},P=r=>{console.log(r,y.value),y.value=r,n("setMonth",r)},ce=()=>{const e=h.query.start_date.replace(/\./g,"-");console.log(e);const i=new Date(e.split("-").reverse().join("-")),s={day:"numeric",month:"long"};U.value=i.toLocaleDateString("ru-RU",s);const $=new Date(i);$.setDate(i.getDate()+7),H.value=$.toLocaleDateString("ru-RU",s),l.value=[i,$],console.log(U.value,H.value)},V=F(()=>T.type==="month"?()=>R("next"):()=>A("next")),L=F(()=>T.type==="month"?()=>R("prev"):()=>A("prev"));return q(()=>{const r=h.query;if(r.start_date){const e=r.start_date.replace(/\./g,"-"),i=new Date(e.split("-").reverse().join("-")),s={day:"numeric",month:"long"};U.value=i.toLocaleDateString("ru-RU",s);const $=new Date(i);$.setDate(i.getDate()+7),H.value=$.toLocaleDateString("ru-RU",s),l.value=[i,$]}if(h.query.selected_date){const[e,i]=h.query.selected_date.split(".").map(Number);Z.value=Q(e-1),!isNaN(e)&&!isNaN(i)&&(y.value={month:e-1,year:i})}}),(r,e)=>{const i=_e("router-link");return u(),w(oe,null,[t("div",Ve,[t("div",Le,[t("div",Ce,[t("div",De,[g(i,{to:{name:"calendar-week"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="week"}])},{default:m(()=>e[19]||(e[19]=[x("Неделя")])),_:1},8,["class"]),g(i,{to:{name:"home"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="month"}])},{default:m(()=>e[20]||(e[20]=[x("Месяц")])),_:1},8,["class"])]),t("div",Be,[t("div",Se,[t("div",qe,[d.type==="month"?(u(),k(f(S),{key:0,"month-picker":"",locale:"ru-ru","auto-apply":!0,format:f(Y),modelValue:y.value,"onUpdate:modelValue":[e[0]||(e[0]=s=>y.value=s),P]},{"clear-icon":m(({clear:s})=>e[21]||(e[21]=[])),_:1},8,["format","modelValue"])):_("",!0),d.type==="week"?(u(),k(f(S),{key:1,"week-picker":"",format:f(J),locale:"ru-ru","auto-apply":!0,modelValue:l.value,"onUpdate:modelValue":[e[1]||(e[1]=s=>l.value=s),E]},{"clear-icon":m(({clear:s})=>e[22]||(e[22]=[])),_:1},8,["format","modelValue"])):_("",!0),e[23]||(e[23]=t("div",{class:"v-calendar-menu__select-button-image"},[t("img",{class:"day-el",src:K,alt:""}),t("img",{class:"night-el",src:X,alt:""})],-1))]),t("div",{class:"v-calendar-menu__select-button",onClick:e[2]||(e[2]=C((...s)=>L.value&&L.value(...s),["prevent"]))},e[24]||(e[24]=[z('<svg class="day-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#202020"></path></g></svg><svg class="night-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#fff"></path></g></svg>',2)])),t("div",{class:"v-calendar-menu__select-button",onClick:e[3]||(e[3]=C((...s)=>V.value&&V.value(...s),["prevent"]))},e[25]||(e[25]=[t("svg",{class:"day-el",width:"6",height:"14",viewBox:"0 0 6 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z",fill:"#202020"})],-1),t("img",{src:le,class:"night-el",alt:""},null,-1)]))])]),d.isShowedBreak?(u(),w("div",Ue,[O(t("input",{type:"checkbox",class:"custom-checkbox-input",id:"break",onChange:ve,"onUpdate:modelValue":e[4]||(e[4]=s=>v.value=s)},null,544),[[G,v.value]]),e[26]||(e[26]=t("label",{for:"break",class:"custom-checkbox-label"},[t("span",{class:"custom-checkbox"}),t("div",{class:"v-calendar-menu__checkbox-subtitle"},"Показывать перерыв между занятиями")],-1))])):_("",!0)]),t("div",He,[t("div",{class:"v-calendar-menu__button trial-btn",onClick:e[5]||(e[5]=s=>M("trial_lesson"))},e[27]||(e[27]=[t("div",{class:"button-plus"},"+",-1),x(" Пробное занятие ")])),t("div",{class:"v-calendar-menu__button blue-btn",onClick:e[6]||(e[6]=s=>M("lessons"))},e[28]||(e[28]=[t("div",{class:"button-plus"},"+",-1),x(" Занятие ")]))])]),f(ie).isMobile?(u(),w("div",We,[t("div",je,[t("div",Ie,[t("div",Ze,[d.type==="month"?(u(),k(f(S),{key:0,"month-picker":"",locale:"ru-ru","auto-apply":!0,format:f(Y),modelValue:y.value,"onUpdate:modelValue":[e[7]||(e[7]=s=>y.value=s),P]},{"clear-icon":m(({clear:s})=>e[29]||(e[29]=[])),_:1},8,["format","modelValue"])):_("",!0),d.type==="week"?(u(),k(f(S),{key:1,"week-picker":"",format:f(J),locale:"ru-ru","auto-apply":!0,modelValue:l.value,"onUpdate:modelValue":[e[8]||(e[8]=s=>l.value=s),E]},{"clear-icon":m(({clear:s})=>e[30]||(e[30]=[])),_:1},8,["format","modelValue"])):_("",!0),e[31]||(e[31]=t("div",{class:"v-calendar-menu__select-button-image"},[t("img",{class:"day-el",src:K,alt:""}),t("img",{class:"night-el",src:X,alt:""})],-1))]),t("div",{class:"v-calendar-menu__select-button",onClick:e[9]||(e[9]=C((...s)=>L.value&&L.value(...s),["prevent"]))},e[32]||(e[32]=[z('<svg class="day-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#202020"></path></g></svg><svg class="night-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#fff"></path></g></svg>',2)])),t("div",{class:"v-calendar-menu__select-button",onClick:e[10]||(e[10]=C((...s)=>V.value&&V.value(...s),["prevent"]))},e[33]||(e[33]=[t("svg",{class:"day-el",width:"6",height:"14",viewBox:"0 0 6 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z",fill:"#202020"})],-1),t("img",{src:le,class:"night-el",alt:""},null,-1)]))])]),d.isShowedBreak?(u(),w("div",Ne,[O(t("input",{type:"checkbox",class:"custom-checkbox-input",id:"mob-break",onChange:e[11]||(e[11]=s=>n("toggleBreakMode")),"onUpdate:modelValue":e[12]||(e[12]=s=>v.value=s)},null,544),[[G,v.value]]),e[34]||(e[34]=t("label",{for:"mob-break",class:"custom-checkbox-label"},[t("span",{class:"custom-checkbox"}),t("div",{class:"v-calendar-menu__checkbox-subtitle"},"Показывать перерыв между занятиями")],-1))])):_("",!0)])):_("",!0)]),f(de).isMobile?(u(),w("div",Te,[t("div",Re,[t("div",Ae,[t("div",Ee,[g(i,{to:{name:"calendar-week"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="week"}])},{default:m(()=>e[35]||(e[35]=[x("Неделя")])),_:1},8,["class"]),g(i,{to:{name:"home"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="month"}])},{default:m(()=>e[36]||(e[36]=[x("Месяц")])),_:1},8,["class"])])]),t("div",Pe,[t("a",{class:"v-calendar-menu__date-back",onClick:e[13]||(e[13]=C((...s)=>L.value&&L.value(...s),["prevent"]))},e[37]||(e[37]=[t("img",{src:ee,class:"day-el",alt:""},null,-1),t("img",{src:te,class:"night-el",alt:""},null,-1)])),d.type=="week"?(u(),w("h3",Fe,j(U.value)+" - "+j(H.value),1)):_("",!0),d.type=="month"?(u(),w("div",ze,[t("h3",Oe,j(Z.value),1),t("p",Ge,j(b.value),1)])):_("",!0),t("a",{class:"v-calendar-menu__date-next",onClick:e[14]||(e[14]=C((...s)=>V.value&&V.value(...s),["prevent"]))},e[38]||(e[38]=[t("img",{src:ee,class:"day-el",alt:""},null,-1),t("img",{src:te,class:"night-el",alt:""},null,-1)]))]),t("div",Qe,[t("div",{class:"v-calendar-menu__button trial-btn",onClick:e[15]||(e[15]=s=>M("trial_lesson"))},e[39]||(e[39]=[t("div",{class:"button-plus"},"+",-1),x(" Пробное занятие ")])),t("div",{class:"v-calendar-menu__button blue-btn",onClick:e[16]||(e[16]=s=>M("lessons"))},e[40]||(e[40]=[t("div",{class:"button-plus"},"+",-1),x(" Занятие ")]))])])])):_("",!0),g(B,{name:"fade"},{default:m(()=>[W.value.lessons?(u(),k(ge,{key:0,onClose:e[17]||(e[17]=s=>M("lessons"))})):_("",!0)]),_:1}),g(B,{name:"fade"},{default:m(()=>[W.value.trial_lesson?(u(),k(fe,{key:0,onClose:e[18]||(e[18]=s=>M("trial_lesson"))})):_("",!0)]),_:1})],64)}}},Ye={class:"modal-add"},Je={class:"picker modal-add__picker"},Ke={key:0,class:"single"},Xe={key:1,class:"stable"},et={__name:"v-change-modal",props:{lesson:{type:Object,require:!0}},setup(d){const p=d,n=c("single");c(null),c(null),c("02/01/2025"),c([{id:1,text:"ПН",active:!1,day_of_week:1},{id:2,text:"ВТ",active:!1,day_of_week:2},{id:3,text:"СР",active:!1,day_of_week:3},{id:4,text:"ЧТ",active:!1,day_of_week:4},{id:5,text:"ПТ",active:!1,day_of_week:5},{id:6,text:"СБ",active:!1,day_of_week:6},{id:7,text:"ВС",active:!1,day_of_week:7}]),c([]),c({});const v=c({student:{default:"Ученик",options:[{id:1,text:"Артур"}]}}),l=o=>{n.value=o},a=o=>{console.log(o)};return q(()=>{be().then(o=>{v.value.student=o,console.log(v.value)}),console.log("Выбранный урок - ",p.lesson)}),(o,b)=>(u(),k(I,null,{default:m(()=>[t("div",Ye,[b[2]||(b[2]=t("div",{class:"modal-title"},"Редактирование занятия",-1)),t("div",Je,[t("div",{class:D(["picker__item",{active:n.value=="single"}]),onClick:b[0]||(b[0]=y=>l("single"))}," Разовое занятие ",2),t("div",{class:D(["picker__item",{active:n.value=="stable"}]),onClick:b[1]||(b[1]=y=>l("stable"))}," Постоянные занятия ",2)]),g(ye,{options:v.value.student,onValueSelected:a},null,8,["options"]),n.value=="single"?(u(),w("div",Ke,[g(we)])):_("",!0),n.value=="stable"?(u(),w("div",Xe,[g(xe)])):_("",!0)])]),_:1}))}},tt={class:"modal-transfer"},st=["value"],lt={class:"flex gap-4"},nt={class:"modal-transfer__block"},at=["value"],ot={class:"flex gap-2"},it=["value"],dt=["value"],ut={class:"modal-transfer__block"},rt={class:"flex gap-2"},vt={__name:"v-transfer-modal",props:{lesson:{type:Object,require:!0}},setup(d){const p=d,n=c({date:new Date,time:{1:{start:"",end:""}}});return q(()=>{console.log("Выбранный урок - ",p.lesson)}),(v,l)=>(u(),k(I,null,{default:m(()=>[t("div",tt,[l[7]||(l[7]=t("h2",{class:"modal-title mb-4"},"Перенос занятия",-1)),t("input",{type:"text",class:"styled-input",value:p.lesson.student_name,readonly:""},null,8,st),t("div",lt,[t("div",nt,[l[4]||(l[4]=t("h3",{class:"text-subtitle"},"Перенести с",-1)),t("input",{type:"text",class:"styled-input",value:p.lesson.date,readonly:""},null,8,at),t("div",ot,[t("input",{type:"time",class:"styled-input",value:p.lesson.time_start,readonly:""},null,8,it),t("input",{type:"time",class:"styled-input",value:p.lesson.time_end,readonly:""},null,8,dt)])]),t("div",ut,[l[6]||(l[6]=t("h3",{class:"text-subtitle"},"на",-1)),g(f(S),{class:"datepicker",format:f(he),locale:"ru-ru",modelValue:n.value.date,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value.date=a),"auto-apply":!0},{"clear-icon":m(({clear:a})=>l[5]||(l[5]=[])),_:1},8,["format","modelValue"]),t("div",rt,[g(f(se),{"onUpdate:modelValue":[l[1]||(l[1]=a=>f($e)(1,n.value.time)),l[2]||(l[2]=a=>n.value.time.start=a)],modelValue:n.value.time.start,placeholder:"--:--",clearable:!1},null,8,["modelValue"]),g(f(se),{modelValue:n.value.time.end,"onUpdate:modelValue":l[3]||(l[3]=a=>n.value.time.end=a),placeholder:"--:--",clearable:!1},null,8,["modelValue"])])])])])]),_:1}))}},ct={class:"v-buttons-modal"},mt={class:"v-buttons-modal__container"},pt={__name:"v-buttons-modal",emits:["toggleLessonModals"],setup(d,{emit:p}){const n=p,v=l=>{n("toggleLessonModals",l)};return(l,a)=>(u(),k(I,{id:"buttons-modal"},{default:m(()=>[t("div",ct,[a[3]||(a[3]=t("h2",{class:"modal-title"},"Занятие",-1)),t("div",mt,[t("div",{class:"v-buttons-modal__button white-btn",onClick:a[0]||(a[0]=o=>v("delete_lesson"))}," Удалить "),t("div",{class:"v-buttons-modal__button blue-btn",onClick:a[1]||(a[1]=o=>v("change_lesson"))}," Редакиировать правило "),t("div",{class:"v-buttons-modal__button blue-btn",onClick:a[2]||(a[2]=o=>v("transfer_lesson"))}," Перенести ")])])]),_:1}))}},_t={__name:"v-delete-lesson-modal",props:{lesson:{type:Object,require:!0}},setup(d){const p=ae(),n=d,v=()=>{console.log("Урок для удаления -",n.lesson),Me(n.lesson.lesson_id).then(()=>{p.go(0)})};return q(()=>{console.log("Выбранный урок - ",n.lesson)}),(l,a)=>(u(),k(I,{id:"delete-lesson-modal"},{default:m(()=>[t("div",{class:"v-delete-lesson-modal"},[a[1]||(a[1]=t("div",{class:"modal-title"},"Удалить занятие?",-1)),t("div",{class:"v-delete-lesson-modal__container"},[t("div",{class:"v-delete-lesson-modal__button blue-btn",onClick:v},"Да"),a[0]||(a[0]=t("div",{class:"v-delete-lesson-modal__button white-btn"},"Нет",-1))])])]),_:1}))}},wt={__name:"v-modals-container",setup(d,{expose:p}){const n=(a,o=null)=>{o&&(l.value=o),v.value[a]=!v.value[a]},v=c({buttons:!1,delete_lesson:!1,transfer_lesson:!1,change_lesson:!1}),l=c({});return p({toggleLessonModals:n}),(a,o)=>(u(),w(oe,null,[g(B,{name:"fade"},{default:m(()=>[v.value.buttons?(u(),k(pt,{key:0,onToggleLessonModals:n,onClose:o[0]||(o[0]=b=>n("buttons"))})):_("",!0)]),_:1}),g(B,{name:"fade"},{default:m(()=>[v.value.transfer_lesson?(u(),k(vt,{key:0,onClose:o[1]||(o[1]=b=>n("transfer_lesson")),lesson:l.value},null,8,["lesson"])):_("",!0)]),_:1}),g(B,{name:"fade"},{default:m(()=>[v.value.change_lesson?(u(),k(et,{key:0,onClose:o[2]||(o[2]=b=>n("change_lesson")),lesson:l.value},null,8,["lesson"])):_("",!0)]),_:1}),g(B,{name:"fade"},{default:m(()=>[v.value.delete_lesson?(u(),k(_t,{key:0,onClose:o[3]||(o[3]=b=>n("delete_lesson")),lesson:l.value},null,8,["lesson"])):_("",!0)]),_:1})],64))}};export{yt as _,kt as a,bt as b,wt as c,ne as u};
