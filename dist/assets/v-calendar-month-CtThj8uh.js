import{r as D,u as x,c as A,o as R,a,b as g,d as s,e as T,F as m,f as v,w as j,g as y,h as z,i as n,t as d,j as W,n as q}from"./index-CkjInQhv.js";import{_ as G,a as H,b as K,v as P}from"./v-header-BIt_ad7y.js";import{u as Q,_ as N,a as U,b as X,c as Y}from"./useIsMobile-B2_vk4Cw.js";const Z={class:"wrapper"},ss={key:0,class:"v-calendar-month"},es={class:"v-calendar-month__container container"},ts={class:"v-calendar-month__content scroll-container"},as={class:"v-calendar-month__table calendar"},ns={class:"calendar-header"},os=["onDrop"],ls={key:0,class:"calendar-row__item-content calendar-card"},ds={class:"calendar-card__num"},rs=["onClick","onDragstart"],_s={class:"calendar-card__lesson"},is={key:0,class:"calendar-card__lesson break"},cs={key:1,class:"v-calendar-month-mob mob-page"},us={class:"container"},ms={class:"v-calendar-month-mob__container"},vs={class:"v-calendar-month-mob__table calendar"},ys={class:"calendar-header"},ks=["onClick"],hs={key:0,class:"calendar-row__item-content calendar-card"},ps={class:"calendar-card__num"},gs={class:"calendar-card__content"},bs={key:0,class:"calendar-card__lesson break"},fs={key:0,class:"v-calendar-month-mob__info lesson-info"},ws={class:"v-calendar-month-mob__day day"},Ds={class:"day__header"},Cs={class:"day__date"},Ss={class:"day__lesson"},Ls={class:"day__lesson-time"},Ms={class:"day__lesson-name"},Ns={key:0,class:"day__lesson break"},Is={class:"day__lesson-block"},Bs={class:"day__lesson-time"},Es={key:0},Vs={__name:"v-calendar-month",setup($s){const L=D([{days_week:"Пн",id:1},{days_week:"Вт",id:2},{days_week:"Ср",id:3},{days_week:"Чт",id:4},{days_week:"Пт",id:5},{days_week:"Сб",id:6},{days_week:"Вс",id:7}]),i=D({weeks:{1:{6:{day:1,lessons:[{lesson_id:265,student_name:"Даниил",start_time:"14:00",end_time:"15:00"},{lesson_id:266,student_name:"Даниил",start_time:"16:00",end_time:"17:00"}]},7:{day:2,lessons:[]}},2:{1:{day:3,lessons:[]},2:{day:4,lessons:[]},3:{day:5,lessons:[]},4:{day:6,lessons:[{lesson_id:265,student_name:"Даниил",start_time:"14:00",end_time:"15:00"},{lesson_id:266,student_name:"Даниил",start_time:"16:00",end_time:"17:00"},{lesson_id:267,student_name:"Даниил",start_time:"20:00",end_time:"21:00"},{lesson_id:268,student_name:"Даниил",start_time:"22:00",end_time:"23:00"}]},5:{day:7,lessons:[]},6:{day:8,lessons:[]},7:{day:9,lessons:[]}},3:{1:{day:10,lessons:[]},2:{day:11,lessons:[]},3:{day:12,lessons:[]},4:{day:13,lessons:[]},5:{day:14,lessons:[]},6:{day:15,lessons:[]},7:{day:16,lessons:[]}},4:{1:{day:17,lessons:[]},2:{day:18,lessons:[]},3:{day:19,lessons:[]},4:{day:20,lessons:[]},5:{day:21,lessons:[]},6:{day:22,lessons:[]},7:{day:23,lessons:[]}},5:{1:{day:24,lessons:[]},2:{day:25,lessons:[]},3:{day:26,lessons:[]},4:{day:27,lessons:[]},5:{day:28,lessons:[]}}},breaks:{265:{start_time:"15:00",end_time:"15:30"}}}),c=D([]),C=D(),{isMobile:I}=Q(),M=x("modalsContainer"),B=(_,t)=>{c.value[0]=parseInt(_),c.value[1]=t,localStorage.setItem("activeDay",JSON.stringify(c.value)),console.log(JSON.parse(localStorage.getItem("activeDay")))},E=(_,t,k,e,r)=>{C.value={lesson:t,fromColumnIndex:e,fromRowIndex:k,fromLessonIndex:r}},$=(_,t,k)=>{const{lesson:e,fromColumnIndex:r,fromRowIndex:o,fromLessonIndex:l}=C.value;if(r!==t||o!==k){const S=i.value.weeks[o][r].lessons,b=i.value.weeks[k][t].lessons,h=p=>{const[f,w]=p.split(":").map(Number);return f*60+w},J=h(e.start_time),O=h(e.end_time);for(let p of b){const f=h(p.start_time);if(!(h(p.end_time)<=J||f>=O)){alert("В этот день уже есть занятие на данное время");return}}S.splice(l,1),b.push(e),b.sort((p,f)=>{const w=h(p.start_time),V=h(f.start_time);return w-V})}C.value=null},F=_=>{M.value.toggleLessonModals("buttons",_)},u=A(()=>{if(c.value.length){const _=i.value.weeks[c.value[0]];if(_)return _[c.value[1]]}return null});return R(()=>{c.value=JSON.parse(localStorage.getItem("activeDay"))||[],console.log(u.value)}),(_,t)=>{const k=z("router-link");return n(),a("div",Z,[g(G),s("main",null,[T(I)?(n(),a("section",cs,[s("div",us,[s("div",ms,[g(N,{type:"month"}),s("table",vs,[s("thead",null,[s("tr",ys,[(n(!0),a(m,null,v(L.value,e=>(n(),a("th",{class:"calendar-header__item",key:e.id},d(e.days_week),1))),128))])]),s("tbody",null,[(n(!0),a(m,null,v(i.value.weeks,(e,r)=>(n(),a("tr",{class:"calendar-row",key:r},[(n(),a(m,null,v(7,o=>s("td",{class:q(["calendar-row__item",{active:r==c.value[0]&&o==c.value[1]}]),onClick:l=>B(r,o),key:o},[e[o]?(n(),a("div",hs,[s("div",ps,d(e[o].day),1),s("div",gs,[(n(!0),a(m,null,v(e[o].lessons,l=>(n(),a("div",{class:"calendar-card__lesson",key:l.lesson_id}))),128)),e[o].breaks&&e[o].breaks[_.lesson.lesson_id]?(n(),a("div",bs)):y("",!0)])])):y("",!0)],10,ks)),64))]))),128))])])]),u.value?(n(),a("div",fs,[g(k,{to:{name:"calendar-day"}},{default:j(()=>[s("div",ws,[s("div",Ds,[s("p",Cs,d(u.value.day),1),t[1]||(t[1]=s("img",{src:H,class:"day-el",alt:""},null,-1)),t[2]||(t[2]=s("img",{src:K,class:"night-el",alt:""},null,-1))]),(n(!0),a(m,null,v(u.value.lessons,e=>(n(),a("div",{class:"day__content",key:e.id},[s("div",Ss,[s("div",Ls,[t[3]||(t[3]=s("div",{class:"day__lesson-circle"},null,-1)),s("p",null,d(e.start_time),1),t[4]||(t[4]=s("p",null,"-",-1)),s("p",null,d(e.end_time),1)]),s("div",Ms,d(e.student_name),1)]),u.value.breaks&&u.value.breaks[e.lesson_id]?(n(),a("div",Ns,[s("div",Is,[t[6]||(t[6]=s("img",{src:U,class:"day-el",alt:""},null,-1)),t[7]||(t[7]=s("img",{src:X,class:"night-el",alt:""},null,-1)),s("div",Bs,[s("p",null,d(u.value.breaks[e.lesson_id].start_time),1),t[5]||(t[5]=s("p",null,"-",-1)),s("p",null,d(u.value.breaks[e.lesson_id].end_time),1)])]),t[8]||(t[8]=s("div",{class:"day__lesson-name"},"Перерыв",-1))])):y("",!0)]))),128)),u.value.lessons.length?y("",!0):(n(),a("div",Es,t[9]||(t[9]=[s("h2",{class:"title pb-7"},"В этот день у вас нет уроков",-1)])))])]),_:1})])):y("",!0)])])):(n(),a("section",ss,[s("div",es,[g(N,{type:"month"}),s("div",ts,[s("table",as,[s("thead",null,[s("tr",ns,[(n(!0),a(m,null,v(L.value,e=>(n(),a("th",{class:"calendar-header__item",key:e.id},d(e.days_week),1))),128))])]),s("tbody",null,[(n(!0),a(m,null,v(i.value.weeks,(e,r)=>(n(),a("tr",{class:"calendar-row",key:r},[(n(),a(m,null,v(7,o=>s("td",{class:"calendar-row__item",key:o,onDragover:t[0]||(t[0]=W(()=>{},["prevent"])),onDrop:l=>$(l,o,r)},[e[o]?(n(),a("div",ls,[s("div",ds,d(e[o].day),1),(n(!0),a(m,null,v(e[o].lessons,(l,S)=>(n(),a("div",{class:"calendar-card__content",key:l.lesson_id,onClick:()=>F(l),draggable:"true",onDragstart:b=>E(b,l,r,o,S)},[s("div",_s,d(l.start_time)+" - "+d(l.end_time)+" "+d(l.student_name),1),i.value.breaks&&i.value.breaks[l.lesson_id]?(n(),a("div",is,d(i.value.breaks[l.lesson_id].start_time)+" - "+d(i.value.breaks[l.lesson_id].end_time)+" "+d(l.student_name),1)):y("",!0)],40,rs))),128))])):y("",!0)],40,os)),64))]))),128))])])])])]))]),g(Y,{ref_key:"modalsContainer",ref:M},null,512),g(P)])}}};export{Vs as default};
