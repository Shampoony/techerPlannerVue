import{r as n,o as E,a as h,d as t,b as r,t as $,s as g,w as v,e as B,T as D,F as V,l as F,i as _,m as b,g as T}from"./index-BYApLebD.js";import{c as M,a as N,b as S,A as q,_ as U,v as A,n as H,o as I}from"./v-header-CDLgKR3z.js";import{d as L}from"./daypilot-vue.min-Ce1s0Pc0.js";const O={class:"v-calendar-day"},P={class:"wrapper"},j={class:"v-calendar-day__sec mob-page"},z={class:"v-calendar-day__sec-container container"},G={class:"v-calendar-day__date"},J={class:"v-calendar-day__buttons"},K={class:"event"},Q={class:"event-header"},W={class:"event-text"},te={__name:"v-calendar-day",setup(X){const d=n([]),o=n(),m=n(),k=n(null),f=F();n({cellDuration:60});const i=n({lessons:!1,trial_lesson:!1}),c=s=>{i.value[s]=!i.value[s]},p=n(),C=async()=>{const s=await q(o.value),e=[];s.lessons.forEach(a=>{const{start_time:u,end_time:l,...y}=a,R=`${o.value} ${u}`.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1T").replace(" ",""),x=`${o.value} ${l}`.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1T").replace(" ","");e.push({start:R,end:x,start_time:l.slice(0,5),end_time:l.slice(0,5),...y})}),d.value=e,console.log(d.value)},w=s=>{const[e,a,u]=s.split("."),l=new Date(u,a-1,e);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long"}).format(l)};return E(()=>{f.query.date&&(o.value=f.query.date,p.value=M(o.value).split("T")[0],m.value=w(o.value)),C().then(()=>{console.log(d.value)})}),(s,e)=>(_(),h(V,null,[t("div",O,[t("div",P,[r(U),t("main",null,[t("section",j,[t("div",z,[t("div",{class:"v-calendar-day__back",onClick:e[0]||(e[0]=a=>s.$router.go(-1))},e[5]||(e[5]=[t("img",{src:N,class:"day-el rotate-180",alt:""},null,-1),t("img",{src:S,class:"night-el rotate-180",alt:""},null,-1),t("p",{class:"text-black"},"Назад",-1)])),t("h1",G,$(m.value),1),t("div",J,[t("div",{class:"v-calendar-day__button trial-btn",onClick:e[1]||(e[1]=a=>c("trial_lesson"))},e[6]||(e[6]=[t("div",{class:"button-plus"},"+",-1),g(" Добавить пробное занятие ")])),t("div",{class:"v-calendar-day__button blue-btn",onClick:e[2]||(e[2]=a=>c("lessons"))},e[7]||(e[7]=[t("div",{class:"button-plus"},"+",-1),g(" Добавить занятие ")]))]),r(B(L.DayPilotCalendar),{startDate:p.value,viewType:"day",locale:"ru-RU",events:d.value,eventBorderRadius:5,timeRangeSelectedHandling:"Disabled",cellDuration:60,height:400,ref_key:"calendarRef",ref:k},{event:v(({event:a})=>[t("div",K,[t("div",Q,[t("span",W,$(a.data.student_name),1)])])]),_:1},8,["startDate","events"])])])]),r(A)])]),r(D,{name:"fade"},{default:v(()=>[i.value.lessons?(_(),b(H,{key:0,onClose:e[3]||(e[3]=a=>c("lessons"))})):T("",!0)]),_:1}),r(D,{name:"fade"},{default:v(()=>[i.value.trial_lesson?(_(),b(I,{key:0,onClose:e[4]||(e[4]=a=>c("trial_lesson"))})):T("",!0)]),_:1})],64))}};export{te as default};
