import{r as D,u as J,c as O,o as A,a,b as p,d as s,e as R,F as m,f as v,w as T,g as y,h as Z,i as n,t as d,j,n as z}from"./index-B7C430aU.js";import{_ as W,a as q,b as G,v as K}from"./v-header-BxzqzGvH.js";import{u as P,_ as S,a as Q}from"./useIsMobile-B0t24SC2.js";const U="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%231D4ECC'/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%23b5f5bf'/%3e%3c/svg%3e",Y={class:"wrapper"},ss={key:0,class:"v-calendar-month"},es={class:"v-calendar-month__container container"},ts={class:"v-calendar-month__content scroll-container"},as={class:"v-calendar-month__table calendar"},ns={class:"calendar-header"},ls=["onDrop"],os={key:0,class:"calendar-row__item-content calendar-card"},ds={class:"calendar-card__num"},rs=["onClick","onDragstart"],_s={class:"calendar-card__lesson"},is={key:0,class:"calendar-card__lesson break"},cs={key:1,class:"v-calendar-month-mob mob-page"},us={class:"container"},ms={class:"v-calendar-month-mob__container"},vs={class:"v-calendar-month-mob__table calendar"},ys={class:"calendar-header"},hs=["onClick"],gs={key:0,class:"calendar-row__item-content calendar-card"},ks={class:"calendar-card__num"},ps={class:"calendar-card__content"},fs={key:0,class:"calendar-card__lesson break"},bs={key:0,class:"v-calendar-month-mob__info lesson-info"},ws={class:"v-calendar-month-mob__day day"},Ds={class:"day__header"},Vs={class:"day__date"},Cs={class:"day__lesson"},Hs={class:"day__lesson-time"},xs={class:"day__lesson-name"},Ss={key:0,class:"day__lesson break"},Ls={class:"day__lesson-block"},Ms={class:"day__lesson-time"},Bs={key:0},Fs={__name:"v-calendar-month",setup(Ns){const H=D([{days_week:"Пн",id:1},{days_week:"Вт",id:2},{days_week:"Ср",id:3},{days_week:"Чт",id:4},{days_week:"Пт",id:5},{days_week:"Сб",id:6},{days_week:"Вс",id:7}]),i=D({weeks:{1:{6:{day:1,lessons:[{lesson_id:265,student_name:"Даниил",start_time:"14:00",end_time:"15:00"},{lesson_id:266,student_name:"Даниил",start_time:"16:00",end_time:"17:00"}]},7:{day:2,lessons:[]}},2:{1:{day:3,lessons:[]},2:{day:4,lessons:[]},3:{day:5,lessons:[]},4:{day:6,lessons:[{lesson_id:265,student_name:"Даниил",start_time:"14:00",end_time:"15:00"},{lesson_id:266,student_name:"Даниил",start_time:"16:00",end_time:"17:00"},{lesson_id:267,student_name:"Даниил",start_time:"20:00",end_time:"21:00"},{lesson_id:268,student_name:"Даниил",start_time:"22:00",end_time:"23:00"}]},5:{day:7,lessons:[]},6:{day:8,lessons:[]},7:{day:9,lessons:[]}},3:{1:{day:10,lessons:[]},2:{day:11,lessons:[]},3:{day:12,lessons:[]},4:{day:13,lessons:[]},5:{day:14,lessons:[]},6:{day:15,lessons:[]},7:{day:16,lessons:[]}},4:{1:{day:17,lessons:[]},2:{day:18,lessons:[]},3:{day:19,lessons:[]},4:{day:20,lessons:[]},5:{day:21,lessons:[]},6:{day:22,lessons:[]},7:{day:23,lessons:[]}},5:{1:{day:24,lessons:[]},2:{day:25,lessons:[]},3:{day:26,lessons:[]},4:{day:27,lessons:[]},5:{day:28,lessons:[]}}},breaks:{265:{start_time:"15:00",end_time:"15:30"}}}),c=D([]),V=D(),{isMobile:L}=P(),x=J("modalsContainer"),M=(_,t)=>{c.value[0]=parseInt(_),c.value[1]=t,localStorage.setItem("activeDay",JSON.stringify(c.value)),console.log(JSON.parse(localStorage.getItem("activeDay")))},B=(_,t,h,e,r)=>{V.value={lesson:t,fromColumnIndex:e,fromRowIndex:h,fromLessonIndex:r}},N=(_,t,h)=>{const{lesson:e,fromColumnIndex:r,fromRowIndex:l,fromLessonIndex:o}=V.value;if(r!==t||l!==h){const C=i.value.weeks[l][r].lessons,f=i.value.weeks[h][t].lessons,g=k=>{const[b,w]=k.split(":").map(Number);return b*60+w},E=g(e.start_time),$=g(e.end_time);for(let k of f){const b=g(k.start_time);if(!(g(k.end_time)<=E||b>=$)){alert("В этот день уже есть занятие на данное время");return}}C.splice(o,1),f.push(e),f.sort((k,b)=>{const w=g(k.start_time),F=g(b.start_time);return w-F})}V.value=null},I=_=>{x.value.toggleLessonModals("buttons",_)},u=O(()=>{if(c.value.length){const _=i.value.weeks[c.value[0]];if(_)return _[c.value[1]]}return null});return A(()=>{c.value=JSON.parse(localStorage.getItem("activeDay"))||[],console.log(u.value)}),(_,t)=>{const h=Z("router-link");return n(),a("div",Y,[p(W),s("main",null,[R(L)?(n(),a("section",cs,[s("div",us,[s("div",ms,[p(S,{type:"month"}),s("table",vs,[s("thead",null,[s("tr",ys,[(n(!0),a(m,null,v(H.value,e=>(n(),a("th",{class:"calendar-header__item",key:e.id},d(e.days_week),1))),128))])]),s("tbody",null,[(n(!0),a(m,null,v(i.value.weeks,(e,r)=>(n(),a("tr",{class:"calendar-row",key:r},[(n(),a(m,null,v(7,l=>s("td",{class:z(["calendar-row__item",{active:r==c.value[0]&&l==c.value[1]}]),onClick:o=>M(r,l),key:l},[e[l]?(n(),a("div",gs,[s("div",ks,d(e[l].day),1),s("div",ps,[(n(!0),a(m,null,v(e[l].lessons,o=>(n(),a("div",{class:"calendar-card__lesson",key:o.lesson_id}))),128)),e[l].breaks&&e[l].breaks[_.lesson.lesson_id]?(n(),a("div",fs)):y("",!0)])])):y("",!0)],10,hs)),64))]))),128))])])]),u.value?(n(),a("div",bs,[p(h,{to:{name:"calendar-day"}},{default:T(()=>[s("div",ws,[s("div",Ds,[s("p",Vs,d(u.value.day),1),t[1]||(t[1]=s("img",{src:q,class:"day-el",alt:""},null,-1)),t[2]||(t[2]=s("img",{src:G,class:"night-el",alt:""},null,-1))]),(n(!0),a(m,null,v(u.value.lessons,e=>(n(),a("div",{class:"day__content",key:e.id},[s("div",Cs,[s("div",Hs,[t[3]||(t[3]=s("div",{class:"day__lesson-circle"},null,-1)),s("p",null,d(e.start_time),1),t[4]||(t[4]=s("p",null,"-",-1)),s("p",null,d(e.end_time),1)]),s("div",xs,d(e.student_name),1)]),u.value.breaks&&u.value.breaks[e.lesson_id]?(n(),a("div",Ss,[s("div",Ls,[t[6]||(t[6]=s("img",{src:U,class:"day-el",alt:""},null,-1)),t[7]||(t[7]=s("img",{src:X,class:"night-el",alt:""},null,-1)),s("div",Ms,[s("p",null,d(u.value.breaks[e.lesson_id].start_time),1),t[5]||(t[5]=s("p",null,"-",-1)),s("p",null,d(u.value.breaks[e.lesson_id].end_time),1)])]),t[8]||(t[8]=s("div",{class:"day__lesson-name"},"Перерыв",-1))])):y("",!0)]))),128)),u.value.lessons.length?y("",!0):(n(),a("div",Bs,t[9]||(t[9]=[s("h2",{class:"title pb-7"},"В этот день у вас нет уроков",-1)])))])]),_:1})])):y("",!0)])])):(n(),a("section",ss,[s("div",es,[p(S,{type:"month"}),s("div",ts,[s("table",as,[s("thead",null,[s("tr",ns,[(n(!0),a(m,null,v(H.value,e=>(n(),a("th",{class:"calendar-header__item",key:e.id},d(e.days_week),1))),128))])]),s("tbody",null,[(n(!0),a(m,null,v(i.value.weeks,(e,r)=>(n(),a("tr",{class:"calendar-row",key:r},[(n(),a(m,null,v(7,l=>s("td",{class:"calendar-row__item",key:l,onDragover:t[0]||(t[0]=j(()=>{},["prevent"])),onDrop:o=>N(o,l,r)},[e[l]?(n(),a("div",os,[s("div",ds,d(e[l].day),1),(n(!0),a(m,null,v(e[l].lessons,(o,C)=>(n(),a("div",{class:"calendar-card__content",key:o.lesson_id,onClick:()=>I(o),draggable:"true",onDragstart:f=>B(f,o,r,l,C)},[s("div",_s,d(o.start_time)+" - "+d(o.end_time)+" "+d(o.student_name),1),i.value.breaks&&i.value.breaks[o.lesson_id]?(n(),a("div",is,d(i.value.breaks[o.lesson_id].start_time)+" - "+d(i.value.breaks[o.lesson_id].end_time)+" "+d(o.student_name),1)):y("",!0)],40,rs))),128))])):y("",!0)],40,ls)),64))]))),128))])])])])]))]),p(Q,{ref_key:"modalsContainer",ref:x},null,512),p(K)])}}};export{Fs as default};
