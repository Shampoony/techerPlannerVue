import{r as c,o as q,s as me,k as ne,l as pe,c as P,h as _e,i as u,a as w,d as t,b as f,w as _,q as x,n as D,m as b,e as k,f as g,j as M,v as z,x as O,y as G,t as j,T as S,F as oe}from"./index-BLUzWkCK.js";import{i as Q,j as Y,G as B,k as J,l as K,m as X,a as ee,b as te,n as ge,o as fe,h as ke,p as be,q as ye,r as we,s as xe,u as I,w as he,x as se,t as $e,y as Me,z as Ve}from"./v-header-D7IOpIGZ.js";const bt="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%231D4ECC'/%3e%3c/svg%3e",yt="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%23b5f5bf'/%3e%3c/svg%3e",le="data:image/svg+xml,%3csvg%20width='6'%20height='19'%20viewBox='0%200%206%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%207L-6.52533e-07%2013.9282L-4.68497e-08%200.0717966L6%207Z'%20fill='%23fff'/%3e%3c/svg%3e";function ae(d=480){const p=c(window.innerWidth<=d),n=()=>{p.value=window.innerWidth<=d};return q(()=>{window.addEventListener("resize",n)}),me(()=>{window.removeEventListener("resize",n)}),{isMobile:p}}const Le={class:"v-calendar-menu"},Ce={class:"v-calendar-menu__block"},De={class:"flex gap-2"},Se={class:"v-calendar-menu__picker picker"},Be={class:"v-calendar-menu__select"},qe={class:"v-calendar-menu__select-buttons"},Ue={class:"v-calendar-menu__select-button"},He={key:0,class:"v-calendar-menu__checkbox flex gap-2"},We={class:"v-calendar-menu__buttons flex"},je={key:0,class:"flex justify-between"},Ie={class:"v-calendar-menu__select mob"},Te={class:"v-calendar-menu__select-buttons"},Ze={class:"v-calendar-menu__select-button"},Ne={key:0,class:"v-calendar-menu__checkbox flex gap-2 mob"},Re={key:0,class:"v-calendar-menu mob"},Ae={class:"v-calendar-menu__block"},Ee={class:"flex gap-2 items-center justify-center"},Fe={class:"v-calendar-menu__picker picker"},Pe={class:"v-calendar-menu__date flex items-center justify-center"},ze={key:0,class:"v-calendar-menu__date-text"},Oe={key:1},Ge={class:"v-calendar-menu__date-text"},Qe={class:"v-calendar-menu__date-subtitle"},Ye={class:"v-calendar-menu__buttons flex"},wt={__name:"v-calendar-menu",props:{isShowedBreak:{type:Boolean,required:!1},type:{type:String,required:!0}},emits:["toggleBreakMode","setMonth","setWeek","paginateMonth","paginateWeek"],setup(d,{emit:p}){const n=p,r=c(localStorage.getItem("breakMode")),a=c({}),o=new Date,s=c(`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`),m=c(s.value.slice(0,4)),y=c(),T=c(),ie=ae(768),de=ae(480),U=c(),H=c(),Z=ne(),h=pe(),N=d,W=c({lessons:!1,trial_lesson:!1}),ue=()=>{const v=s.value.split("-")[1],e=s.value.split("-")[0],i={...h.query,selected_date:`${v}.${e}`};Z.push({query:i})},R=v=>{let e=parseInt(s.value.split("-")[1]),i=parseInt(m.value);v=="next"?e===12?(e=1,i+=1):e+=1:e===1?(e=12,i-=1):e-=1,T.value=Q(e-1),s.value=`${i}-${String(e).padStart(2,0)}`,y.value={month:e-1,year:i},n("paginateMonth",{month:e,year:i}),ue()},re=async v=>{const e={...h.query,start_date:v};await Z.push({query:e}),console.log("В апдейте",h.query)},A=async v=>{const e=new Date(a.value[0]),i=v==="next"?7:-7;e.setDate(e.getDate()+i);const l=ke(e);re(l).then(()=>{ce(),n("paginateWeek")})},E=v=>{a.value=v,n("setWeek",v[0].toLocaleDateString("ru-RU"))},V=v=>{console.log(v),W.value[v]=!W.value[v]},ve=()=>{n("toggleBreakMode")},F=v=>{console.log(v,y.value),y.value=v,n("setMonth",v)},ce=()=>{const e=h.query.start_date.replace(/\./g,"-");console.log(e);const i=new Date(e.split("-").reverse().join("-")),l={day:"numeric",month:"long"};U.value=i.toLocaleDateString("ru-RU",l);const $=new Date(i);$.setDate(i.getDate()+7),H.value=$.toLocaleDateString("ru-RU",l),a.value=[i,$],console.log(U.value,H.value)},L=P(()=>N.type==="month"?()=>R("next"):()=>A("next")),C=P(()=>N.type==="month"?()=>R("prev"):()=>A("prev"));return q(()=>{const v=h.query;if(v.start_date){const e=v.start_date.replace(/\./g,"-"),i=new Date(e.split("-").reverse().join("-")),l={day:"numeric",month:"long"};U.value=i.toLocaleDateString("ru-RU",l);const $=new Date(i);$.setDate(i.getDate()+7),H.value=$.toLocaleDateString("ru-RU",l),a.value=[i,$]}if(h.query.selected_date){const[e,i]=h.query.selected_date.split(".").map(Number);T.value=Q(e-1),!isNaN(e)&&!isNaN(i)&&(y.value={month:e-1,year:i})}}),(v,e)=>{const i=_e("router-link");return u(),w(oe,null,[t("div",Le,[t("div",Ce,[t("div",De,[t("div",Se,[f(i,{to:{name:"calendar-week"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="week"}])},{default:_(()=>e[19]||(e[19]=[x("Неделя")])),_:1},8,["class"]),f(i,{to:{name:"home"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="month"}])},{default:_(()=>e[20]||(e[20]=[x("Месяц")])),_:1},8,["class"])]),t("div",Be,[t("div",qe,[t("div",Ue,[d.type==="month"?(u(),b(k(B),{key:0,"month-picker":"",locale:"ru-ru","auto-apply":!0,format:k(Y),modelValue:y.value,"onUpdate:modelValue":[e[0]||(e[0]=l=>y.value=l),F]},{"clear-icon":_(({clear:l})=>e[21]||(e[21]=[])),_:1},8,["format","modelValue"])):g("",!0),d.type==="week"?(u(),b(k(B),{key:1,"week-picker":"",format:k(J),locale:"ru-ru","auto-apply":!0,modelValue:a.value,"onUpdate:modelValue":[e[1]||(e[1]=l=>a.value=l),E]},{"clear-icon":_(({clear:l})=>e[22]||(e[22]=[])),_:1},8,["format","modelValue"])):g("",!0),e[23]||(e[23]=t("div",{class:"v-calendar-menu__select-button-image"},[t("img",{class:"day-el",src:K,alt:""}),t("img",{class:"night-el",src:X,alt:""})],-1))]),t("div",{class:"v-calendar-menu__select-button",onClick:e[2]||(e[2]=M((...l)=>C.value&&C.value(...l),["prevent"]))},e[24]||(e[24]=[z('<svg class="day-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#202020"></path></g></svg><svg class="night-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#fff"></path></g></svg>',2)])),t("div",{class:"v-calendar-menu__select-button",onClick:e[3]||(e[3]=M((...l)=>L.value&&L.value(...l),["prevent"]))},e[25]||(e[25]=[t("svg",{class:"day-el",width:"6",height:"14",viewBox:"0 0 6 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z",fill:"#202020"})],-1),t("img",{src:le,class:"night-el",alt:""},null,-1)]))])]),d.isShowedBreak?(u(),w("div",He,[O(t("input",{type:"checkbox",class:"custom-checkbox-input",id:"break",onChange:ve,"onUpdate:modelValue":e[4]||(e[4]=l=>r.value=l)},null,544),[[G,r.value]]),e[26]||(e[26]=t("label",{for:"break",class:"custom-checkbox-label"},[t("span",{class:"custom-checkbox"}),t("div",{class:"v-calendar-menu__checkbox-subtitle"},"Показывать перерыв между занятиями")],-1))])):g("",!0)]),t("div",We,[t("div",{class:"v-calendar-menu__button trial-btn",onClick:e[5]||(e[5]=l=>V("trial_lesson"))},e[27]||(e[27]=[t("div",{class:"button-plus"},"+",-1),x(" Пробное занятие ")])),t("div",{class:"v-calendar-menu__button blue-btn",onClick:e[6]||(e[6]=l=>V("lessons"))},e[28]||(e[28]=[t("div",{class:"button-plus"},"+",-1),x(" Занятие ")]))])]),k(ie).isMobile?(u(),w("div",je,[t("div",Ie,[t("div",Te,[t("div",Ze,[d.type==="month"?(u(),b(k(B),{key:0,"month-picker":"",locale:"ru-ru","auto-apply":!0,format:k(Y),modelValue:y.value,"onUpdate:modelValue":[e[7]||(e[7]=l=>y.value=l),F]},{"clear-icon":_(({clear:l})=>e[29]||(e[29]=[])),_:1},8,["format","modelValue"])):g("",!0),d.type==="week"?(u(),b(k(B),{key:1,"week-picker":"",format:k(J),locale:"ru-ru","auto-apply":!0,modelValue:a.value,"onUpdate:modelValue":[e[8]||(e[8]=l=>a.value=l),E]},{"clear-icon":_(({clear:l})=>e[30]||(e[30]=[])),_:1},8,["format","modelValue"])):g("",!0),e[31]||(e[31]=t("div",{class:"v-calendar-menu__select-button-image"},[t("img",{class:"day-el",src:K,alt:""}),t("img",{class:"night-el",src:X,alt:""})],-1))]),t("div",{class:"v-calendar-menu__select-button",onClick:e[9]||(e[9]=M((...l)=>C.value&&C.value(...l),["prevent"]))},e[32]||(e[32]=[z('<svg class="day-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#202020"></path></g></svg><svg class="night-el" width="6" height="14" viewBox="0 0 6 14" fill="none" xmlns="http://www.w3.org/2000/svg"><g transform="scale(-1,1) translate(-6,0)"><path d="M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z" fill="#fff"></path></g></svg>',2)])),t("div",{class:"v-calendar-menu__select-button",onClick:e[10]||(e[10]=M((...l)=>L.value&&L.value(...l),["prevent"]))},e[33]||(e[33]=[t("svg",{class:"day-el",width:"6",height:"14",viewBox:"0 0 6 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 7L-6.52533e-07 13.9282L-4.68497e-08 0.0717966L6 7Z",fill:"#202020"})],-1),t("img",{src:le,class:"night-el",alt:""},null,-1)]))])]),d.isShowedBreak?(u(),w("div",Ne,[O(t("input",{type:"checkbox",class:"custom-checkbox-input",id:"mob-break",onChange:e[11]||(e[11]=l=>n("toggleBreakMode")),"onUpdate:modelValue":e[12]||(e[12]=l=>r.value=l)},null,544),[[G,r.value]]),e[34]||(e[34]=t("label",{for:"mob-break",class:"custom-checkbox-label"},[t("span",{class:"custom-checkbox"}),t("div",{class:"v-calendar-menu__checkbox-subtitle"},"Показывать перерыв между занятиями")],-1))])):g("",!0)])):g("",!0)]),k(de).isMobile?(u(),w("div",Re,[t("div",Ae,[t("div",Ee,[t("div",Fe,[f(i,{to:{name:"calendar-week"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="week"}])},{default:_(()=>e[35]||(e[35]=[x("Неделя")])),_:1},8,["class"]),f(i,{to:{name:"home"},class:D(["v-calendar-menu__picker-item picker__item",{active:d.type==="month"}])},{default:_(()=>e[36]||(e[36]=[x("Месяц")])),_:1},8,["class"])])]),t("div",Pe,[t("a",{class:"v-calendar-menu__date-back",onClick:e[13]||(e[13]=M((...l)=>C.value&&C.value(...l),["prevent"]))},e[37]||(e[37]=[t("img",{src:ee,class:"day-el",alt:""},null,-1),t("img",{src:te,class:"night-el",alt:""},null,-1)])),d.type=="week"?(u(),w("h3",ze,j(U.value)+" - "+j(H.value),1)):g("",!0),d.type=="month"?(u(),w("div",Oe,[t("h3",Ge,j(T.value),1),t("p",Qe,j(m.value),1)])):g("",!0),t("a",{class:"v-calendar-menu__date-next",onClick:e[14]||(e[14]=M((...l)=>L.value&&L.value(...l),["prevent"]))},e[38]||(e[38]=[t("img",{src:ee,class:"day-el",alt:""},null,-1),t("img",{src:te,class:"night-el",alt:""},null,-1)]))]),t("div",Ye,[t("div",{class:"v-calendar-menu__button trial-btn",onClick:e[15]||(e[15]=l=>V("trial_lesson"))},e[39]||(e[39]=[t("div",{class:"button-plus"},"+",-1),x(" Пробное занятие ")])),t("div",{class:"v-calendar-menu__button blue-btn",onClick:e[16]||(e[16]=l=>V("lessons"))},e[40]||(e[40]=[t("div",{class:"button-plus"},"+",-1),x(" Занятие ")]))])])])):g("",!0),f(S,{name:"fade"},{default:_(()=>[W.value.lessons?(u(),b(ge,{key:0,onClose:e[17]||(e[17]=l=>V("lessons"))})):g("",!0)]),_:1}),f(S,{name:"fade"},{default:_(()=>[W.value.trial_lesson?(u(),b(fe,{key:0,onClose:e[18]||(e[18]=l=>V("trial_lesson"))})):g("",!0)]),_:1})],64)}}},Je={class:"modal-add"},Ke={class:"picker modal-add__picker"},Xe={key:0,class:"single"},et={key:1,class:"stable"},tt={__name:"v-change-modal",props:{lesson:{type:Object,require:!0}},setup(d){const p=d,n=c("single");c(null),c(null),c("02/01/2025"),c([{id:1,text:"ПН",active:!1,day_of_week:1},{id:2,text:"ВТ",active:!1,day_of_week:2},{id:3,text:"СР",active:!1,day_of_week:3},{id:4,text:"ЧТ",active:!1,day_of_week:4},{id:5,text:"ПТ",active:!1,day_of_week:5},{id:6,text:"СБ",active:!1,day_of_week:6},{id:7,text:"ВС",active:!1,day_of_week:7}]),c([]),c({});const r=c({student:{default:"Ученик",options:[{id:1,text:"Артур"}]}}),a=s=>{n.value=s},o=s=>{console.log(s)};return q(()=>{be().then(s=>{r.value.student=s,console.log(r.value)}),console.log("Выбранный урок - ",p.lesson)}),(s,m)=>(u(),b(I,null,{default:_(()=>[t("div",Je,[m[2]||(m[2]=t("div",{class:"modal-title"},"Редактирование занятия",-1)),t("div",Ke,[t("div",{class:D(["picker__item",{active:n.value=="single"}]),onClick:m[0]||(m[0]=y=>a("single"))}," Разовое занятие ",2),t("div",{class:D(["picker__item",{active:n.value=="stable"}]),onClick:m[1]||(m[1]=y=>a("stable"))}," Постоянные занятия ",2)]),f(ye,{options:r.value.student,onValueSelected:o},null,8,["options"]),n.value=="single"?(u(),w("div",Xe,[f(we)])):g("",!0),n.value=="stable"?(u(),w("div",et,[f(xe)])):g("",!0)])]),_:1}))}},st={class:"modal-transfer"},lt=["value"],at={class:"flex gap-4"},nt={class:"modal-transfer__block"},ot=["value"],it={class:"flex gap-2"},dt=["value"],ut=["value"],rt={class:"modal-transfer__block"},vt={class:"flex gap-2"},ct={__name:"v-transfer-modal",props:{lesson:{type:Object,require:!0}},setup(d){const p=d,n=()=>{if(a.value){const o=a.value.time[1];console.log(a.value.time,a.value.time[1]);const s={day_of_week_id:a.value.date.getDay(),start_time:o.start,end_time:o.end,conducted_date:a.value.date.toISOString().split("T")[0]};$e(p.lesson.lesson_id,s,!0)}},r=o=>{a.value.time[1].start=o,a.value.time[1].end=o,Me(1,a.value.time)},a=c({date:new Date,time:{1:{start:"",end:"--:--"}}});return q(()=>{console.log("Выбранный урок - ",p.lesson)}),(o,s)=>(u(),b(I,null,{default:_(()=>[t("div",st,[s[6]||(s[6]=t("h2",{class:"modal-title mb-4"},"Перенос занятия",-1)),t("input",{type:"text",class:"styled-input",value:p.lesson.student_name,readonly:""},null,8,lt),t("div",at,[t("div",nt,[s[3]||(s[3]=t("h3",{class:"text-subtitle"},"Перенести с",-1)),t("input",{type:"text",class:"styled-input",value:p.lesson.date,readonly:""},null,8,ot),t("div",it,[t("input",{type:"time",class:"styled-input text-center",value:p.lesson.start_time,readonly:""},null,8,dt),t("input",{type:"time",class:"styled-input text-center",value:p.lesson.end_time,readonly:""},null,8,ut)])]),t("div",rt,[s[5]||(s[5]=t("h3",{class:"text-subtitle"},"на",-1)),f(k(B),{class:"datepicker",format:k(he),locale:"ru-ru",modelValue:a.value.date,"onUpdate:modelValue":s[0]||(s[0]=m=>a.value.date=m),"auto-apply":!0},{"clear-icon":_(({clear:m})=>s[4]||(s[4]=[])),_:1},8,["format","modelValue"]),t("div",vt,[f(k(se),{"onUpdate:modelValue":[r,s[1]||(s[1]=m=>a.value.time[1].start=m)],modelValue:a.value.time[1].start,placeholder:"--:--",clearable:!1},null,8,["modelValue"]),f(k(se),{modelValue:a.value.time[1].start,"onUpdate:modelValue":s[2]||(s[2]=m=>a.value.time[1].start=m),placeholder:a.value.time[1].end,clearable:!1},null,8,["modelValue","placeholder"])])])]),t("button",{class:"blue-btn",type:"submit",onClick:M(n,["prevent"])},"Перенести")])]),_:1}))}},mt={class:"v-buttons-modal"},pt={class:"v-buttons-modal__container"},_t={__name:"v-buttons-modal",emits:["toggleLessonModals"],setup(d,{emit:p}){const n=p,r=a=>{n("toggleLessonModals",a)};return(a,o)=>(u(),b(I,{id:"buttons-modal"},{default:_(()=>[t("div",mt,[o[3]||(o[3]=t("h2",{class:"modal-title"},"Занятие",-1)),t("div",pt,[t("div",{class:"v-buttons-modal__button white-btn",onClick:o[0]||(o[0]=s=>r("delete_lesson"))}," Удалить "),t("div",{class:"v-buttons-modal__button blue-btn",onClick:o[1]||(o[1]=s=>r("change_lesson"))}," Редактировать правило "),t("div",{class:"v-buttons-modal__button blue-btn",onClick:o[2]||(o[2]=s=>r("transfer_lesson"))}," Перенести ")])])]),_:1}))}},gt={__name:"v-delete-lesson-modal",props:{lesson:{type:Object,require:!0}},setup(d){const p=ne(),n=d,r=()=>{console.log("Урок для удаления -",n.lesson),Ve(n.lesson.lesson_id).then(()=>{p.go(0)})};return q(()=>{console.log("Выбранный урок - ",n.lesson)}),(a,o)=>(u(),b(I,{id:"delete-lesson-modal"},{default:_(()=>[t("div",{class:"v-delete-lesson-modal"},[o[1]||(o[1]=t("div",{class:"modal-title"},"Удалить занятие?",-1)),t("div",{class:"v-delete-lesson-modal__container"},[t("div",{class:"v-delete-lesson-modal__button blue-btn",onClick:r},"Да"),o[0]||(o[0]=t("div",{class:"v-delete-lesson-modal__button white-btn"},"Нет",-1))])])]),_:1}))}},xt={__name:"v-modals-container",setup(d,{expose:p}){const n=(o,s=null)=>{s&&(a.value=s),r.value[o]=!r.value[o]},r=c({buttons:!1,delete_lesson:!1,transfer_lesson:!1,change_lesson:!1}),a=c({});return p({toggleLessonModals:n}),(o,s)=>(u(),w(oe,null,[f(S,{name:"fade"},{default:_(()=>[r.value.buttons?(u(),b(_t,{key:0,onToggleLessonModals:n,onClose:s[0]||(s[0]=m=>n("buttons"))})):g("",!0)]),_:1}),f(S,{name:"fade"},{default:_(()=>[r.value.transfer_lesson?(u(),b(ct,{key:0,onClose:s[1]||(s[1]=m=>n("transfer_lesson")),lesson:a.value},null,8,["lesson"])):g("",!0)]),_:1}),f(S,{name:"fade"},{default:_(()=>[r.value.change_lesson?(u(),b(tt,{key:0,onClose:s[2]||(s[2]=m=>n("change_lesson")),lesson:a.value},null,8,["lesson"])):g("",!0)]),_:1}),f(S,{name:"fade"},{default:_(()=>[r.value.delete_lesson?(u(),b(gt,{key:0,onClose:s[3]||(s[3]=m=>n("delete_lesson")),lesson:a.value},null,8,["lesson"])):g("",!0)]),_:1})],64))}};export{wt as _,bt as a,yt as b,xt as c,ae as u};
