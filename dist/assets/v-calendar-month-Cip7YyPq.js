import{r as D,u as J,c as O,o as A,a,b as k,d as s,e as R,F as c,f as u,w as T,g as v,h as Z,i as n,t as d,j,n as z}from"./index-DzmL5RbY.js";import{_ as W,a as q,b as G,v as K}from"./v-header-BlTfSyKl.js";import{u as P,_ as L,a as Q}from"./useIsMobile-Czn4nfK-.js";const U="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%231D4ECC'/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='8'%20fill='transperent'/%3e%3cpath%20d='M5%207.5H7.5V5H8.5V7.5H11V8.5H8.5V11H7.5V8.5H5V7.5Z'%20fill='%23b5f5bf'/%3e%3c/svg%3e",Y={class:"wrapper"},ss={key:0,class:"v-calendar-month"},es={class:"v-calendar-month__container container"},ts={class:"v-calendar-month__content scroll-container"},as={class:"v-calendar-month__table calendar"},ns={class:"calendar-header"},ls=["onDrop"],os={key:0,class:"calendar-row__item-content calendar-card"},ds={class:"calendar-card__num"},rs=["onClick","onDragstart"],is={class:"calendar-card__lesson"},_s={key:0,class:"calendar-card__lesson break"},cs={key:1,class:"v-calendar-month-mob mob-page"},us={class:"container"},ms={class:"v-calendar-month-mob__container"},vs={class:"v-calendar-month-mob__table calendar"},ys={class:"calendar-header"},hs=["onClick"],gs={key:0,class:"calendar-row__item-content calendar-card"},ps={class:"calendar-card__num"},ks={key:0,class:"calendar-card__lesson break"},fs={key:0,class:"v-calendar-month-mob__info lesson-info"},bs={class:"v-calendar-month-mob__day day"},ws={class:"day__header"},Ds={class:"day__date"},Vs={class:"day__lesson"},Cs={class:"day__lesson-time"},Hs={class:"day__lesson-name"},xs={key:0,class:"day__lesson break"},Ss={class:"day__lesson-block"},Ls={class:"day__lesson-time"},Ms={key:0},$s={__name:"v-calendar-month",setup(Bs){const H=D([{days_week:"Пн",id:1},{days_week:"Вт",id:2},{days_week:"Ср",id:3},{days_week:"Чт",id:4},{days_week:"Пт",id:5},{days_week:"Сб",id:6},{days_week:"Вс",id:7}]),i=D({weeks:{1:{6:{day:1,lessons:[{lesson_id:265,student_name:"Даниил",start_time:"14:00",end_time:"15:00"},{lesson_id:266,student_name:"Даниил",start_time:"16:00",end_time:"17:00"}]},7:{day:2,lessons:[]}},2:{1:{day:3,lessons:[]},2:{day:4,lessons:[]},3:{day:5,lessons:[]},4:{day:6,lessons:[]},5:{day:7,lessons:[]},6:{day:8,lessons:[]},7:{day:9,lessons:[]}},3:{1:{day:10,lessons:[]},2:{day:11,lessons:[]},3:{day:12,lessons:[]},4:{day:13,lessons:[]},5:{day:14,lessons:[]},6:{day:15,lessons:[]},7:{day:16,lessons:[]}},4:{1:{day:17,lessons:[]},2:{day:18,lessons:[]},3:{day:19,lessons:[]},4:{day:20,lessons:[]},5:{day:21,lessons:[]},6:{day:22,lessons:[]},7:{day:23,lessons:[]}},5:{1:{day:24,lessons:[]},2:{day:25,lessons:[]},3:{day:26,lessons:[]},4:{day:27,lessons:[]},5:{day:28,lessons:[]}}},breaks:{265:{start_time:"15:00",end_time:"15:30"}}}),_=D([]),V=D(),{isMobile:x}=P(),S=J("modalsContainer"),M=(y,e)=>{_.value[0]=parseInt(y),_.value[1]=e,localStorage.setItem("activeDay",JSON.stringify(_.value)),console.log(JSON.parse(localStorage.getItem("activeDay")))},B=(y,e,h,t,r)=>{V.value={lesson:e,fromColumnIndex:t,fromRowIndex:h,fromLessonIndex:r}},N=(y,e,h)=>{const{lesson:t,fromColumnIndex:r,fromRowIndex:l,fromLessonIndex:o}=V.value;if(r!==e||l!==h){const C=i.value.weeks[l][r].lessons,f=i.value.weeks[h][e].lessons,g=p=>{const[b,w]=p.split(":").map(Number);return b*60+w},E=g(t.start_time),$=g(t.end_time);for(let p of f){const b=g(p.start_time);if(!(g(p.end_time)<=E||b>=$)){alert("В этот день уже есть занятие на данное время");return}}C.splice(o,1),f.push(t),f.sort((p,b)=>{const w=g(p.start_time),F=g(b.start_time);return w-F})}V.value=null},I=y=>{S.value.toggleLessonModals("buttons",y)},m=O(()=>_.value.length?i.value[_.value[0]][_.value[1]]:null);return A(()=>{_.value=JSON.parse(localStorage.getItem("activeDay"))||[],console.log(x.value)}),(y,e)=>{const h=Z("router-link");return n(),a("div",Y,[k(W),s("main",null,[R(x)?(n(),a("section",cs,[s("div",us,[s("div",ms,[k(L,{type:"month"}),s("table",vs,[s("thead",null,[s("tr",ys,[(n(!0),a(c,null,u(H.value,t=>(n(),a("th",{class:"calendar-header__item",key:t.id},d(t.days_week),1))),128))])]),s("tbody",null,[(n(!0),a(c,null,u(i.value,(t,r)=>(n(),a("tr",{class:"calendar-row",key:r},[(n(),a(c,null,u(7,l=>s("td",{class:z(["calendar-row__item",{active:r==_.value[0]&&l==_.value[1]}]),onClick:o=>M(r,l),key:l},[t[l]?(n(),a("div",gs,[s("div",ps,d(t[l].day),1),(n(!0),a(c,null,u(t[l].lessons,o=>(n(),a("div",{class:"calendar-card__content",key:o.lesson_id},[e[1]||(e[1]=s("div",{class:"calendar-card__lesson"},null,-1)),t[l].breaks&&t[l].breaks[o.lesson_id]?(n(),a("div",ks)):v("",!0)]))),128))])):v("",!0)],10,hs)),64))]))),128))])])]),m.value?(n(),a("div",fs,[k(h,{to:{name:"calendar-day"}},{default:T(()=>[s("div",bs,[s("div",ws,[s("p",Ds,d(m.value.day),1),e[2]||(e[2]=s("img",{src:q,class:"day-el",alt:""},null,-1)),e[3]||(e[3]=s("img",{src:G,class:"night-el",alt:""},null,-1))]),(n(!0),a(c,null,u(m.value.lessons,t=>(n(),a("div",{class:"day__content",key:t.id},[s("div",Vs,[s("div",Cs,[e[4]||(e[4]=s("div",{class:"day__lesson-circle"},null,-1)),s("p",null,d(t.start_time),1),e[5]||(e[5]=s("p",null,"-",-1)),s("p",null,d(t.end_time),1)]),s("div",Hs,d(t.student_name),1)]),m.value.breaks&&m.value.breaks[t.lesson_id]?(n(),a("div",xs,[s("div",Ss,[e[7]||(e[7]=s("img",{src:U,class:"day-el",alt:""},null,-1)),e[8]||(e[8]=s("img",{src:X,class:"night-el",alt:""},null,-1)),s("div",Ls,[s("p",null,d(m.value.breaks[t.lesson_id].start_time),1),e[6]||(e[6]=s("p",null,"-",-1)),s("p",null,d(m.value.breaks[t.lesson_id].end_time),1)])]),e[9]||(e[9]=s("div",{class:"day__lesson-name"},"Перерыв",-1))])):v("",!0)]))),128)),m.value.lessons.length?v("",!0):(n(),a("div",Ms,e[10]||(e[10]=[s("h2",{class:"title pb-7"},"В этот день у вас нет уроков",-1)])))])]),_:1})])):v("",!0)])])):(n(),a("section",ss,[s("div",es,[k(L,{type:"month"}),s("div",ts,[s("table",as,[s("thead",null,[s("tr",ns,[(n(!0),a(c,null,u(H.value,t=>(n(),a("th",{class:"calendar-header__item",key:t.id},d(t.days_week),1))),128))])]),s("tbody",null,[(n(!0),a(c,null,u(i.value.weeks,(t,r)=>(n(),a("tr",{class:"calendar-row",key:r},[(n(),a(c,null,u(7,l=>s("td",{class:"calendar-row__item",key:l,onDragover:e[0]||(e[0]=j(()=>{},["prevent"])),onDrop:o=>N(o,l,r)},[t[l]?(n(),a("div",os,[s("div",ds,d(t[l].day),1),(n(!0),a(c,null,u(t[l].lessons,(o,C)=>(n(),a("div",{class:"calendar-card__content",key:o.lesson_id,onClick:()=>I(o),draggable:"true",onDragstart:f=>B(f,o,r,l,C)},[s("div",is,d(o.start_time)+" - "+d(o.end_time)+" "+d(o.student_name),1),i.value.breaks&&i.value.breaks[o.lesson_id]?(n(),a("div",_s,d(i.value.breaks[o.lesson_id].start_time)+" - "+d(i.value.breaks[o.lesson_id].end_time)+" "+d(o.student_name),1)):v("",!0)],40,rs))),128))])):v("",!0)],40,ls)),64))]))),128))])])])])]))]),k(Q,{ref_key:"modalsContainer",ref:S},null,512),k(K)])}}};export{$s as default};
